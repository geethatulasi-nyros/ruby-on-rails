(window.$WP=window.$WP||[]).push({id:"@ta/public.share-cta",d:["vendor-react-libs","ta-platform","ta-common","@ta/tracking.interactions","vendor-babel","@ta/overlays.popover","vendor-apollo-libs","@ta/trips.trip-util","@ta/overlays.managers","@ta/common.clipboard","@ta/overlays.modal","@ta/overlays.headers"],e:["./packages/public/share-cta/index.jsx"],x:{"./packages/public/share-cta/index.jsx":["ShareCta","ShareTarget","ShareTracker","SharePopover","ShareDropdownMenu","ShareButton"]},m:{"./packages/public/share-cta/index.jsx":function(e,t,i){"use strict";i.r(t);var a=i("react"),n=i("@ta/common.classnames"),r=i.n(n),l=i("@ta/common.features"),c=i("@ta/styleguide.icon"),o=i("@ta/common.i18n"),s=i("@ta/tracking.interactions"),m=i("react-redux"),u=i("@ta/common.tracking"),d={sms:19907,email:55593,clipboard:19905},p=function e(t){var i=t.url,n=t.itemType,r=t.itemId,l=t.action,c=t.type,o=t.children,s="".concat(n,"|").concat(r,"|").concat(i);return a.createElement(u.ClickTracker,{useSpan:!0,module:"ShareCta",action:l,context:s,once:!1,value:c?d[c]:void 0},o(c?function e(t){if("LinkPost"===n)return i;var a=-1!==i.indexOf("?"),r=-1!==i.indexOf("#"),l="".concat(a?"&":"?","m=").concat(t);return r?i.replace("#","".concat(l,"#")):"".concat(i).concat(l)}(d[c]):i))};p.defaultProps={type:null};var v=Object(m.connect)(function(e,t){return{url:t.url.startsWith("/")?e.meta.baseUrl+t.url:t.url}})(p),b=i("@babel/runtime/helpers/esm/objectSpread"),_=i.n(b),k=i("@ta/overlays.popover"),h=i.n(k),f=i("@babel/runtime/helpers/esm/defineProperty"),y=i.n(f),g=function e(t){var i,n,l,o=t.iconName,s=t.localizedText,m=t.onClickFunction,u=t.imgCdnUrl,d=t.size;return a.createElement("li",{onClick:m,className:r()("ui_link","public-share-cta-ListItem__listItem--3ISth",(i={},y()(i,"public-share-cta-ListItem__small--37OPx","small"===d),y()(i,"public-share-cta-ListItem__large--LaLAA","large"===d),i))},o.startsWith("/")?a.createElement("img",{src:"".concat(u).concat(o),className:r()("public-share-cta-ListItem__img--xCvMj",(n={},y()(n,"public-share-cta-ListItem__small--37OPx","small"===d),y()(n,"public-share-cta-ListItem__large--LaLAA","large"===d),n))}):a.createElement(c.Icon,{name:o,className:r()("public-share-cta-ListItem__icon--YWVUF",(l={},y()(l,"public-share-cta-ListItem__small--37OPx","small"===d),y()(l,"public-share-cta-ListItem__large--LaLAA","large"===d),l))}),a.createElement("span",null,s))};g.defaultProps={onClickFunction:function e(){return!1}};var S=Object(m.connect)(function(e){return{imgCdnUrl:e.meta.imageCdnUrl}})(g),N=function e(t){var i,n=t.url,r=t.itemType,l=t.size;return i="LinkPost"===r?Object(o.localize)("share_sms_link"):"ReadTrip"===r?Object(o.localize)("trips_share_email_subject"):"WriteTrip"===r?Object(o.localize)("trips_collaborate_invite_email_subject"):Object(o.localize)("link_share_sms_checkthisout"),a.createElement(S,{iconName:"text-message-fill",localizedText:Object(o.localize)("link_share_option_sms"),size:l,onClickFunction:function e(){return function e(t,i){var a="".concat(i," ").concat(t);a.length>140&&(a=t),window.location.href="sms:?&body=".concat(encodeURIComponent(a))}(n,i)}})},E=i("@babel/runtime/helpers/esm/extends"),I=i.n(E),j=i("react-apollo"),T=i("@ta/trips.trip-util"),O={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PoiDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locationId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"locationIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"locationId"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:95}};O.loc.source={body:"cd864acb4d54"};var C=O,z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ReviewDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reviewId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"reviewIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"reviewId"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:91}};z.loc.source={body:"ede4e30b387b"};var A=z,w={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PhotoDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"photos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"photoIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"id"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"caption"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:78}};w.loc.source={body:"9a91e6db74b1"};var L=w,x={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"videos"},arguments:[{kind:"Argument",name:{kind:"Name",value:"videoIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"id"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"caption"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:78}};x.loc.source={body:"2d20581296d0"};var D=x,P={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TripDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trips"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tripIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"id"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isMe"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:109}};P.loc.source={body:"a926d0b00948"};var F=P,V=["Restaurant_Review","Attraction_Review","MobileAttraction_Review","AttractionProductDetail","MobileAttractionProductDetail","Hotel_Review","MobileHotel_Review"],B=function e(t){var i=t.url,n=t.subject,r=t.firstSentence,l=t.textBeforeLink,c=t.textAfterLink,s=t.size;return a.createElement(S,{iconName:"email-fill",localizedText:Object(o.localize)("link_share_option_email"),size:s,onClickFunction:function e(){return function e(t,i,a,n,r){var l=encodeURIComponent(t),c=encodeURIComponent(n),s=encodeURIComponent(r),m=encodeURIComponent(i||Object(o.localize)("share_email_subject")),u=a||Object(o.localize)("link_share_sms_checkthisout"),d="".concat(u,"%0D%0A%0D%0A").concat(c?"".concat(c,"%0D%0A"):"").concat(l,"%0D%0A").concat(s?"".concat(s,"%0D%0A"):"","%0D%0A").concat(Object(o.localize)("ib_share_booking_download_app"),"%0D%0A").concat(Object(o.localize)("app_download_url"));window.location.href="mailto:".concat("","?subject=").concat(m,"&body=").concat(d)}(i,n,r,l,c)}})};B.defaultProps={firstSentence:"",subject:"",textBeforeLink:"",textAfterLink:""};var R=function e(t){if(V.indexOf(t.itemType)>-1)return a.createElement(j.Query,{query:C,variables:{locationId:t.itemId}},function(e){var i=e.loading,n=e.data;if(i)return a.createElement(B,t);var r=n.locations[0]&&n.locations[0].name||"";return a.createElement(B,I()({},t,{subject:Object(o.localize)("link_share_email_subject",{0:r}),firstSentence:Object(o.localize)("mobile_here_is_a_place_i_found_8e0"),textBeforeLink:r}))});if("Review"===t.itemType)return a.createElement(j.Query,{query:A,variables:{reviewId:t.itemId}},function(e){var i=e.loading,n=e.data;return i?a.createElement(B,t):a.createElement(B,I()({},t,{firstSentence:Object(o.localize)("share_email_reviews"),textBeforeLink:n.reviews[0]&&n.reviews[0].title||""}))});if("Photo"===t.itemType)return a.createElement(j.Query,{query:L,variables:{id:t.itemId}},function(e){var i=e.loading,n=e.data;return i?a.createElement(B,t):a.createElement(B,I()({},t,{firstSentence:Object(o.localize)("share_email_photos"),textBeforeLink:n.photos[0]&&n.photos[0].caption||""}))});if("Video"===t.itemType)return a.createElement(j.Query,{query:D,variables:{id:t.itemId}},function(e){var i=e.loading,n=e.data;return i?a.createElement(B,t):a.createElement(B,I()({},t,{firstSentence:Object(o.localize)("share_email_videos"),textBeforeLink:n.videos[0]&&n.videos[0].caption||""}))});if("LinkPost"===t.itemType)return a.createElement(B,I()({},t,{subject:Object(o.localize)("share_email_link_subject"),firstSentence:Object(o.localize)("share_email_link"),textAfterLink:Object(o.localize)("share_email_link_attribution")}));if("ForumPost"===t.itemType)return a.createElement(B,I()({},t,{firstSentence:Object(o.localize)("share_email_forumtopic")}));if("ForumResponse"===t.itemType)return a.createElement(B,I()({},t,{firstSentence:Object(o.localize)("share_email_forumreply")}));if("WriteTrip"===t.itemType||"ReadTrip"===t.itemType){var i="WriteTrip"===t.itemType;return a.createElement(j.Query,{query:F,variables:{id:t.itemId}},function(e){var n=e.loading,r=e.data,l=t;if(!n&&r){var c=r.trips&&r.trips.find(function(e){return e.id===t.itemId}),s={tripName:c&&c.title||""},m=Object(T.isOwner)(c);l=Object.assign({},t,{firstSentence:Object(o.localize)("trips_share_email_hey"),subject:Object(o.localize)("trips_share_email_subject"),textBeforeLink:Object(o.localize)("trips_share_email_body_v2",s)}),i?(l.subject=Object(o.localize)("trips_collaborate_invite_email_subject"),l.textBeforeLink=m?Object(o.localize)("trips_collaborate_invite_email_body_v2",s):Object(o.localize)("trips_collaborate_invite_email_body_collaborator_version",s)):m||(l.subject=Object(o.localize)("trips_share_email_subject"),l.textBeforeLink=Object(o.localize)("trips_email_share_collaborator_version",s))}return a.createElement(B,l)})}return a.createElement(B,t)},q=i("@babel/runtime/helpers/esm/classCallCheck"),U=i.n(q),W=i("@babel/runtime/helpers/esm/createClass"),M=i.n(W),Q=i("@babel/runtime/helpers/esm/possibleConstructorReturn"),X=i.n(Q),Y=i("@babel/runtime/helpers/esm/getPrototypeOf"),H=i.n(Y),G=i("@babel/runtime/helpers/esm/inherits"),$=i.n(G),J=i("@babel/runtime/helpers/esm/assertThisInitialized"),K=i.n(J),Z=i("@ta/overlays.managers"),ee=i("@ta/common.clipboard"),te=i.n(ee),ie=function(e){function t(){var e,i;U()(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return i=X()(this,(e=H()(t)).call.apply(e,[this].concat(n))),y()(K()(K()(i)),"state",{copied:!1}),y()(K()(K()(i)),"copyAndClose",function(e,t){var a=te.a.copy(e);return a&&(i.setState({copied:!0}),setTimeout(function(){return t()},3e3)),a}),i}return $()(t,e),M()(t,[{key:"render",value:function e(){var t=this;return a.createElement(Z.Closer,null,function(e){return a.createElement(S,{iconName:"link",size:t.props.size,localizedText:t.state.copied?Object(o.localize)("link_share_link_copied"):Object(o.localize)("link_share_option_clipboard"),onClickFunction:t.state.copied?void 0:function(){return t.copyAndClose(t.props.url,e)}})})}}]),t}(a.Component),ae=Object(m.connect)(function(e,t){return _()({},t,{url:t.url.startsWith("/")?e.meta.baseUrl+t.url:t.url,viewportCategory:e.meta.device.viewportCategory})})(function e(t){var i=t.url,n=t.itemType,c=t.itemId,o=t.viewportCategory,s=t.headerComponent;return a.createElement("div",{className:r()("public-share-cta-SharePopover__container--2A2cD",Object(l.featureIsEnabled)("hr_dark_green_icons")?"public-share-cta-SharePopover__dark_icons--3q5Bk":"")},s,"MOBILE"===o&&a.createElement(v,{action:"share_select",itemType:n,itemId:c,url:i,type:"sms"},function(e){return a.createElement(N,{url:e,itemType:n,size:"small"})}),a.createElement(v,{url:i,itemType:n,itemId:c,action:"share_select",type:"email"},function(e){return a.createElement(R,{url:e,itemType:n,itemId:Number(c),size:"small"})}),a.createElement(v,{action:"share_select",itemType:n,itemId:c,url:i,type:"clipboard"},function(e){return a.createElement(ie,{url:e,size:"small"})}))}),ne=function e(t){var i=t.fixed,n=t.url,r=t.itemType,l=t.itemId,c=t.shiftX,o=t.shiftY,s=t.children,m=t.headerComponent,u=t.alignEdge;return a.createElement(h.a,{local:!0,closeButton:!1,fixed:i,below:!0,alignEdge:u,shiftX:c,shiftY:o,shiftArrow:c,arrowType:"small",contents:function e(){return a.createElement(ae,{url:n,itemType:r,itemId:l,headerComponent:m})}},s)};ne.defaultProps={fixed:!1,shiftX:0,shiftY:0,headerComponent:null,alignEdge:"right"};var re=function e(t){var i=t.url,n=t.itemType,r=t.itemId,l=t.styleAsSocialAction,c=t.headerComponent,o=t.onClick,m=t.alignEdge;return a.createElement("div",null,a.createElement(ne,{url:i,itemType:n,itemId:r,shiftX:6,shiftY:4,headerComponent:c,alignEdge:m},function(e,t){return a.createElement(v,{itemType:n,itemId:r,url:i,action:"share_button_click"},function(){return a.createElement(s.InteractionLogger,null,function(i){return a.createElement(le,{onClick:function e(a){o&&o(a),i(a,"share"),t()},target:e,styleAsSocialAction:l})})})}))};re.defaultProps={styleAsSocialAction:!1,headerComponent:null,onClick:void 0};var le=function e(t){var i=t.onClick,n=t.target,s=t.styleAsSocialAction;return a.createElement("div",{onClick:i,className:r()(s?"public-share-cta-ShareCta__social_action--2yJtr":"public-share-cta-ShareCta__cta--2Xq6G",Object(l.featureIsEnabled)("hr_dark_green_icons")?"public-share-cta-ShareCta__dark_icons--3I87q":"")},a.createElement("span",{ref:n},a.createElement(c.Icon,{name:"repost-fill",className:s?"public-share-cta-ShareCta__icon--1Bvb0":"public-share-cta-ShareCta__cta_icon--3qgo_"}),a.createElement("span",{className:s?r()("ui_link","public-share-cta-ShareCta__text--1tWKH","socialCTA"):"public-share-cta-ShareCta__cta_text--38gVh"},Object(o.localize)("link_share_share")," ")))};le.defaultProps={styleAsSocialAction:!1};var ce=i("@ta/overlays.modal"),oe=i("@ta/overlays.headers"),se=Object(m.connect)(function(e,t){return{url:t.url.startsWith("/")?e.meta.baseUrl+t.url:t.url,viewportCategory:e.meta.device.viewportCategory}})(function e(t){var i=t.url,n=t.viewportCategory,r=t.itemType,l=t.itemId,c=t.children,s="share-overlay-".concat(r,"-").concat(l);return a.createElement(a.Fragment,null,a.createElement(v,{itemType:r,itemId:l,url:i,action:"share_modal_open"},function(){return a.createElement(Z.Opener,{name:s},function(e,t){return c(e,t)})}),a.createElement(ce.Modal,{name:s,isFullBleed:!0,header:a.createElement(oe.TitleBar,{iconName:"repost-fill",displayType:"LEFT_ALIGN_GRAY"},Object(o.localize)("web_share_sheet_header"))},a.createElement("div",{className:"public-share-cta-ShareButton__modalSubHeader--EiZEX"},Object(o.localize)("web_share_sheet_description_generic")),a.createElement("ul",{className:"public-share-cta-ShareButton__shareOptionsList--2-smQ"},"MOBILE"===n&&a.createElement(v,{action:"share_select",itemType:r,itemId:l,url:i,type:"sms"},function(e){return a.createElement(N,{url:e,itemType:r,size:"large"})}),a.createElement(v,{action:"share_select",itemType:r,itemId:l,url:i,type:"email"},function(e){return a.createElement(R,{url:e,itemType:r,itemId:Number(l),size:"large"})}),a.createElement(v,{action:"share_select",itemType:r,itemId:l,url:i,type:"clipboard"},function(e){return a.createElement(ie,{url:e,size:"large"})}))))});i.d(t,"ShareCta",function(){return re}),i.d(t,"ShareTarget",function(){return le}),i.d(t,"ShareTracker",function(){return v}),i.d(t,"SharePopover",function(){return ne}),i.d(t,"ShareDropdownMenu",function(){return ae}),i.d(t,"ShareButton",function(){return se})}}});
//# sourceMappingURL=public.share-cta.a16c25190e.js.map