(window.$WP=window.$WP||[]).push({id:"@ta/common.poller",d:["vendor-babel","ta-platform","vendor-react-libs"],e:["./packages/common/poller/entrypoint.jsx"],x:{"./packages/common/poller/entrypoint.jsx":["default","TimerContainer","setTimer"]},m:{"./packages/common/poller/entrypoint.jsx":function(e,t,n){"use strict";n.r(t);var i=n("@babel/runtime/helpers/esm/classCallCheck"),r=n.n(i),o=n("@babel/runtime/helpers/esm/createClass"),l=n.n(o),a=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),u=n.n(a),m=n("@babel/runtime/helpers/esm/getPrototypeOf"),s=n.n(m),c=n("@babel/runtime/helpers/esm/inherits"),p=n.n(c),f=n("@babel/runtime/helpers/esm/assertThisInitialized"),h=n.n(f),d=n("@babel/runtime/helpers/esm/defineProperty"),b=n.n(d),T=n("react"),g=n("@ta/common.logging"),v=n.n(g),y=function e(){return(new Date).getTime()%1e5},k=function(){function e(){r()(this,e),b()(this,"timer",null)}return l()(e,[{key:"hasTimer",value:function e(){return!!this.timer}},{key:"clearTimer",value:function e(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"setTimer",value:function e(t){this.timer=t}}]),e}(),C=function e(t,n){if(t.complete)return v.a.info("Data is complete, not polling"),void n.clearTimer();if(!n.hasTimer()&&!t.loading){var i=t.pollingDelay[t.requestNumber-1];if(!i)return v.a.info("Data not complete, but giving up on polling"),void(t.timedOut&&t.timedOut());v.a.info("creating timer for req#:".concat(t.requestNumber," at ").concat(y()));var r=setTimeout(function(){v.a.info("Sending poll #".concat(t.requestNumber," at ").concat(y())),n.setTimer(null),t.poll()},i);n.setTimer(r)}},w=function(e){function t(){var e,n;r()(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return n=u()(this,(e=s()(t)).call.apply(e,[this].concat(o))),b()(h()(h()(n)),"timerContainer",new k),n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function e(){this.setupTimer()}},{key:"componentDidUpdate",value:function e(){this.setupTimer()}},{key:"componentWillUnmount",value:function e(){this.timerContainer.clearTimer()}},{key:"setupTimer",value:function e(){C(this.props,this.timerContainer)}},{key:"render",value:function e(){return null}}]),t}(T.Component);b()(w,"defaultProps",{pollingDelay:[1e3,1e3,1e3,1e3,1500,1500,1500,2e3,2e3,2e3,5e3,1e4,1e4,1e4]}),n.d(t,"TimerContainer",function(){return k}),n.d(t,"setTimer",function(){return C}),t.default=w}}});
//# sourceMappingURL=common.poller.02efeb1ad5.js.map