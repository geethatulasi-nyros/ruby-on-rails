(window.$WP=window.$WP||[]).push({id:"@ta/common.text",d:["vendor-babel","vendor-react-libs","ta-platform","@ta/events.window-resize"],e:["./packages/common/text/text.jsx"],x:{"./packages/common/text/text.jsx":["ReadMore","ReadMoreFadeOut","Abbreviate","AbbreviateWithMore","AutoResizer","EscapeHtml","unescapeHtml","DirectionalText"]},m:{"./packages/common/text/text.jsx":function(e,t,n){"use strict";n.r(t);var a=n("@babel/runtime/helpers/esm/classCallCheck"),o=n.n(a),r=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),i=n.n(r),l=n("@babel/runtime/helpers/esm/getPrototypeOf"),s=n.n(l),c=n("@babel/runtime/helpers/esm/inherits"),p=n.n(c),u=n("@babel/runtime/helpers/esm/assertThisInitialized"),d=n.n(u),m=n("@babel/runtime/helpers/esm/defineProperty"),h=n.n(m),f=n("@babel/runtime/helpers/esm/objectSpread"),v=n.n(f),C=n("@babel/runtime/helpers/esm/createClass"),g=n.n(C),S=n("react"),x=n("@ta/common.i18n"),b=n("@ta/common.logging"),T=n.n(b),R={readMore:"common-text-ReadMore__readMore--3Iu8c",content:"common-text-ReadMore__content--2X4LR",collapsed:"common-text-ReadMore__collapsed--3N9Wp",ellipsis:"common-text-ReadMore__ellipsis--1Bibk",variantDefault:"common-text-ReadMore__variantDefault--p_yFt",ctaWrapper:"common-text-ReadMore__ctaWrapper--33Kvp",ctaWrapperNewline:"common-text-ReadMore__ctaWrapperNewline--1iDIz",cta:"common-text-ReadMore__cta--2T_tm",ctaCollapseWrapper:"common-text-ReadMore__ctaCollapseWrapper--36eeT",variantFadeOut:"common-text-ReadMore__variantFadeOut--1tInd"},H=function(e){function t(e){var n;return o()(this,t),n=i()(this,s()(t).call(this,e)),h()(d()(d()(n)),"componentDidUpdate",function(e){void 0!==n.props.collapsed&&n.props.collapsed!==e.collapsed&&!!n.props.collapsed!==n.state.collapsed?n.props.collapsed?n.computeState():n.revealHiddenContent():(n.state.collapsed&&n.props.numLinesToShow!==e.numLinesToShow||n.props.alwaysShowReadMore!==e.alwaysShowReadMore)&&n.computeState()}),h()(d()(d()(n)),"setStateCallback",function(){n.props.onStateChange&&n.props.onStateChange(n.state)}),h()(d()(d()(n)),"getContentDiv",function(){return n.contentRef.current}),h()(d()(d()(n)),"computeState",function(){var e=n.findFirstTextNodeParent(n.getContentDiv());if(e){var t=window.getComputedStyle(e),a=t.getPropertyValue("line-height"),o=t.getPropertyValue("font-size");a&&"normal"!==a?a=a.replace("px",""):(o=o?o.replace("px",""):14,a=Math.floor(1.2*parseFloat(o)));var r={scrollHeight:n.getScrollHeight(),fontSize:o,lineHeight:a},i=n.computeStateFromStyles(r);n.hasCollapsibleContent=r.scrollHeight>a*n.props.numLinesToShow,n.setState(v()({},i),n.setStateCallback)}else n.revealHiddenContent()}),h()(d()(d()(n)),"findFirstTextNodeParent",function(e){if(!e||!e.childNodes)return null;for(var t=0;t<e.childNodes.length;t++){var a=e.childNodes.item(t);if(a.nodeType===Node.TEXT_NODE)return e;var o=n.findFirstTextNodeParent(a);if(o)return o}return null}),h()(d()(d()(n)),"revealHiddenContent",function(){n.setState(v()({},n.contentRevealedState),n.setStateCallback)}),h()(d()(d()(n)),"collapseContent",function(){n.computeState()}),h()(d()(d()(n)),"handleClick",function(e){if(n.props.clickCallback(e))switch(e){case t.CTA:n.revealHiddenContent();break;case t.CTA_COLLAPSE:n.collapseContent();break;case t.CONTENT:n.state.collapsed&&n.revealHiddenContent()}}),h()(d()(d()(n)),"contentRevealedState",{collapsed:!1,divHeight:"none"}),h()(d()(d()(n)),"contentRef",null),h()(d()(d()(n)),"ctaStyles",void 0),h()(d()(d()(n)),"variantCssClass",""),h()(d()(d()(n)),"hasCollapsibleContent",!1),h()(d()(d()(n)),"computeStateFromStyles",function(e){return T.a.error("".concat(n.constructor.name," did not provide its own implementation of computeStateFromStyles()")),T.a.debug("computedStyles = {scrollHeight: ".concat(e.scrollHeight,", fontSize: ").concat(e.fontSize,", lineHeight: ").concat(e.lineHeight)),n.state}),h()(d()(d()(n)),"defaultCTA",function(){return S.createElement("div",{className:R.cta},S.createElement("span",{className:R.ellipsis}),S.createElement("span",null,S.createElement("a",{className:"readMoreCtaText"},n.props.ctaText?n.props.ctaText:Object(x.localize)("common_Read_more"))))}),h()(d()(d()(n)),"defaultCollapseCTA",function(){return S.createElement("div",null,S.createElement("a",{className:"readMoreCtaText"},n.props.ctaCollapseText?n.props.ctaCollapseText:Object(x.localize)("common_Readless")))}),n.state=!1!==e.collapsed?{collapsed:!0,divHeight:e.initialDivHeight}:{collapsed:!1,divHeight:"none"},n.contentRef=S.createRef(),n.ctaStyles={},n}return p()(t,e),g()(t,[{key:"componentDidMount",value:function e(){this.state.collapsed&&this.computeState()}},{key:"getScrollHeight",value:function e(){return this.getContentDiv().scrollHeight}},{key:"render",value:function e(){var n=this;return S.createElement("div",{className:"".concat(R.readMore," ").concat(this.variantCssClass," ").concat(this.props.customCssClass," ").concat(this.state.collapsed?R.collapsed:"")},S.createElement("div",{ref:this.contentRef,className:R.content,style:{maxHeight:this.state.divHeight},onClick:function e(){return n.handleClick(t.CONTENT)}},this.props.children),S.createElement("div",{className:this.props.ctaNewline?R.ctaWrapperNewline:R.ctaWrapper,style:this.ctaStyles},S.createElement("div",{onClick:function e(){return n.handleClick(t.CTA)}},this.props.cta?this.props.cta:this.defaultCTA())),this.props.collapsible&&!this.state.collapsed&&(this.props.alwaysShowReadMore||this.hasCollapsibleContent)&&S.createElement("div",{className:R.ctaCollapseWrapper,style:this.ctaStyles},S.createElement("div",{onClick:function e(){return n.handleClick(t.CTA_COLLAPSE)}},this.props.ctaCollapse?this.props.ctaCollapse:this.defaultCollapseCTA())))}}]),t}(S.Component);h()(H,"defaultProps",{cta:null,ctaText:null,numLinesToShow:4,initialDivHeight:16,customCssClass:"",clickCallback:function e(t){return!0},collapsible:!1,ctaNewline:!1,alwaysShowReadMore:!1,collapsed:void 0}),h()(H,"CONTENT","CONTENT"),h()(H,"CTA","CTA"),h()(H,"CTA_COLLAPSE","CTA_COLLAPSE");var z=H,k=function(e){function t(e){var n;return o()(this,t),n=i()(this,s()(t).call(this,e)),h()(d()(d()(n)),"computeStateFromStyles",function(e){var t=e.lineHeight*n.props.numLinesToShow;return n.ctaStyles={fontSize:"".concat(e.fontSize,"px"),lineHeight:"".concat(e.lineHeight,"px")},e.scrollHeight<=t?n.props.alwaysShowReadMore?{collapsed:!0,divHeight:"initial"}:n.contentRevealedState:n.state.divHeight!==t?{collapsed:!0,divHeight:t}:n.state}),n.variantCssClass=R.variantDefault,n}return p()(t,e),t}(z),y=function(e){function t(e){var n;return o()(this,t),n=i()(this,s()(t).call(this,e)),h()(d()(d()(n)),"computeStateFromStyles",function(e){if(e.scrollHeight<=e.lineHeight*n.props.numLinesToShow)return n.contentRevealedState;var t=e.lineHeight*(n.props.numLinesToShow+1);return n.state.divHeight!==t?(n.ctaStyles={fontSize:"".concat(e.fontSize,"px"),lineHeight:"".concat(e.lineHeight,"px"),paddingTop:"".concat(e.lineHeight,"px"),backgroundImage:"linear-gradient(rgba(255, 255, 255, 0) 0px, white ".concat(e.lineHeight,"px)")},{collapsed:!0,divHeight:t}):n.state}),n.variantCssClass=R.variantFadeOut,n}return p()(t,e),t}(z),w=function e(t){var n=t.text,a=t.max;if(n.length<a)return n;var o=a-3,r=n.lastIndexOf(" ",o);return"".concat(r<0?n.substring(0,o):n.substring(0,r),"...")},F=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return n=i()(this,(e=s()(t)).call.apply(e,[this].concat(r))),h()(d()(d()(n)),"state",{expanded:!1}),h()(d()(d()(n)),"toggle",function(){return n.setState({expanded:!n.state.expanded})}),n}return p()(t,e),g()(t,[{key:"render",value:function e(){var t=this.props,n=t.text,a=t.max;return this.state.expanded||n.length<a?n:S.createElement(S.Fragment,null,S.createElement(w,{text:n,max:a}),S.createElement("a",{className:"common-text-AbbreviateWithMore__more--20EH9",onClick:this.toggle},Object(x.localize)("more_link")))}}]),t}(S.Component),N=n("@ta/events.window-resize"),_=n.n(N),E=function(e){function t(e){var n;return o()(this,t),n=i()(this,s()(t).call(this,e)),h()(d()(d()(n)),"resizeCallback",function(){n.setState({resizedFontSize:n.props.defaultFontSizePx,numIters:0},n.makeFit)}),h()(d()(d()(n)),"containerRef",{}),n.state={resizedFontSize:e.defaultFontSizePx,numIters:0},n}return p()(t,e),g()(t,[{key:"componentDidMount",value:function e(){this.makeFit()}},{key:"makeFit",value:function e(){if(this.containerRef&&!(this.state.numIters>=4)){var t=this.containerRef,n=t.scrollWidth,a=void 0===n?0:n,o=t.clientWidth,r=void 0===o?0:o,i=t.style,l=i.paddingLeft,s=i.paddingRight,c=i.fontSize,p=parseFloat(c);if(!(r>=a||r<=0||p<=this.props.minFontSizePx)){var u=(parseFloat(l)||0)+(parseFloat(s)||0),d=(r-u)/(a-u);3===this.state.numIters&&(d=.9);var m=Math.max(p*d,this.props.minFontSizePx);this.setState({resizedFontSize:m,numIters:this.state.numIters+1},this.makeFit)}}}},{key:"render",value:function e(){var t=this;return S.createElement("div",{style:{fontSize:this.state.resizedFontSize},ref:function e(n){t.containerRef=n},className:this.props.className},this.props.children,this.props.resizeOnScreenResize?S.createElement(_.a,{callback:this.resizeCallback,useDebounce:!0}):null)}}]),t}(S.Component);h()(E,"defaultProps",{minFontSizePx:8,defaultFontSizePx:14,resizeOnScreenResize:!1});var M=function e(t){return t?t.replace(/[<>&"'`]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;","`":"&#x60;"}[e]}):""},A=function e(t){return t?t.replace(/&lt;|&gt;|&amp;|&quot;|&#39;|&#x60;/g,function(e){return{"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&#39;":"'","&#x60;":"`"}[e]}):""},O=n("react-redux"),P=Object(O.connect)(function(e){return{isRtl:e.i18n.isRtl}})(function e(t){var n=t.children,a=t.contentLanguage,o=t.isRtl,r=function e(t){return t&&t.match(/^(ar|iw)/i)?"rtl":"ltr"}(a);return"rtl"===r===o?S.createElement(S.Fragment,null,n):S.createElement("span",{dir:r},n)});n.d(t,"ReadMore",function(){return k}),n.d(t,"ReadMoreFadeOut",function(){return y}),n.d(t,"Abbreviate",function(){return w}),n.d(t,"AbbreviateWithMore",function(){return F}),n.d(t,"AutoResizer",function(){return E}),n.d(t,"EscapeHtml",function(){return M}),n.d(t,"unescapeHtml",function(){return A}),n.d(t,"DirectionalText",function(){return P})}}});
//# sourceMappingURL=common.text.a924b8d097.js.map