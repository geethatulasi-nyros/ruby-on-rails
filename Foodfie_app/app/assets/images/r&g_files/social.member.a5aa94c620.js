(window.$WP=window.$WP||[]).push({id:"@ta/social.member",d:["vendor-react-libs","@ta/social.member-common","ta-common","ta-platform","@ta/overlays.managers","@ta/overlays.modal","@ta/overlays.headers","@ta/common.infinite-loader","@ta/tracking.interactions","@ta/social.follow-feed","vendor-apollo-libs","vendor-babel","@ta/social.links"],e:["./packages/social/member/index.jsx"],x:{"./packages/social/member/index.jsx":["MemberBlock","MemberStats","MemberHeaderStats","getDisplayName","MemberBio","MemberCreated","MemberLink","MemberAvatarWithEdit","DestinationExpertInfo"]},m:{"./packages/social/member/index.jsx":function(e,t,a){"use strict";a.r(t);var n=a("react"),r=a("@ta/social.member-common"),l=a("@ta/common.i18n"),i=a("@ta/overlays.modal"),o=a("@ta/overlays.headers"),m=a("@ta/common.infinite-loader"),s=a.n(m),c=a("@ta/tracking.interactions"),u=a("@ta/social.follow-feed"),b=a("react-apollo"),d=a("@ta/common.routing"),_=a("@ta/styleguide.icon"),f=a("@ta/styleguide.loading"),p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SumAllLikesQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"username"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"memberProfiles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"username"},value:{kind:"Variable",name:{kind:"Name",value:"username"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"userId"},name:{kind:"Name",value:"id"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"static"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionCounts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sumAllLikes"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:407}};p.loc.source={body:"300941d31176"};var v=p,E="social-member-MemberContributionsList__item--xWx8b",g="social-member-MemberContributionsList__link--tRQU5",N="social-member-MemberContributionsList__icon--28vFi",k=function e(t){var a=t.profile;return n.createElement(n.Fragment,null,function e(){return n.createElement(b.Query,{query:v,variables:{username:a.username}},function(e){var t,r,i,o=e.loading,m=e.data;if(o)return n.createElement(f.LoadingSpinner,null);var s=null==m?void 0:null===(t=m.memberProfiles)||void 0===t?void 0:null===(r=t[0])||void 0===r?void 0:null===(i=r.contributionCounts)||void 0===i?void 0:i.sumAllLikes;return n.createElement("ul",{className:"social-member-MemberContributionsList__list--3FPXh"},a.contributionCounts.trip>0&&n.createElement("li",{className:E},n.createElement(c.InteractionLogger,null,function(e){return n.createElement(d.Link,{to:{page:"Profile",username:a.username,tab:"trips"},className:g,onClick:function t(a){return e(a,"contributionTypeClick",{contributionTypeName:"TRIPS"})}},n.createElement(_.Icon,{name:"suitcase-fill",className:N})," ",Object(l.localize)("n_Trips_plural",{0:l.globalize.formatNumber("integer",a.contributionCounts.trip)}))})),a.contributionCounts.video>0&&n.createElement("li",{className:E},n.createElement(c.InteractionLogger,null,function(e){return n.createElement(d.Link,{to:{page:"Profile",username:a.username,tab:"videos"},className:g,onClick:function t(a){return e(a,"contributionTypeClick",{contributionTypeName:"VIDEOS"})}},n.createElement(_.Icon,{name:"video-fill",className:N})," ",Object(l.localize)("n_videos_plural",{0:l.globalize.formatNumber("integer",a.contributionCounts.video)}))})),a.contributionCounts.photo>0&&n.createElement("li",{className:E},n.createElement(c.InteractionLogger,null,function(e){return n.createElement(d.Link,{to:{page:"Profile",username:a.username,tab:"photos"},className:g,onClick:function t(a){return e(a,"contributionTypeClick",{contributionTypeName:"PHOTOS"})}},n.createElement(_.Icon,{name:"camera-fill",className:N})," ",Object(l.localize)("n_photos_plural",{0:l.globalize.formatNumber("integer",a.contributionCounts.photo)}))})),a.contributionCounts.sumReview>0&&n.createElement("li",{className:E},n.createElement(c.InteractionLogger,null,function(e){return n.createElement(d.Link,{to:{page:"Profile",username:a.username,tab:"reviews"},className:g,onClick:function t(a){return e(a,"contributionTypeClick",{contributionTypeName:"REVIEWS"})}},n.createElement(_.Icon,{name:"pencil-paper",className:N})," ",Object(l.localize)("n_reviews_plural",{0:l.globalize.formatNumber("integer",a.contributionCounts.sumReview)}))})),a.contributionCounts.linkPost>0&&n.createElement("li",{className:E},n.createElement(c.InteractionLogger,null,function(e){return n.createElement(d.Link,{to:{page:"Profile",username:a.username,tab:"linkPost"},className:g,onClick:function t(a){return e(a,"contributionTypeClick",{contributionTypeName:"LINKS"})}},n.createElement(_.Icon,{name:"link",className:N})," ",Object(l.localize)("n_links_plural",{0:l.globalize.formatNumber("integer",a.contributionCounts.linkPost)}))})),a.contributionCounts.forumPost>0&&n.createElement("li",{className:E},n.createElement(c.InteractionLogger,null,function(e){return n.createElement(d.Link,{to:{page:"Profile",username:a.username,tab:"forum"},className:g,onClick:function t(a){return e(a,"contributionTypeClick",{contributionTypeName:"FORUMS"})}},n.createElement(_.Icon,{name:"forums",className:N})," ",Object(l.localize)("n_forum_posts_plural",{0:l.globalize.formatNumber("integer",a.contributionCounts.forumPost)}))})),a.contributionCounts.repost>0&&n.createElement("li",{className:E},n.createElement(_.Icon,{name:"repost",className:N})," ",Object(l.localize)("n_reposts_plural",{0:l.globalize.formatNumber("integer",a.contributionCounts.repost)})),s&&s>0&&n.createElement("li",{className:E},n.createElement(_.Icon,{name:"thumbs-up-fill",className:"".concat(N," ").concat("social-member-MemberContributionsList__inactive--3qoVJ")})," ",Object(l.localize)("n_helpful_votes_and_likes_plural",{0:l.globalize.formatNumber("integer",s)})))})}())},h=function e(t){var a=t.profile,r=a.contributionCounts&&null!==a.contributionCounts.sumAllUgc?l.globalize.formatNumber("integer",a.contributionCounts.sumAllUgc):null,m=r?Object(l.localize)("n_contributions_plural",{0:r}):"";return n.createElement(i.DeprecatedRoutedModal,{name:"contributions",isFullBleed:!0,header:n.createElement(o.TitleBar,{displayType:"LEFT_ALIGN_GRAY"},m)},n.createElement("div",{className:"social-member-MemberContributionsListModal__contributions--17TkV"},n.createElement(k,{profile:a})))},C=function e(t){var a=t.profile,r=t.isNarrow,m=null!==a.followerCount?l.globalize.formatNumber("integer",a.followerCount):null,b=null!==a.followeeCount?l.globalize.formatNumber("integer",a.followeeCount):null,d=m?Object(l.localize)("social_nCount_followers2",{0:m}):"",_=b?Object(l.localize)("social_nCount_following2",{0:b}):"",f=function e(t){return n.createElement(i.DeprecatedRoutedModal,{name:t?"followers":"following",isFullBleed:!0,bodyScroll:!1,header:n.createElement(o.TitleBar,{displayType:"LEFT_ALIGN_GRAY"},t?d:_)},n.createElement(u.FollowerFolloweeFeedDataProvider,{userId:a.userId,isFollowersList:t},function(e,r,l,i,o,m){return n.createElement(s.a,{loadMore:e,threshold:550,throttle:50,hasMore:l,infiniteLoadOnMount:!0},function(e,l){return n.createElement("div",{className:"social-member-MemberStats__follower_followee_list--bzm3I",ref:e},n.createElement(c.FollowPlacementContext.Provider,{value:{placement:t?"FOLLOWERS_MODAL":"FOLLOWING_MODAL"}},n.createElement(u.FollowerFolloweeFeed,{followerFollowees:r,userId:a.userId,contentRef:l,error:o,loading:i,refetch:m})))})}))},p=a.contributionCounts&&null!==a.contributionCounts.sumAllUgc?n.createElement("div",{className:"social-member-MemberStats__stat_item--1GM9b"},n.createElement("span",{className:"social-member-MemberStats__stat_item_title--1L5-g"},Object(l.localize)("social_memberstats_contributions")," "),n.createElement("span",{className:"social-member-MemberStats__stat_item_count--14i7c"},a.contributionCounts.sumAllUgc>0?n.createElement(c.InteractionLogger,null,function(e){return n.createElement(i.DeprecatedModalLink,{name:"contributions",username:a.username,href:null,className:"social-member-MemberStats__link--HqVwd",onClick:function t(a){return e(a,"contributionsClick")}},l.globalize.formatNumber("integer",a.contributionCounts.sumAllUgc))}):n.createElement(n.Fragment,null,l.globalize.formatNumber("integer",a.contributionCounts.sumAllUgc)))):null,v=null!==m?n.createElement("div",{className:"social-member-MemberStats__stat_item--1GM9b"},n.createElement("span",{className:"social-member-MemberStats__stat_item_title--1L5-g"},Object(l.localize)("social_memberstats_followers")," "),n.createElement("span",{className:"social-member-MemberStats__stat_item_count--14i7c"},0===a.followerCount?m:n.createElement(c.InteractionLogger,null,function(e){return n.createElement(i.DeprecatedModalLink,{name:"followers",username:a.username,href:null,className:"social-member-MemberStats__link--HqVwd",onClick:function t(a){return e(a,"followersClick")}},m)}))):null,E=r||null===b?null:n.createElement("div",{className:"social-member-MemberStats__stat_item--1GM9b"},n.createElement("span",{className:"social-member-MemberStats__stat_item_title--1L5-g"},Object(l.localize)("social_Following")," "),n.createElement("span",{className:"social-member-MemberStats__stat_item_count--14i7c"},0===a.followeeCount?b:n.createElement(c.InteractionLogger,null,function(e){return n.createElement(i.DeprecatedModalLink,{name:"following",username:a.username,href:null,className:"social-member-MemberStats__link--HqVwd",onClick:function t(a){return e(a,"followingClick")}},b)})));return n.createElement("div",{className:"".concat("social-member-MemberStats__member_stats--1W9tJ"," ").concat(r?"social-member-MemberStats__narrow--19fb9":"")},n.createElement("div",{className:"social-member-MemberStats__together--9Bl5-"},p,v,E),function e(){return n.createElement(h,{profile:a})}(),f(!0),f(!1))};C.defaultProps={isNarrow:!1};var M=C,w=a("@ta/styleguide.avatar"),L=a("@ta/overlays.managers"),I=function e(t){var a=t.profile,r=t.editMode;return a.isMe&&!a.avatar?n.createElement(L.Opener,{name:"upload-avatar-modal"},function(e){return n.createElement("div",{className:"social-member-MemberAvatarWithEdit__avatar_with_edit--2Ib3J"},n.createElement("div",{className:"ui_social_avatar large xtra-large-tablet ".concat("social-member-MemberAvatarWithEdit__no_avatar--3KBEy"),onClick:e},n.createElement(_.Icon,{name:"photo",className:"social-member-MemberAvatarWithEdit__avatar_with_edit_photo--3pOuZ"}),n.createElement("span",{className:"social-member-MemberAvatarWithEdit__avatar_with_edit_text--3qHtl"},Object(l.localize)("social_Add_profile_photo")," ")))}):n.createElement(n.Fragment,null,r?n.createElement(L.Opener,{name:"upload-avatar-modal"},function(e){return n.createElement("div",{className:"social-member-MemberAvatarWithEdit__avatar_with_edit--2Ib3J"},n.createElement("div",{className:"social-member-MemberAvatarWithEdit__editAvatarContainer--2oQLA",onClick:e},n.createElement(w.Avatar,{photo:a.avatar,size:"large",tabletSize:"xtra-large",withBorder:!0,notLazy:!0}),n.createElement("div",{className:"social-member-MemberAvatarWithEdit__change_photo_container--xUCKg"},n.createElement("div",{className:"social-member-MemberAvatarWithEdit__container_wrap--3jqDi"},n.createElement(_.Icon,{name:"photo",className:"social-member-MemberAvatarWithEdit__avatar_with_edit_photo--3pOuZ"}),n.createElement("span",{className:"social-member-MemberAvatarWithEdit__avatar_with_edit_text--3qHtl"},Object(l.localize)("social_change_profile_photo")," ")))))}):n.createElement(w.Avatar,{photo:a.avatar,size:"large",tabletSize:"xtra-large",withBorder:!0,notLazy:!0}))};I.defaultProps={editMode:!1};var S=I,y=function e(t){var a=t.profile;return n.createElement("div",{className:"social-member-MemberBlock__member_block--2ytzM"},n.createElement(S,{profile:a}),n.createElement(r.MemberName,{profile:a,displayNameClassName:"social-member-MemberBlock__display_name--vXtl2",addProfileLink:!1,responsive:!0,useH1:!0}),n.createElement(M,{profile:a,responsive:!0}))},z=function e(t){var a=t.profile,i=a&&a.hometown,o=a&&a.contributionCounts;return n.createElement("div",{className:"social-member-MemberHeaderStats__event_info--30wFs"},Object(r.canRenderHometown)(a.hometown)&&n.createElement("span",{className:"social-member-MemberHeaderStats__hometown_stat_item--231iN"},n.createElement(r.MemberHometown,{hometown:i,size:"small",singleLine:!0})),o?n.createElement(n.Fragment,null,o.sumAllUgc&&o.sumAllUgc>0?n.createElement("span",{className:"social-member-MemberHeaderStats__stat_item--34E1r"},Object(l.unescaped)(Object(l.localize)("social_n_contributions_plural",{0:"social-member-MemberHeaderStats__bold--3z3qh",1:l.globalize.formatNumber("integer",o.sumAllUgc)}))):null,o.sumAllLikes&&o.sumAllLikes>0?n.createElement("span",{className:"social-member-MemberHeaderStats__stat_item--34E1r"},Object(l.unescaped)(Object(l.localize)("hotels_n_helpful_votes_plural",{0:"social-member-MemberHeaderStats__bold--3z3qh",1:l.globalize.formatNumber("integer",o.sumAllLikes)}))):null):null)},O=function(e){return e&&e.displayName?e.displayName:Object(l.localize)("native_login_user_review_anonymous")},A=a("@babel/runtime/helpers/esm/defineProperty"),F=a.n(A),T=a("@ta/common.classnames"),j=a.n(T),x=function e(t){var a=t.bio,r=t.truncateLength,l=t.className,i=t.smallText;return a?n.createElement("div",{className:j()("social-member-MemberBio__member_info--1J8Qa",l,F()({},"social-member-MemberBio__small_text--2wbSn",i))},a.length>r?"".concat(a.substring(0,r).trim(),"..."):a):null};x.defaultProps={truncateLength:1/0,className:"",smallText:!1};var P=x,D=function e(t){var a=t.created;return a?n.createElement("span",{className:"social-member-MemberCreated__memberCreated--2vv8F"},n.createElement(_.Icon,{name:"calendar",className:"social-member-MemberCreated__icon--3__9Q"}),Object(l.localize)("profile_joined_in",{0:l.globalize.formatDate("date_medium_month_year",new Date(a))})):null},W=a("@ta/social.links"),B=function e(t){var a=t.website;return a?n.createElement(c.InteractionLogger,null,function(e){return n.createElement("div",{className:"social-member-MemberInfo__member_info--S4DCO",onClick:function t(a){return e(a,"profileFieldClick",{action:"WEBSITE_CLICK"})}},n.createElement(W.WebsiteLink,{uri:a}))}):null},H=a("@babel/runtime/helpers/esm/classCallCheck"),R=a.n(H),U=a("@babel/runtime/helpers/esm/createClass"),V=a.n(U),q=a("@babel/runtime/helpers/esm/possibleConstructorReturn"),G=a.n(q),Q=a("@babel/runtime/helpers/esm/getPrototypeOf"),J=a.n(Q),K=a("@babel/runtime/helpers/esm/inherits"),X=a.n(K),Y=a("@babel/runtime/helpers/esm/assertThisInitialized"),Z=a.n(Y),$=a("@babel/runtime/helpers/esm/toConsumableArray"),ee=a.n($),te=function e(t){if(t&&(t.locationId||0===t.locationId)){var a=0===t.locationId?t.forumId:t.locationId;return a=0===t.locationId?"/ShowForum-g1-i".concat(t.forumId):"/ShowForum-g".concat(t.locationId),n.createElement(d.Link,{key:t.forumId,className:"ui_link",href:a},t.name)}return null},ae=function e(t){return t.reduce(function(e,t){return 0===e.length?[t]:[].concat(ee()(e),[", ",t])},[])},ne=function(e){function t(){var e,a;R()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=G()(this,(e=J()(t)).call.apply(e,[this].concat(r))),F()(Z()(Z()(a)),"state",{showingExpandedList:!1}),a}return X()(t,e),V()(t,[{key:"render",value:function e(){var t=this,a=this.props.expertForums;if(a&&null!=a.forums&&null!=a.forums[0]){var r=a.forums.filter(function(e){return null!==e}).map(te).filter(function(e){return null!=e});return n.createElement("div",{className:"social-member-DestinationExpertInfo__block--1nwgj"},n.createElement("div",{className:"social-member-DestinationExpertInfo__list_title--3Wy5V"},Object(l.localize)("social_destination_expert_for")),n.createElement(c.InteractionLogger,null,function(e){return n.createElement("div",{className:"social-member-DestinationExpertInfo__list_links--2bS1w",onClick:function t(a){return e(a,"profileFieldClick",{action:"DESTINATION_EXPERT_POI_CLICK"})}},t.state.showingExpandedList?ae(r):ae(r.slice(0,5)))}),!this.state.showingExpandedList&&r.length>5&&n.createElement("span",{onClick:function e(){t.setState({showingExpandedList:!0})},className:"social-member-DestinationExpertInfo__see_more--3mLVt"},Object(l.localize)("trips_see_more_CTA")))}return null}}]),t}(n.Component);a.d(t,"MemberBlock",function(){return y}),a.d(t,"MemberStats",function(){return M}),a.d(t,"MemberHeaderStats",function(){return z}),a.d(t,"getDisplayName",function(){return O}),a.d(t,"MemberBio",function(){return P}),a.d(t,"MemberCreated",function(){return D}),a.d(t,"MemberLink",function(){return B}),a.d(t,"MemberAvatarWithEdit",function(){return S}),a.d(t,"DestinationExpertInfo",function(){return ne})}}});
//# sourceMappingURL=social.member.a5aa94c620.js.map