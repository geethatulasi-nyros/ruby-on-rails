(window.$WP=window.$WP||[]).push({id:"@ta/trips.save-to-trip",d:["vendor-babel","vendor-react-libs","ta-platform","@ta/common.timer","@ta/overlays.popover","@ta/overlays.toast","@ta/trips.trip-flow-selector","@ta/trips.bookmark-icon"],e:["./packages/trips/save-to-trip/SaveToTripWidget.jsx"],x:{"./packages/trips/save-to-trip/SaveToTripWidget.jsx":["default"]},m:{"./packages/trips/save-to-trip/SaveToTripWidget.jsx":function(t,e,o){"use strict";o.r(e);var a=o("@babel/runtime/helpers/esm/objectSpread"),r=o.n(a),n=o("@babel/runtime/helpers/esm/slicedToArray"),i=o.n(n),s=o("@babel/runtime/helpers/esm/defineProperty"),l=o.n(s),c=o("react"),p=o("react-redux"),m=o("@ta/common.features"),u=o("@ta/common.classnames"),_=o.n(u),d=o("@ta/common.logging"),v=o.n(d),f=o("@ta/common.i18n"),k=o("@ta/common.radio"),b=o.n(k),g=o("@ta/common.timer"),h=o.n(g),E=o("@ta/common.tracking"),S=o.n(E),T=o("@ta/overlays.popover"),w=o.n(T),y=o("@ta/overlays.toast"),j=o("@ta/trips.trip-flow-selector"),I=o("@ta/trips.bookmark-icon"),C=function t(e,o,a,r){return"listing"===a||"hotspot_and_tooltip"===a||"hotspot_tooltip_toaster"===a?c.createElement(I.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"stacked",bookmarkSize:"30"}):"responsive_review"===a||"forum_post"===a||"hotspot_and_tooltip_detail"===a||"hotspot_tooltip_toaster_detail"===a?"DESKTOP"===r?c.createElement(I.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"outline",bookmarkSize:"20",decorated:!1},function(t){return c.createElement("span",{className:_()("trips-save-to-trip-SaveToTripWidget__normal--TlAX2",l()({},"trips-save-to-trip-SaveToTripWidget__heart--GWv1v",Object(m.featureIsEnabled)("saves_heart_with_wc_flow")))},t)}):c.createElement(I.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"outline",bookmarkSize:"24"}):"mobile_review"===a?c.createElement(I.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"outline",bookmarkSize:"24"}):"mobile_restaurant_review"===a?c.createElement(I.BookmarkIcon,{active:e,onClick:o,vertical:!0,bookmarkStyle:"outline",bookmarkSize:"22",decorated:!1},function(t){return c.createElement("span",{className:"trips-save-to-trip-SaveToTripWidget__small--1YVmk"},t)}):"mobile_attraction_product_detail"===a?c.createElement(I.BookmarkIcon,{active:e,onClick:o,bookmarkStyle:"stacked",bookmarkSize:"24"}):(v.a.warn("Widget style not found: ".concat(a)),null)},O=function t(e){var o=e.object,a=e.widgetStyle,r=e.tooltipCopy,n=e.toastCopy,s=e.viewportCategory,p=c.useState(!1),u=i()(p,2),d=u[0],v=u[1],k=c.useRef(null);if(c.useEffect(function(){var t=function t(){v(!0),"hotspot_tooltip_toaster"===a?S()({module:"saves_nux",action:"shown"}):"hotspot_tooltip_toaster_detail"===a&&S()({module:"saves_nux_detail",action:"shown"})};return b()("save-to-trip").on("hotspot-".concat(o.locationId),t),b()("save-to-trip").on("hotspot-page",t),b()("save-to-trip").emit("wc-widgets-loaded"),function(){b()("save-to-trip").off("hotspot-".concat(o.locationId),t),b()("save-to-trip").off("hotspot-page",t)}},[o.locationId,a]),c.useEffect(function(){if(k.current&&d){var t=k.current.getBoundingClientRect();(t.top<0||t.bottom>window.innerHeight)&&setTimeout(function(){k.current&&k.current.scrollIntoView({behavior:"smooth",block:"center"})},0)}},[d]),("hotspot_and_tooltip"===a||"hotspot_and_tooltip_detail"===a||"hotspot_tooltip_toaster"===a||"hotspot_tooltip_toaster_detail"===a)&&(d||Object(m.featureIsEnabled)("saves_nux_first_pageload_hotspot_only"))){var g=("hotspot_tooltip_toaster"===a||"hotspot_tooltip_toaster_detail"===a)&&"MOBILE"===s&&!Object(m.featureIsEnabled)("saves_nux_first_pageload_hotspot_only"),E=function t(){v(!1)};return g?c.createElement(c.Fragment,null,c.createElement(j.QueriedTripFlowSelector,{object:o},function(t,e){return c.createElement("span",{ref:function t(e){k.current=e},className:_()(l()({},"trips-save-to-trip-SaveToTripWidget__hotspot--3RvXe",d))},C(e,t,a,s))}),n&&c.createElement(y.Toaster,{onToastRemoved:E},function(t){return c.createElement(h.a,{trigger:function e(){t({node:c.createElement("span",null,Object(f.unescaped)(n)),cta:c.createElement("span",{onClick:E},Object(f.localize)("saves_toast_dismiss")),timeout:1e4})},interval:0})})):c.createElement(w.a,{leftOf:!0,contents:function t(e){return c.createElement("span",{className:"trips-save-to-trip-SaveToTripWidget__popover--Vd6Xg",onClick:e},r?Object(f.unescaped)(r):Object(f.localize)("save_hotels_nux_h_body"))},onClose:E,local:!0,closeButton:!1,overlayType:"popover"},function(t,e){return("MOBILE"!==s&&!Object(m.featureIsEnabled)("saves_nux_first_pageload_hotspot_only")||"hotspot_and_tooltip"===a||"hotspot_and_tooltip_detail"===a)&&e(),c.createElement(j.QueriedTripFlowSelector,{object:o},function(o,r){return c.createElement("span",{ref:function e(o){k.current=o,t(o)},onMouseOver:e,onFocus:e,className:_()(l()({},"trips-save-to-trip-SaveToTripWidget__hotspot--3RvXe",d))},C(r,o,a,s),c.createElement(h.a,{trigger:function t(){Object(m.featureIsEnabled)("saves_nux_first_pageload_hotspot_only")&&E()},interval:6e3}))})})}return c.createElement(j.QueriedTripFlowSelector,{object:o},function(t,e){return C(e,t,a,s)})};O.defaultProps={mobileWidgetStyle:void 0},e.default=Object(p.connect)(function(t,e){return r()({},e,{viewportCategory:t.meta.device.viewportCategory})})(O)}}});
//# sourceMappingURL=trips.save-to-trip.95fad0882a.js.map