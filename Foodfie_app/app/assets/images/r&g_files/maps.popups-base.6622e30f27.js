(window.$WP=window.$WP||[]).push({id:"@ta/maps.popups-base",d:["vendor-react-libs","@ta/maps.attractions-common","ta-platform","vendor-babel","@ta/common.photo-carousel","@ta/hotels.photos","@ta/maps.tail","ta-common","@ta/maps.click-source-tracking","@ta/trips.trip-flow-selector","@ta/trips.bookmark-icon","@ta/maps.location-types","@ta/maps.hoteloffer","@ta/maps.sponsored-pill","@ta/maps.photo-carousel","@ta/hotels.tracking"],e:["./packages/maps/popups-base/popups-base.jsx"],x:{"./packages/maps/popups-base/popups-base.jsx":["AttractionPopup","BaseLocationPopup","HotelPopup","RestaurantPopup"]},m:{"./packages/maps/popups-base/popups-base.jsx":function(e,t,a){"use strict";a.r(t);var n=a("react"),o=a("@ta/maps.attractions-common"),r=a("@ta/common.tracking"),i=a.n(r),l=a("@babel/runtime/helpers/esm/classCallCheck"),c=a.n(l),s=a("@babel/runtime/helpers/esm/createClass"),p=a.n(s),u=a("@babel/runtime/helpers/esm/possibleConstructorReturn"),m=a.n(u),d=a("@babel/runtime/helpers/esm/getPrototypeOf"),b=a.n(d),f=a("@babel/runtime/helpers/esm/inherits"),h=a.n(f),k=a("@babel/runtime/helpers/esm/assertThisInitialized"),C=a.n(k),_=a("@babel/runtime/helpers/esm/defineProperty"),g=a.n(_),E=a("@ta/common.photo-carousel"),P=a("@ta/hotels.photos"),v=a("@ta/common.routing"),I=a("@ta/common.features"),y=a("@ta/maps.tail"),T=a.n(y),x=a("@ta/styleguide.bubble-rating"),w=a("@ta/maps.click-source-tracking"),S=a("@ta/trips.trip-flow-selector"),N=a("@ta/trips.bookmark-icon"),L=a("@ta/styleguide.icon"),R=a("@ta/maps.location-types"),O=function e(t){var a=t.src,o=t.entityType;return a?n.createElement("div",{className:"maps-popups-base-CardThumbnail__photo--3TWGE",style:{backgroundImage:"url(".concat(a,")")}}):n.createElement(L.Icon,{name:Object(R.iconForEntityType)(o),className:"maps-popups-base-CardThumbnail__icon--3tux_"})};O.defaultProps={src:void 0};var U=O,j=function(e){function t(){var e,a;c()(this,t);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return a=m()(this,(e=b()(t)).call.apply(e,[this].concat(r))),g()(C()(C()(a)),"state",{carouselPhotoIndex:0}),g()(C()(C()(a)),"onCardClick",function(){i()({module:"pin",action:"pin_card_click",context:a.props.entityType})}),g()(C()(C()(a)),"onPhotoChange",function(e){i()({module:"pin",action:e>a.state.carouselPhotoIndex?"pin_photo_carousel_forward":"pin_photo_carousel_back",context:a.props.entityType}),a.state={carouselPhotoIndex:e}}),g()(C()(C()(a)),"renderThumbnailDefault",function(){return n.createElement(U,{src:a.props.thumbnail,entityType:a.props.entityType})}),g()(C()(C()(a)),"renderThumbnail",function(){var e=a.props.locationId;if(a.props.renderThumbnail){var t=a.props.renderThumbnail();if(t)return t}return Object(I.featureIsEnabled)("wc_maps_photo_carousel_DT")?n.createElement(P.CarouselPagingProvider,{locationId:e,fetchOnFirstLoad:3},function(e){var t=e.photos,o=e.photoCount,r=e.getNextPage;return 0===o?a.renderThumbnailDefault():n.createElement(E.PhotoCarousel,{height:"100%",width:"100%",photos:t,totalCount:o,showIndicatorDots:!0,wrapPhotos:!0,noCta:!0,hideArrows:!0,arrowSize:"small",onPhotoChange:a.onPhotoChange,onLoadLast:r})}):a.renderThumbnailDefault()}),a}return h()(t,e),p()(t,[{key:"render",value:function e(){var t=this.props,a=t.title,o=t.subtitle,i=t.detailUrl,l=t.rating,c=t.numReviews,s=t.children,p=t.entityType,u=t.locationId,m=t.hideBookmark,d=t.onDetailUrlClick,b=function e(t,a){d&&d(a),t.stopPropagation()};return n.createElement("div",{className:"maps-popups-base-BaseLocationPopup__outerContainer--3aa01",onClick:this.onCardClick,"data-map-base-location-popup":"true"},n.createElement("div",{className:"maps-popups-base-BaseLocationPopup__bodyContainer--2MCRe"},n.createElement(v.Link,{href:i,onClick:function e(t){return b(t,w.CLICK_SOURCES.PHOTO)},target:"_blank"},n.createElement(r.ClickTracker,{module:"pin",action:"pin_photo_click",context:p},n.createElement("div",{className:"maps-popups-base-BaseLocationPopup__thumbnail--2wyW8"},this.renderThumbnail()))),!m&&Object(I.featureIsEnabled)("social_2018")&&n.createElement("span",{className:"maps-popups-base-BaseLocationPopup__saveToTripButton--1DIIR"},n.createElement(S.QueriedTripFlowSelector,{object:{__typename:"LocationInformation",locationId:u},trackingContext:"Map"},function(e,t){return n.createElement(N.BookmarkIcon,{active:t,bookmarkStyle:"stacked",bookmarkSize:"24",onClick:e})})),n.createElement("div",{className:"maps-popups-base-BaseLocationPopup__contentContainer--3HY8C"},n.createElement("div",{className:"maps-popups-base-BaseLocationPopup__titleContainer--1tmvS"},this.props.titlePill,n.createElement(v.Link,{href:i,onClick:function e(t){return b(t,w.CLICK_SOURCES.NAME)},target:"_blank"},n.createElement(r.ClickTracker,{useSpan:!0,module:"pin",action:"pin_name_click",context:p},n.createElement("span",{className:"maps-popups-base-BaseLocationPopup__title--3aawq","data-base-location-popup-title":"true",dir:"auto"},a)))),n.createElement(v.Link,{href:"".concat(i,"#REVIEWS"),onClick:function e(t){return b(t,w.CLICK_SOURCES.REVIEWS)},target:"_blank"},n.createElement(x.BubbleRatingWithReviewCount,{fontSize:14,rating:l/10,numReviews:c})),o&&("string"==typeof o?n.createElement("div",{className:"maps-popups-base-BaseLocationPopup__subtitle--1rorp"},o):o),n.createElement("div",{style:{height:"16px"}}),s&&s())),n.createElement(T.a,{backgroundColor:"white",borderColor:"rgba(0, 0, 0, 0.2)"}))}}]),t}(n.PureComponent);g()(j,"defaultProps",{subtitle:null,children:null,numReviews:0,bubbleRating:0,thumbnail:null,trackingContext:null,hideBookmark:!1,onDetailUrlClick:null,titlePill:null});var A=j,B=function e(t,a,r,i){return n.createElement(o.AttractionSubtitle,{category:t,openHours:a,openNow:r,detailUrl:i})},D=function e(t){return n.createElement(A,{locationId:t.locationId,entityType:"attraction",title:t.title,detailUrl:t.detailUrl,thumbnail:t.thumbnail,rating:t.rating,numReviews:t.numReviews,subtitle:B(t.category,t.openHours,t.openNow,t.detailUrl)},function(){return n.createElement("div",{className:"maps-popups-base-AttractionPopup__footerContainer--12_-p"},n.createElement(r.ClickTracker,{module:"pin",action:"pin_cta_click",context:"attraction",forceAjax:!0},n.createElement(o.AttractionCta,{locationId:t.locationId,experiencesCtaEncodedLink:t.experiencesCtaEncodedLink,experiencesCtaNumOffers:t.experiencesCtaNumOffers,experiencesCtaStartingCost:t.experiencesCtaStartingCost})))})};D.defaultProps={category:null,experiencesCtaEncodedLink:void 0,experiencesCtaNumOffers:0,experiencesCtaStartingCost:void 0,openHours:void 0,openNow:void 0};var H=D,M=a("@ta/maps.hoteloffer"),z=a("@ta/maps.sponsored-pill"),W=a.n(z),K=a("@ta/maps.photo-carousel"),F=a.n(K),G=a("@ta/hotels.tracking"),V=a.n(G),Y={module:"pin",action:"pin_cta_click",context:"hotel"},$={module:"pin",action:"pin_cta_click",context:"hotel_deferred"},q=function e(){return n.createElement(U,{entityType:"hotel"})},Q=function e(t){var a=t.isSponsored&&n.createElement("div",{className:"".concat("maps-popups-base-HotelPopup__pillContainer--401In")},n.createElement(W.a,null)),o=t.locationId,r=n.useCallback(function(){return Object(I.featureIsEnabled)("hotels_media_mas_maps")?n.createElement(F.a,{locationId:o,renderNoPhotosDefault:q}):null},[o]);return n.createElement(V.a,{hotelListingRenderer:function e(o){return n.createElement(A,{locationId:t.locationId,entityType:"hotel",title:t.title,detailUrl:t.detailUrl,thumbnail:t.thumbnail,rating:t.rating,numReviews:t.numReviews,titlePill:a,onDetailUrlClick:function e(t){var a=Object(G.getSourceElemForMapClick)(t,w.MAP_LISTING_TYPES.POPUP);o(a)},renderThumbnail:r},function(){return t.offers?n.createElement(M.HotelOffer,{offers:t.offers,trackingProps:Y,preOfferClick:t.preOfferClick,priceSize:20}):n.createElement(M.DeferredHotelOffer,{locationId:t.locationId,trackingProps:$})})},customClickHandler:t.onDetailUrlClick,locationId:t.locationId,listingKey:t.listingKey,interactionsParamName:G.INTERACTIONS_PARAM_NAMES.HOTEL_MAPS_COMPONENT})};Q.defaultProps={offers:null,popIndexText:null,isSponsored:!1};var Z=Q,J=a("@babel/runtime/helpers/esm/objectSpread"),X=a.n(J),ee=a("react-redux"),te=a("@ta/common.radio"),ae=a.n(te),ne=a("@ta/styleguide.button"),oe=a.n(ne),re=a("@ta/common.i18n"),ie=function e(t,a){return[t,(a||[]).join(", ")].filter(function(e){return""!==e}).join(", ")},le=function e(t){return n.createElement(A,{locationId:t.locationId,entityType:"restaurant",title:t.title,detailUrl:t.detailUrl,thumbnail:t.thumbnail,rating:t.rating,numReviews:t.numReviews,subtitle:ie(t.priceString,t.cuisines)},function(){var e=t.pageDetailId===t.locationId,a=e?void 0:t.detailUrl,o=e?function(){return ae()("restaurant-detail-map").emit("close-trigger-clicked")}:function(e){return e.stopPropagation()};return n.createElement("div",{className:"maps-popups-base-RestaurantPopup__reserveContainer--2PZE0"},n.createElement(v.ResponsiveTargetLink,{target:"_blank",mobileTarget:"_self",href:a,onClick:o},n.createElement(r.ClickTracker,{module:"pin",action:"pin_cta_click",context:"restaurant"},n.createElement(oe.a,{size:"small"},t.reserveText||Object(re.localize)("attractions.cta_more_info")))))})};le.defaultProps={reserveText:null,priceString:"",cuisines:[]};var ce=Object(ee.connect)(function(e,t){var a=e.page.detailId;return X()({},t,{pageDetailId:a})})(le);a.d(t,"AttractionPopup",function(){return H}),a.d(t,"BaseLocationPopup",function(){return A}),a.d(t,"HotelPopup",function(){return Z}),a.d(t,"RestaurantPopup",function(){return ce})}}});
//# sourceMappingURL=maps.popups-base.6622e30f27.js.map