(window.$WP=window.$WP||[]).push({id:"@ta/social.sections",d:["vendor-react-libs","ta-common","ta-platform","@ta/trips.trip-flow-selector","@ta/trips.bookmark-icon","@ta/tracking.interactions","@ta/social.place-type","vendor-babel","@ta/overlays.headers","@ta/public.share-cta","@ta/common.text","@ta/social.links","@ta/social.member","@ta/social.member-event","@ta/social.actions","@ta/social.repost-action","@ta/overlays.modal","@ta/overlays.managers","@ta/social.tabs","@ta/common.infinite-loader","vendor-apollo-libs","@ta/social.feed","@ta/social.cards","@ta/trips.trip-util","react-flip-move","@ta/social.scroll","@ta/social.poi","@ta/common.photo-carousel","@ta/common.client","@ta/social.follow","@ta/social.dates","@ta/social.section-overflow","@ta/public.listing","@ta/social.login-gate","@ta/public.content-uploader","@ta/social.ugc-actions","@ta/media.upload","@ta/social.block-button","@ta/social.profile","@ta/social.cover-photo","@ta/social.member-common","@ta/social.skeletons","@ta/social.review-info","@ta/events.window-resize","@ta/common.sessionstorage","@ta/events.keyboard-event-listener","@ta/overlays.pieces","@ta/social.link-preview","@ta/trips.trip-types","@ta/trips.social","@ta/trips.trip-byline","@ta/trips.trip-avatars","@ta/trips.collaboration","@ta/social.in-destination"],e:["./packages/social/sections/index.jsx"],x:{"./packages/common/webview/NativeBridge.jsx":["isActionSupported","postToBridge","hideSkeleton","onNewOrUpdatedScreen","showNativeOverflowMenu","showNativeMap","showNativeCreateTrip","showNativeShareTrip","showSavesModal","showRegistration","close","startScreenTransition","onOverlayStateChange","onHeaderHeightChange","onShrinkMap","onNavigateToTripDetail","onHandleTripCollaboration","onFlushBatchTracking","isNativeWebview","getHeaderHeight","onTripsRefetch","onTripUpdate","onTripItemDelete","onRefetchTripsWithItems"],"./packages/social/feed/MemberProfile.fragment.gql":["a"],"./packages/social/feed/feedFragments/ContributionCount.fragment.gql":["a"],"./packages/social/feed/feedFragments/HometownFields.fragment.gql":["a"],"./packages/social/feed/feedFragments/PhotoSizes.fragment.gql":["a"],"./packages/social/feed/feedFragments/UserProfileFields.fragment.gql":["a"],"./packages/social/sections/UgcActionSection.jsx":["a"],"./packages/social/sections/UgcActionSection.less":["a"],"./packages/social/sections/index.jsx":["LocationSectionPhotoWrap","LocationSection","DmoSectionPhotoWrap","NoDmoPhotoAvailable","PhotoSection","PhotoSocialActionBar","PhotoSocialStatistics","UgcActionSection","SocialUgcActionSection","ProfileSection","ProfileQuery","ProfileSectionNarrow","ReviewSection","ForumsListLayout","ForumsListSection","ForumPostSection","VideoSection","FULLSCREEN_FROM_FEED_DATE_LOCAL_STORAGE_KEY","LinkPostSection","MediaBatchPhotoSection","ManagedMediaBatchSection","RepostSection","ErrorSection","TripSection","SocialStatisticsBar","VideoSidebar","VideoPlayerAndSidebar","SocialProofModal","ReasonForCrust","SectionModal","SectionModalHeader","SectionThumbnails","SocialSection","GeoOverviewSection","HeaderSection","SponsoredCrust","LocationPermissionSection"],"./roots/social/profile/ProfileBasicFields.fragment.gql":["a"]},m:{"./node_modules/webpack/buildin/global.js":function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},"./packages/common/webview/NativeBridge.jsx":function(e,t,i){"use strict";function o(e){var t="";if(null!=e.tapCallback){var i=e.tapCallback,o="nativeInterop"+function n(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}();window[o]=function(){null!=i&&i()},t=o,e.tapFunction=t,e.tapCallback=null}}function n(){return"undefined"!=typeof window&&window.taBridgeContext?(window.bridge||function e(){var e,t,i;window.bridge||(window.bridge=(e=[],t=0,i=[],document.addEventListener("PacificDidReceiveNativeCallback",function(t){if(t.detail){var i=t.detail,o=isNaN(parseInt(i.id))?-1:parseInt(i.id);-1!=o&&(e[o]&&e[o](i.parameters,i.error),delete e[o])}},!1),document.addEventListener("PacificDidReceiveNativeBroadcast",function(e){if(e.detail){var t=e.detail,o=t.name;if(void 0!==o&&i[o]){var n=i[o];if(n instanceof Array){var a=t.parameters;n.forEach(function(e){e(a)})}}}},!1),{post:function i(o,n,a,c,r){var l=t++;e[l]=c,window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.pacific?window.webkit.messageHandlers.pacific.postMessage({action:o,parameters:n,uid:a,callback:l,print:r||0}):window.pacific&&window.pacific.postMessage(JSON.stringify({action:o,parameters:n,uid:a,callback:l,print:r||0}))},on:function e(t,o){var n=i[t];return n||(i[t]=n=[]),n.push(o),function(){n[indexOf(n,o)]=null}},off:function e(t){delete i[t]}}))}(),window.taBridgeContext.uid):null}function a(e,t){if("undefined"==typeof window||!window.taBridgeContext||!window.taBridgeContext.actions)return!1;var i=window.taBridgeContext.actions[e];return!(!i||!i.v)&&t===i.v}function c(e,t,i){n()&&(e?window.bridge.on(t,i):window.bridge.off(t))}function r(e){e.items.forEach(function(e,t){o(e)})}function l(e,t,i){var o=n();return!(!o||!a(e,t)||(window.bridge.post(e,i||{},o),0))}function s(){l("hideSkeleton",1,null)}function d(e){!function t(e){null!=e.trailingMenuItems&&e.trailingMenuItems.forEach(function(e,t){var i=e;o(i),null!=i.nestedMenu&&r(i.nestedMenu)})}(e.navigation),l("onNewOrUpdatedScreen",1,e)}function u(e){r(e),l("overflowMenu",1,e)}function m(){a("map",2)?l("map",2,null):l("map",1,null)}function p(e){l("createTrip",1,{isPublic:e})}function v(e){l("shareTrip",1,e)}i.r(t),i.d(t,"isActionSupported",function(){return a}),i.d(t,"postToBridge",function(){return l}),i.d(t,"hideSkeleton",function(){return s}),i.d(t,"onNewOrUpdatedScreen",function(){return d}),i.d(t,"showNativeOverflowMenu",function(){return u}),i.d(t,"showNativeMap",function(){return m}),i.d(t,"showNativeCreateTrip",function(){return p}),i.d(t,"showNativeShareTrip",function(){return v}),i.d(t,"showSavesModal",function(){return b}),i.d(t,"showRegistration",function(){return f}),i.d(t,"close",function(){return g}),i.d(t,"startScreenTransition",function(){return _}),i.d(t,"onOverlayStateChange",function(){return h}),i.d(t,"onHeaderHeightChange",function(){return k}),i.d(t,"onShrinkMap",function(){return S}),i.d(t,"onNavigateToTripDetail",function(){return E}),i.d(t,"onHandleTripCollaboration",function(){return j}),i.d(t,"onFlushBatchTracking",function(){return y}),i.d(t,"isNativeWebview",function(){return N}),i.d(t,"getHeaderHeight",function(){return O}),i.d(t,"onTripsRefetch",function(){return I}),i.d(t,"onTripUpdate",function(){return C}),i.d(t,"onTripItemDelete",function(){return w}),i.d(t,"onRefetchTripsWithItems",function(){return P});var b=function e(t){a("presentSavesModal",2)?l("presentSavesModal",2,t):l("presentSavesModal",1,{itemId:t.id})},f=function e(t){l("showReg",1,{dismissOnCancellation:t})};function g(){l("close",1,null)}function _(){l("startScreenTransition",1,null)}function h(e){l(e?"overlayShown":"overlayHidden",1,null)}function k(e,t){c(e,"updateHeaderHeight",t)}function S(e,t){c(e,"shrinkMap",t)}function E(e,t){c(e,"navigateToTripDetail",t)}function j(e,t){c(e,"handleTripCollaboration",t)}function y(e,t){c(e,"flushBatchTracking",t)}function N(){return null!=n()}function O(){if("undefined"!=typeof window&&void 0!==window.localStorage&&void 0!==window.localStorage.headerHeight){var e=window.localStorage.headerHeight;return"string"==typeof e&&(e=parseInt(e,10)),e}return 0}function I(e,t){c(e,"refetchTrips",t)}function C(e){l("tripUpdate",1,e)}function w(e){l("tripItemDelete",1,e)}function P(e,t){c(e,"refetchTripsWithItems",t)}},"./packages/social/feed/MemberProfile.fragment.gql":function(e,t,i){"use strict";var o=i("./packages/social/feed/feedFragments/ContributionCount.fragment.gql"),n=i("./roots/social/profile/ProfileBasicFields.fragment.gql"),a=i("./packages/social/feed/feedFragments/HometownFields.fragment.gql"),c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MemberForProfile"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MemberProfile"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ProfileBasicFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"avatar"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"hometown"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"HometownFields"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"followerCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"followeeCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"website"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bio"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"memberCreated"},name:{kind:"Name",value:"created"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"static"},arguments:[]}]},{kind:"FragmentSpread",name:{kind:"Name",value:"ContributionCount"},directives:[]},{kind:"Field",name:{kind:"Name",value:"coverPhoto"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"memberType"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isBrand"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDestinationExpert"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDestinationMarketer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isInfluencer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isTAStaff"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"expertForums"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"generalForumIds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"geoForumLocationIds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"forums"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"forumId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"route"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:822}};c.loc.source={body:"148b8a66ca34"};var r={};function l(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})}c.definitions=c.definitions.concat(l(o.a.definitions)),c.definitions=c.definitions.concat(l(n.a.definitions)),c.definitions=c.definitions.concat(l(a.a.definitions)),t.a=c},"./packages/social/feed/feedFragments/ContributionCount.fragment.gql":function(e,t,i){"use strict";var o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ContributionCount"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MemberProfile"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contributionCounts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sumAllUgc"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sumReview"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sumMedia"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"forumPost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"linkPost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"video"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"trip"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"helpfulVote"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:199}};o.loc.source={body:"c9b676b76824"},t.a=o},"./packages/social/feed/feedFragments/HometownFields.fragment.gql":function(e,t,i){"use strict";var o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"HometownFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MemberLocation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fallbackString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additionalNames"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"long"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"locationId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:203}};o.loc.source={body:"cd3d893a1d20"},t.a=o},"./packages/social/feed/feedFragments/PhotoSizes.fragment.gql":function(e,t,i){"use strict";var o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PhotoSizes"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PhotoSize"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isHorizontal"},arguments:[],directives:[]}]}}],loc:{start:0,end:75}};o.loc.source={body:"d458b47a8b35"},t.a=o},"./packages/social/feed/feedFragments/UserProfileFields.fragment.gql":function(e,t,i){"use strict";var o=i("./packages/social/feed/feedFragments/HometownFields.fragment.gql"),n=i("./packages/social/feed/feedFragments/PhotoSizes.fragment.gql"),a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UserProfileFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MemberProfile"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"userId"},name:{kind:"Name",value:"id"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"static"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"isMe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isVerified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionCounts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sumAllUgc"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photoSizes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PhotoSizes"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"hometown"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"HometownFields"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"expertForums"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"generalForumIds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"geoForumLocationIds"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"route"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:423}};a.loc.source={body:"cafc9d3f9ab1"};var c={};function r(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!c[t]&&(c[t]=!0,!0)})}a.definitions=a.definitions.concat(r(o.a.definitions)),a.definitions=a.definitions.concat(r(n.a.definitions)),t.a=a},"./packages/social/sections/UgcActionSection.jsx":function(e,t,i){"use strict";(function(e){var o=i("@babel/runtime/helpers/esm/extends"),n=i.n(o),a=i("react"),c=i("@ta/common.i18n"),r=i("@ta/common.state"),l=i("@ta/common.tracking"),s=i.n(l),d=i("@ta/overlays.managers"),u=i("@ta/public.listing"),m=i("@ta/social.login-gate"),p=i("@ta/tracking.interactions"),v=i("./packages/social/sections/UgcActionSection.less"),b=function t(i){var o=i.label,n=i.icon,c=i.trackingName,l=void 0===c?void 0:c,v=i.onClick,b=Object(r.getStore)().getState();if(i.url){var f=i.url;return a.createElement(m.SocialLoginGate,{pid:i.loginPid},function(e){return a.createElement(p.InteractionLogger,null,function(t){return a.createElement(u.LabeledIconAction,{icon:n,label:o,url:f,onClick:function i(o){var n,a,c;void 0!==l&&(t(o,"postContentCtaClick",{action:l,entrypoint:"ACTION_CARD",isMemberSignedIn:null==b?void 0:null===(n=b.auth)||void 0===n?void 0:n.isMember}),s()({module:"postContentCtaClick",action:l,context:"ACTION_CARD|".concat(null==b?void 0:null===(a=b.route)||void 0===a?void 0:a.page),isMemberSignedIn:null==b?void 0:null===(c=b.auth)||void 0===c?void 0:c.isMember})),o.preventDefault(),e().then(function(){v&&v(o),window.location.href=f})}})})})}if(i.name){var g=i.name,_=i.overlay;return a.createElement(a.Fragment,null,_(),a.createElement(d.Opener,{name:g},function(t){return a.createElement(m.SocialLoginGate,{pid:i.loginPid},function(c){return a.createElement(p.InteractionLogger,null,function(r){return a.createElement(u.LabeledIconAction,{icon:n,label:o,onClick:function o(n){var a,d,u;void 0!==l&&(r(n,"postContentCtaClick",{action:l,entrypoint:"ACTION_CARD",isMemberSignedIn:null==b?void 0:null===(a=b.auth)||void 0===a?void 0:a.isMember}),s()({module:"postContentCtaClick",action:l,context:"ACTION_CARD|".concat(null==b?void 0:null===(d=b.route)||void 0===d?void 0:d.page),isMemberSignedIn:null==b?void 0:null===(u=b.auth)||void 0===u?void 0:u.isMember})),c().then(function(){e.require(["trjs!ta/util/Cookie"],function(e){e.setPIDCookie(i.pid)}),t(),v&&v(n)})}})})})}))}return null};b.defaultProps={onClick:void 0},t.a=function e(t){var i=t.actions;return a.createElement("div",{className:"".concat(v.a.section," ui_card section")},a.createElement("div",{className:v.a.header},Object(c.localize)("social_profile_ugc_cta")),i.map(function(e){return a.createElement(b,n()({},e,{key:e.label}))}))}}).call(this,i("./node_modules/webpack/buildin/global.js"))},"./packages/social/sections/UgcActionSection.less":function(e,t,i){"use strict";t.a={section:"social-sections-UgcActionSection__section--3rHoM",header:"social-sections-UgcActionSection__header--2rdu0"}},"./packages/social/sections/index.jsx":function(e,t,i){"use strict";i.r(t);var o=i("react"),n=i("@ta/media.image"),a=function e(t){var i=t.location,a=t.geoShelfPhotoClassName;return o.createElement("div",{className:"social-sections-locationSection-LocationSectionPhotoWrap__photo_wrap--2hQYV"},o.createElement("div",{className:""!==a?a:"social-sections-locationSection-LocationSectionPhotoWrap__photo--37rKd"},o.createElement(n.ResponsiveImage,{sources:i.thumbnail.photoSizes,width:"100%",height:"100%",borderRadius:"2px"})))};a.defaultProps={geoShelfPhotoClassName:""};var c=a,r=i("@ta/styleguide.bubble-rating"),l=i("@ta/common.routing"),s=i("@ta/common.logging"),d=i.n(s),u=i("@ta/trips.trip-flow-selector"),m=i("@ta/trips.bookmark-icon"),p=i("@ta/tracking.interactions"),v=i("@ta/social.place-type"),b=function e(t){var i;return t&&t.url&&d.a.warn("LocationSection using location.url instead of location.route.url!"),(null==t?void 0:null===(i=t.route)||void 0===i?void 0:i.url)||(null==t?void 0:t.url)},f=function e(t){var i=t.location,n=i.thumbnail;return i.isGeo?o.createElement("div",{className:"ui_shelf_item_container ui_geo_shelf_item ".concat("social-sections-locationSection-LocationSection__section--3GTcc"," ")},o.createElement(p.InteractionLogger,null,function(e){return o.createElement(l.Link,{href:b(i),onClick:function t(i){return e(i,"feedClick")},className:"ui_poi_thumbnail ui_text_on_thumbnail"},n?o.createElement(c,{location:i,geoShelfPhotoClassName:""}):o.createElement(v.NoPhotoAvailableByPlaceType,{location:i}),o.createElement("span",{className:"item name"},i.name))})):o.createElement("div",{className:"social-sections-locationSection-LocationSection__section--3GTcc"},o.createElement(u.QueriedTripFlowSelector,{object:i},function(e,t){return o.createElement(m.BookmarkIcon,{bookmarkStyle:"stacked",active:t,onClick:e})}),o.createElement(p.InteractionLogger,null,function(e){return o.createElement(o.Fragment,null,o.createElement(l.Link,{href:i.url,className:"ui_poi_thumbnail",onClick:function t(i){return e(i,"feedClick")}},n?o.createElement(c,{location:i,geoShelfPhotoClassName:""}):o.createElement(v.NoPhotoAvailableByPlaceType,{location:i})),o.createElement(l.Link,{href:i.url,className:"item poi_name ui_link",onClick:function t(i){return e(i,"feedClick")}},o.createElement("span",{className:"social-sections-locationSection-LocationSection__name--VXhyF"},i.name)),i.reviewSummary&&0!==i.reviewSummary.count&&o.createElement(l.Link,{href:i.url,onClick:function t(i){return e(i,"feedClick")}},o.createElement(r.BubbleRatingWithReviewCount,{numReviews:i.reviewSummary.count,rating:i.reviewSummary.rating,fontSize:14})))}),o.createElement("span",{className:"social-sections-locationSection-LocationSection__subheader--2zmkZ"},i.geoName))},g=function e(t){var i=t.dmoShelfItem,a=t.geoShelfPhotoClassName;return o.createElement("div",{className:"social-sections-dmoSection-DmoSectionPhotoWrap__photo_wrap--2XdmE"},o.createElement("div",{className:""!==a?a:"social-sections-dmoSection-DmoSectionPhotoWrap__photo--3_k6-"},o.createElement(n.ResponsiveImage,{sources:i.photo.photoSizes,width:"100%",height:"100%",borderRadius:"2px"})))};g.defaultProps={geoShelfPhotoClassName:""};var _=g,h=i("@ta/styleguide.icon"),k=function e(t){var i;switch(t.dmoShelfItem.linkText){case"View Event":case"View Article":case"View Collection":i="globe-world";break;default:i=""}return o.createElement("div",{className:"social-sections-dmoSection-NoDmoPhotoAvailable__no_photo_available--1tF3X"},o.createElement(h.Icon,{name:i,className:"social-sections-dmoSection-NoDmoPhotoAvailable__icon--LUvLn"}))},S=i("@babel/runtime/helpers/esm/objectSpread"),E=i.n(S),j=i("@ta/common.features"),y=i("@ta/overlays.headers"),N=i("@ta/public.share-cta"),O=i("@ta/common.i18n"),I=i("@ta/common.text"),C=i("@ta/social.links"),w=i("@ta/social.member"),P=i("@ta/social.member-event"),F=i("@ta/social.actions"),L=i("@ta/social.repost-action"),R=i("@ta/overlays.modal"),T=i("@babel/runtime/helpers/esm/defineProperty"),M=i.n(T),A=i("@ta/common.classnames"),D=i.n(A),B=i("@babel/runtime/helpers/esm/classCallCheck"),z=i.n(B),x=i("@babel/runtime/helpers/esm/createClass"),U=i.n(x),V=i("@babel/runtime/helpers/esm/possibleConstructorReturn"),H=i.n(V),W=i("@babel/runtime/helpers/esm/getPrototypeOf"),G=i.n(W),q=i("@babel/runtime/helpers/esm/inherits"),Q=i.n(q),X=i("@babel/runtime/helpers/esm/assertThisInitialized"),J=i.n(X),Z=i("react-flip-move"),K=i.n(Z),Y=i("@ta/social.tabs"),$=i("@ta/social.scroll"),ee=i("@ta/social.poi"),te=function(e){function t(){var e,i;z()(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return i=H()(this,(e=G()(t)).call.apply(e,[this].concat(n))),M()(J()(J()(i)),"state",{hasTrackedScroll:!1}),M()(J()(J()(i)),"delay",4400),M()(J()(J()(i)),"timeouts",new Map),i}return Q()(t,e),U()(t,[{key:"render",value:function e(){var t=this,i=this.props.className,n={left:0,top:0,bottom:0,right:100},a=this.props.pois;return o.createElement("div",{className:"".concat("social-sections-POICarousel__relative--1nd6U"," ").concat(i(a.length))},o.createElement(p.InteractionLogger,null,function(e){return o.createElement(Y.TabActiveContext.Consumer,null,function(i){return o.createElement($.ScrollAffordance,{top:!1,bottom:!1,left:a.length>0,right:a.length>0,threshold:0,minDistance:0,snapToEdge:n,className:"".concat("social-sections-POICarousel__container--297jy"," ").concat("social-sections-POICarousel__carousel--1vz03"),isActive:!i||i.isActive,onScroll:t.state.hasTrackedScroll?void 0:function(i){t.setState({hasTrackedScroll:!0}),e(i,"linkedPoiScroll")}},function(e){return o.createElement(K.a,{staggerDurationBy:"30",duration:400,maintainContainerHeight:!0,typeName:null,enterAnimation:"fade",leaveAnimation:"fade"},a.slice(0,t.props.limit).map(function(t,i){var n,c=function e(t){switch(t.__typename){case"AttractionProductInformation":return t.attractionProductId;default:return t.locationId}}(t);return o.createElement("div",{key:c},o.createElement("div",{ref:e(c),className:D()("social-sections-POICarousel__gutter--w8x-S",(n={},M()(n,"social-sections-POICarousel__first--1aVoT",0===i),M()(n,"social-sections-POICarousel__last--1wXdF",i===a.length-1),n))},o.createElement("div",null,o.createElement(ee.POIObject,{poi:ee.POIObject.viewModelForObject(t),size:"large",borderRadius:"0",showSavesIcon:!0}))))}))})})}))}}]),t}(o.Component);M()(te,"defaultProps",{limit:20});var ie=te,oe=i("@babel/runtime/helpers/esm/extends"),ne=i.n(oe),ae=i("@ta/overlays.managers"),ce=i("@ta/common.error-handling"),re=i("@ta/common.infinite-loader"),le=i.n(re),se=i("./packages/common/webview/NativeBridge.jsx"),de=i("@ta/styleguide.loading"),ue=i("@ta/social.cards"),me=i("@ta/loading.error"),pe=function e(t){return t.error?(d.a.error("Error fetching LikersFeed data for ".concat(t.socialObjectRef.id,": "),t.error),o.createElement(me.LoadingErrorMessage,{refetch:t.refetch})):o.createElement("div",{ref:t.contentRef,className:"social-sections-socialproof-LikersFeed__feed--1mXZN"},t.likers.map(function(e){return e?o.createElement(ue.ProfileCardResponsive,{key:e.userId,profile:e}):null}),t.loading&&o.createElement("div",{className:"social-sections-socialproof-LikersFeed__loading--3z4ah"},o.createElement(de.LoadingSpinner,null)))},ve=i("@babel/runtime/helpers/esm/toConsumableArray"),be=i.n(ve),fe=i("react-apollo"),ge=i("@ta/social.feed"),_e={Review:"REVIEW",Photo:"PHOTO",Video:"VIDEO",ForumPost:"FORUM_POST",LinkPost:"LINK_POST",Trip:"TRIP",TripItem:"TRIP_ITEM",Repost:"REPOST",MediaBatch:"MEDIA_BATCH"},he=function e(t){return o.createElement(fe.Query,{query:ge.LikersFeedQuery,notifyOnNetworkStatusChange:!0,variables:{objectId:t.socialObjectRef.id,objectType:_e[t.socialObjectRef.type],limit:20}},function(e){var i=e.data,o=e.error,n=e.fetchMore,a=e.loading,c=e.refetch;return t.children(function e(){return n({variables:{offset:i.likers.list.length},updateQuery:function e(t,i){var o=i.fetchMoreResult;return o&&t.likers.hasMore?Object.assign({},t,{likers:{list:[].concat(be()(t.likers.list),be()(o.likers.list)),hasMore:o.likers.hasMore,__typename:t.likers.__typename}}):t}})},i&&i.likers?i.likers.list:[],!(!i||!i.likers)&&i.likers.hasMore,a,o,c)})},ke=function e(t){return t.error?(d.a.error("Error fetching RepostersFeed data for ".concat(t.socialObjectRef.id,": "),t.error),o.createElement(me.LoadingErrorMessage,{refetch:t.refetch})):o.createElement("div",{className:"social-sections-socialproof-RepostersFeed__feed--scIxT",ref:t.contentRef},t.reposters.map(function(e,t){return e?o.createElement(ue.ProfileCardResponsive,{key:"".concat(e.userId,":").concat(t),profile:e}):null}),t.loading&&o.createElement("div",{className:"social-sections-socialproof-RepostersFeed__loading--pl3fi"},o.createElement(de.LoadingSpinner,null)))},Se=i("./packages/social/feed/feedFragments/UserProfileFields.fragment.gql"),Ee={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"RepostersFeed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"repostReference"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RepostReferenceInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Long"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Long"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"reposters"},name:{kind:"Name",value:"reposters"},arguments:[{kind:"Argument",name:{kind:"Name",value:"repostReference"},value:{kind:"Variable",name:{kind:"Name",value:"repostReference"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasMore"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"list"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"UserProfileFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"isFollowing"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"followerCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionCounts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sumAllUgc"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:409}};Ee.loc.source={body:"a36efcf3c846"};var je={};Ee.definitions=Ee.definitions.concat(function ye(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!je[t]&&(je[t]=!0,!0)})}(Se.a.definitions));var Ne=Ee,Oe={Review:"REVIEW",Photo:"PHOTO",Video:"VIDEO",ForumPost:"FORUM_POST",LinkPost:"LINK_POST",Trip:"TRIP",TripItem:"TRIP_ITEM",Repost:"REPOST",MediaBatch:"MEDIA_BATCH"},Ie=function e(t){return o.createElement(fe.Query,{query:Ne,notifyOnNetworkStatusChange:!0,variables:{repostReference:{id:t.socialObjectRef.id,type:Oe[t.socialObjectRef.type]},limit:20}},function(e){var i=e.data,o=e.error,n=e.fetchMore,a=e.loading,c=e.refetch;return t.children(function e(){return n({variables:{offset:i.reposters.list.length},updateQuery:function e(t,i){var o=i.fetchMoreResult;return o&&t.reposters.hasMore?Object.assign({},t,{reposters:{list:[].concat(be()(t.reposters.list),be()(o.reposters.list)),hasMore:o.reposters.hasMore,__typename:t.reposters.__typename}}):t}})},i&&i.reposters?i.reposters.list:[],!(!i||!i.reposters)&&i.reposters.hasMore,a,o,c)})},Ce=function e(t){if(t.error)return d.a.error("Error fetching SaversFeed data for ".concat(t.socialObjectRef.id,": "),t.error),o.createElement(me.LoadingErrorMessage,{refetch:t.refetch});var i={0:t.privateCount},n=t.savers.length>0?Object(O.localize)("saves_modal_other_users_private_v2",i):Object(O.localize)("saves_modal_other_users_private_no_public",i);return o.createElement("div",{className:"social-sections-socialproof-savers-SaversFeed__feed--3PEL7",ref:t.contentRef},t.savers.map(function(e){return e?o.createElement(ue.ProfileCardResponsive,{key:e.userId,profile:e.userProfile}):null}),o.createElement("div",{className:"social-sections-socialproof-savers-SaversFeed__privateCount--cAHmv"},o.createElement(h.Icon,{className:"social-sections-socialproof-savers-SaversFeed__privateIcon--23xvc",name:"suitcase"}),n),t.loading&&o.createElement("div",{className:"social-sections-socialproof-savers-SaversFeed__loading--1LsoZ"},o.createElement(de.LoadingSpinner,null)))},we=i("@ta/trips.trip-util"),Pe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SaversFeed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reference"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TripReferenceInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"loadCount"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"privateCount"},name:{kind:"Name",value:"getPrivateTripCount"},arguments:[{kind:"Argument",name:{kind:"Name",value:"reference"},value:{kind:"Variable",name:{kind:"Name",value:"reference"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"loadCount"}}}]}]},{kind:"Field",alias:{kind:"Name",value:"savers"},name:{kind:"Name",value:"savers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"reference"},value:{kind:"Variable",name:{kind:"Name",value:"reference"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userProfile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"UserProfileFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"isFollowing"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"followerCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionCounts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sumAllUgc"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"hasMore"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:538}};Pe.loc.source={body:"c31071005103"};var Fe={};Pe.definitions=Pe.definitions.concat(function Le(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!Fe[t]&&(Fe[t]=!0,!0)})}(Se.a.definitions));var Re=Pe,Te=function e(t){var i=Object(we.getReferenceTypeFromObjectType)(t.socialObjectRef.type);return o.createElement(fe.Query,{fetchPolicy:"network-only",query:Re,notifyOnNetworkStatusChange:!0,variables:{reference:{id:t.socialObjectRef.id,type:i},limit:20,loadCount:!0}},function(e){var i=e.data,o=e.error,n=e.fetchMore,a=e.loading,c=e.refetch;return t.children(function e(){return n({variables:{offset:i.savers.users.length,loadCount:!1},updateQuery:function e(t,i){var o=i.fetchMoreResult;return o&&t.savers.hasMore?Object.assign({},t,{savers:{users:[].concat(be()(t.savers.users),be()(o.savers.users)),hasMore:o.savers.hasMore,privateCount:t.privateCount,__typename:t.savers.__typename}}):t}})},i&&i.savers?i.savers.users:[],!(!i||!i.savers)&&i.savers.hasMore,i&&i.privateCount?i.privateCount:0,a,o,c)})},Me=function e(t){var i=t.socialRef,o=t.isForumTopic,n=t.poiName,a=t.displayName,c=t.tripItemType,r=i.type;return"TripItem"===i.type&&(r=c),"ForumPost"!==i.type&&"ForumPost"!==c||(r=o?"ForumTopic":"ForumReply"),["LocationInformation","AttractionProductInformation"].includes(c)?n:function e(t,i){switch(t){case"Review":return Object(O.localize)("mobile_profile_users_review",i);case"Photo":return Object(O.localize)("mobile_profile_users_photo",i);case"Video":return Object(O.localize)("mobile_profile_users_video",i);case"LinkPost":return Object(O.localize)("mobile_profile_users_link_post",i);case"Trip":return Object(O.localize)("mobile_profile_users_trip",i);case"Repost":return Object(O.localize)("mobile_profile_users_repost",i);case"TripItem":case"ForumPost":return"";case"ForumReply":return Object(O.localize)("mobile_profile_users_forum_post_reply",i);case"ForumTopic":return Object(O.localize)("mobile_profile_users_forum_post_question",i);case"MediaBatch":return Object(O.localize)("social_proof_media_batch_photos_v2",i)}return""}(r,{0:a})},Ae=function e(t){var i=t.stats,n=t.socialRef,a=t.showLikers,c=t.showReposters,r=t.showSavers,l=t.type,s=t.modalName,d=t.isWebview,u=t.isForumTopic,m=t.poiName,p=t.tripItemType,v=t.displayName,b=t.onModalClose,f="Review"===n.type;return o.createElement(R.Modal,{name:s,isFullBleed:!0,isNativeWebview:d,marginTop:se.getHeaderHeight(),onClose:b,bodyScroll:!1,header:d?null:o.createElement(y.TitleBar,{displayType:"LEFT_ALIGN_GRAY"},Me({socialRef:n,isForumTopic:u,poiName:m,displayName:v,tripItemType:p}))},function e(){var t=[];if(a){var d=f?Object(O.localize)("mobile_profile_users_helpfuls_v3",{nHelpfuls:i.likeCount}):Object(O.localize)("mobile_profile_users_likes_v3",{nLikes:i.likeCount});t.push(o.createElement(Y.SocialTab,{key:"".concat(s,"_tab_").concat(Math.random()),isActive:"Likers"===l,label:d},o.createElement(he,{socialObjectRef:n},function(e,t,i,a,c,r){return o.createElement(le.a,{loadMore:e,threshold:550,throttle:50,hasMore:i,infiniteLoadOnMount:!0},function(e,i){return o.createElement("div",{className:"social-sections-socialproof-SocialProofModal__feed--2Vznt",ref:e},o.createElement(pe,{likers:t,loading:a,error:c,refetch:r,contentRef:i,socialObjectRef:n}))})})))}c&&t.push(o.createElement(Y.SocialTab,{key:"".concat(s,"_tab_").concat(Math.random()),isActive:"Reposters"===l,label:Object(O.localize)("mobile_profile_users_reposts_v3",{nReposts:i.repostCount})},o.createElement(Ie,{socialObjectRef:n},function(e,t,i,a,c,r){return o.createElement(le.a,{loadMore:e,threshold:550,throttle:50,hasMore:i,infiniteLoadOnMount:!0},function(e,i){return o.createElement("div",{className:"social-sections-socialproof-SocialProofModal__feed--2Vznt",ref:e},o.createElement(ke,{reposters:t,loading:a,error:c,refetch:r,contentRef:i,socialObjectRef:n}))})})));var u=Object(j.featureIsEnabled)("trip_savers_modal");return r&&u&&t.push(o.createElement(Y.SocialTab,{key:"".concat(s,"_tab_").concat(Math.random()),isActive:"Savers"===l,label:Object(O.localize)("mobile_profile_users_saves_v3",{nSaves:i.tripCount})},o.createElement(Te,{socialObjectRef:n},function(e,t,i,a,c,r,l){return o.createElement(le.a,{loadMore:e,threshold:550,throttle:50,hasMore:i,infiniteLoadOnMount:!0},function(e,i){return o.createElement("div",{className:"social-sections-socialproof-SocialProofModal__feed--2Vznt",ref:e},o.createElement(Ce,{savers:t,privateCount:a,loading:c,error:r,refetch:l,contentRef:i,socialObjectRef:n}))})}))),o.createElement(Y.SocialTabs,null,t)}())},De=function(e){function t(){var e,i;z()(this,t);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return i=H()(this,(e=G()(t)).call.apply(e,[this].concat(n))),M()(J()(J()(i)),"namespace",Math.random()),i}return Q()(t,e),U()(t,[{key:"render",value:function e(){var t=this.props,i=t.deduplicate,n=t.socialRef,a=t.stats,c=t.socialProofParams,r=!!a.likeCount&&a.likeCount>0,l="Review"===n.type,s=!!a.repostCount&&a.repostCount>0&&"TripItem"!==n.type,d=(null==a?void 0:a.tripCount)>0&&("TripItem"===n.type||Object(j.featureIsEnabled)("trips_save_ugc")),u=r,m=r||s||d,p=i?this.namespace:"",v="".concat(p||"","_likers_").concat(n.type,"_").concat(n.id),b="".concat(p||"","_reposters_").concat(n.type,"_").concat(n.id),f="".concat(p||"","_savers_").concat(n.type,"_").concat(n.id),g=o.createElement(o.Fragment,null,o.createElement(ae.Closer,null,function(e){return o.createElement(ae.Opener,{name:v},function(t){var i=c.displayName,r=c.isForumTopic,s=c.poiName,d=c.updateNativeBridgeProps,u=c.currentNativeBridgeProps,m=c.onModalClose,p=c.tripItemType;return o.createElement("span",{onClick:function v(){"function"==typeof d&&d(Object.assign({},u,{title:Me({displayName:i,isForumTopic:r,poiName:s,socialRef:n,tripItemType:p}),navbarHiddenAboveScrollHeight:-100,hideBackButton:!0,closeCallback:function t(){e(),m()}})),t()}},l?Object(O.localize)("n_Helpful_votes_plural",{0:a.likeCount}):Object(O.localize)("member_list_likes",{0:a.likeCount}))})}),o.createElement(Ae,ne()({},c,{type:"Likers",showLikers:r,showReposters:s,showSavers:d,modalName:v,socialRef:n,stats:a}))),_=o.createElement(o.Fragment,null,o.createElement(ae.Opener,{name:b},function(e){return o.createElement("span",{onClick:e},Object(O.localize)("member_list_reposts",{0:a.repostCount}))}),o.createElement(Ae,ne()({},c,{type:"Reposters",showLikers:u,showReposters:s,showSavers:d,modalName:b,socialRef:n,stats:a}))),h=Object(j.featureIsEnabled)("trip_savers_modal"),k=o.createElement(o.Fragment,null,o.createElement(ae.Opener,{name:f},function(e){return o.createElement("span",{onClick:function t(){h&&e()},className:"social-sections-SocialStatisticsBar__counts--35oyz"},Object(O.localize)("n_saves_plural",{0:a.tripCount}))}),o.createElement(Ae,ne()({},c,{type:"Savers",showLikers:r,showReposters:s,showSavers:d,modalName:f,socialRef:n,stats:a})));return o.createElement(ce.ErrorBoundary,null,o.createElement("span",{className:D()("social-sections-SocialStatisticsBar__bar--8jAAo",M()({},"social-sections-SocialStatisticsBar__visible--2TinK",m))},r&&o.createElement("span",{className:"".concat("social-sections-SocialStatisticsBar__counts--35oyz"," ").concat("social-sections-SocialStatisticsBar__item--3Fm5r")},g),d&&o.createElement("span",{className:"".concat("social-sections-SocialStatisticsBar__counts--35oyz"," ").concat("social-sections-SocialStatisticsBar__item--3Fm5r")},k),s&&o.createElement("span",{className:"".concat("social-sections-SocialStatisticsBar__counts--35oyz"," ").concat("social-sections-SocialStatisticsBar__item--3Fm5r")},_)))}}]),t}(o.Component);M()(De,"defaultProps",{deduplicate:!1});var Be=De,ze=function e(t){var i=t.sponsorship,n=t.showUserProfile;if(!i)return null;var a=i.userProfile;if(a&&n){var c,r={0:D()("ui_link","social-sections-SponsoredCrust__member--3_Bmx",{verified:a.isVerified}),1:null==a?void 0:null===(c=a.route)||void 0===c?void 0:c.url,2:Object(I.EscapeHtml)(Object(w.getDisplayName)(a))};return o.createElement("div",{className:"social-sections-SponsoredCrust__sponsored_crust--2qoME"},Object(O.unescaped)(Object(O.localize)("provided_by_username",r)))}return o.createElement("div",{className:"social-sections-SponsoredCrust__sponsored_crust--2qoME"},Object(O.localize)("discovery_sponsored_label"))},xe=function e(t){var i=t.topNote,n=t.header,a=t.content,c=t.socialStatistics,r=t.socialActionBar,l=t.isSingleObject,s=t.pois,d=t.isEmbedded,u=t.contentClass,m=t.cardRef,p=t.socialProofParams,v=t.noEmptyCarouselSpace,b=t.clusterId,f=t.sponsorship,g=b?"".concat("social-sections-CardSection__cluster_card--3uhZX"," section"):"ui_card section";return o.createElement("div",{className:D()("social-sections-CardSection__card_section--3Hc9Y",l?g:"social-sections-CardSection__non_section--3c0eY")},o.createElement(o.Fragment,null,f&&o.createElement("div",{className:"social-sections-CardSection__sponsorship_wrap--2ToGs"},o.createElement(ze,{sponsorship:f})),i&&o.createElement("div",{className:"social-sections-CardSection__top_note--F40Tl"},i),o.createElement("div",{className:"social-sections-CardSection__padding--2pHre"},n),o.createElement("div",{className:D()("social-sections-CardSection__background--10gg3",u)},a,o.createElement(e.Content,{fullWidth:!0},o.createElement(ie,{pois:Array.isArray(s)&&s[0]?s:[],className:function e(t){var i;return D()("social-sections-CardSection__carousel--2IA_9",(i={},M()(i,"social-sections-CardSection__empty--2XetQ",0===t),M()(i,"social-sections-CardSection__embedded--3-Bnl",d),M()(i,"social-sections-CardSection__empty_space--1-bcT",v),i))}}))),!d&&c&&o.createElement("div",{className:"social-sections-CardSection__padding--2pHre"},o.createElement(Be,{stats:c,socialRef:m,socialProofParams:p,deduplicate:!0})),!d&&o.createElement("div",{className:"social-sections-CardSection__padding--2pHre"},r)))};(xe.Content=function(e){var t=e.children,i=e.fullWidth;return o.createElement(o.Fragment,null,o.Children.map(t,function(e){return o.createElement("div",{className:D()("social-sections-CardSection__content--2z_6f",M()({},"social-sections-CardSection__fullWidth--2FVhV",i))},e)}))}).displayName="CardSection.Content",xe.Content.defaultProps={fullWidth:!1},xe.defaultProps={topNote:void 0,isSingleObject:!1,fullWidth:!1,classNames:"",pois:[],socialStatistics:void 0,isEmbedded:!1,contentClass:"",noEmptyCarouselSpace:!1,clusterId:void 0};var Ue=xe,Ve=i("react-redux"),He=i("@ta/styleguide.avatar"),We=i("@ta/social.follow"),Ge=i.n(We),qe=i("@ta/social.dates"),Qe=i("@ta/common.photo-carousel"),Xe=i("@ta/social.section-overflow"),Je=function(e){function t(e){var i;z()(this,t),i=H()(this,G()(t).call(this,e)),M()(J()(J()(i)),"imageContainerRef",o.createRef());var n=e.actor;return i.state={isInitiallyFollowing:!(n&&!n.isMe)||n.isFollowing,imageContainerWidth:"MOBILE"===i.props.viewportCategory?411:600},i}return Q()(t,e),U()(t,[{key:"componentDidMount",value:function e(){var t;(null===(t=this.imageContainerRef)||void 0===t?void 0:t.current)&&this.setState({imageContainerWidth:this.imageContainerRef.current.getBoundingClientRect().width})}},{key:"render",value:function e(){var t,i=this,a=this.props,c=a.actor,r=a.images,s=a.deleteObject,d=a.untagObject,u=a.viewportCategory,m=a.showPOISavesIcon,v=a.additionalContent,b=a.socialStatisticsBar,f=a.socialActionBar,g=r[this.props.currentIndex],_=(null==g?void 0:g.publishedDate)||(null==g?void 0:g.uploadDate),h=this.state.isInitiallyFollowing?{UNTAG:!!Object(F.DisplayUntagIcon)(g,this.props.loggedInUserId)}:{FOLLOW:!1,UNTAG:!!Object(F.DisplayUntagIcon)(g,this.props.loggedInUserId)},k="MOBILE"===u,S="TABLET"===u,E=(null==g?void 0:null===(t=g.photoSizes)||void 0===t?void 0:t.length)&&Math.round(g.photoSizes[g.photoSizes.length-1].height/(g.photoSizes[g.photoSizes.length-1].width/100)),j=r.length>1,y=j&&o.createElement(Qe.PhotoCarousel,{photos:r.map(function(e){return{id:e.id,photoSizes:e.photoSizes}}),displayIndex:this.props.currentIndex,height:function e(){var t=g.photoSizes.length-1;if((k||S)&&i.state.imageContainerWidth){var o=g.photoSizes[t].height/g.photoSizes[t].width;return"".concat(i.state.imageContainerWidth*o,"px")}return k?"500px":S?"550px":"100%"}(),width:"100%",onPhotoChange:this.props.onPhotoChange,noCta:!0,totalCount:r.length,fitStrategy:"contain",showIndicatorDots:!0,maxIndicatorDots:10,showProgress:!0,hideArrows:!0}),N=!j&&(k||S?o.createElement(n.ResponsiveImage,{sources:g.photoSizes,width:"100%",height:"auto",padding:"0 0 ".concat(E,"%"),notLazy:!0}):o.createElement(n.ResponsiveImage,{sources:g.photoSizes,width:"100%",height:"100%",fitStrategy:"contain",notLazy:!0}));return o.createElement("div",{className:"ui_columns ".concat("social-sections-SectionModal__section_modal--2Zl-4")},o.createElement("div",{className:"ui_column is-8 is-9-widescreen  is-8-desktop is-12-tablet is-12-mobile ".concat("social-sections-SectionModal__modal_image--8WmjQ"),ref:this.imageContainerRef},j?y:N),o.createElement("div",{className:"ui_column is-4 is-3-widescreen is-4-desktop is-12-tablet is-12-mobile ".concat("social-sections-SectionModal__modal_info--3Vv8T")},o.createElement("div",{className:"social-sections-SectionModal__section--G2oI2"},o.createElement("div",{className:"social-sections-SectionModal__member_block--1UuRb"},o.createElement("div",{className:"social-sections-SectionModal__member_block_left--3yBZz"},o.createElement(He.Avatar,{photo:c.avatar,display:"inline",withBorder:!0}),o.createElement("span",{className:"social-sections-SectionModal__member_wrap--2OMxs"},o.createElement(p.InteractionLogger,null,function(e){return o.createElement(l.Link,{to:{page:"Profile",username:c.username},className:D()("social-sections-SectionModal__member_name--3TCAj",{verified:c.isVerified}),onClick:function t(i){return e(i,"userClick",{userId:c.userId})}},c.displayName)}),o.createElement("span",{className:"social-sections-SectionModal__event_date--1xv1l"},o.createElement(qe.ContentDisplayDate,{dateStr:_})))),o.createElement("div",{className:"social-sections-SectionModal__member_block_right--3a9Zm"},c&&!c.isMe&&!this.state.isInitiallyFollowing&&o.createElement(Ge.a,{profile:c,displayType:"icon+text"}),o.createElement(Xe.SectionOverflowMenu,{sectionObject:this.props.overflowMenuObject,sectionObjectForType:this.props.overflowMenuObjectForType,sectionActor:this.props.actor,deleteObject:s,untagObject:d,overrideItems:h}))),o.createElement("div",{className:"social-sections-SectionModal__caption--vwFpm"},o.createElement(p.InteractionLogger,null,function(e){return o.createElement(C.Linkify,{text:g.caption,socialReferences:g.socialReferences,useSpan:!0,onLinkReferenceClick:function t(i,o){e(i,"linkReferenceClick",{authorUserId:c.userId,url:o})}})})),g.caption&&this.props.additionalContent&&o.createElement("div",{className:"social-sections-SectionModal__divider--2sadq"}),v,b,f),(null==g?void 0:g.location)&&o.createElement(ee.POIObjectList,{pois:[g.location],showSavesIcon:m})))}}]),t}(o.Component);M()(Je,"defaultProps",{deleteObject:null,untagObject:null,loggedInUserId:"",showPOISavesIcon:!1,currentIndex:0,additionalContent:null});var Ze=Object(Ve.connect)(function(e){return{viewportCategory:e.meta.device.viewportCategory,loggedInUserId:e.auth.loggedInUserId}})(Je),Ke=function e(t){var i=t.children;return o.createElement("div",{className:"ui_column\n      is-".concat(12,"-mobile is-offset-").concat(0,"-mobile\n      is-").concat(12,"-tablet is-offset-").concat(0,"-tablet\n      is-").concat(4,"-desktop is-offset-").concat(8,"-desktop\n      is-").concat(3,"-widescreen is-offset-").concat(9,"-widescreen\n      ").concat("social-sections-SectionModalHeader__offset_header--1lc-Q")},i)},Ye=i("@babel/runtime/helpers/esm/slicedToArray"),$e=i.n(Ye),et=i("@ta/common.client"),tt=function e(t){if(null==(null==t?void 0:t.photoSizes)||0===(null==t?void 0:t.photoSizes.length))return!1;var i=t.photoSizes.length-1,o=t.photoSizes[i];return o.width>o.height},it=function e(t){if(null==(null==t?void 0:t.photoSizes)||0===(null==t?void 0:t.photoSizes.length))return!1;var i=t.photoSizes.length-1,o=t.photoSizes[i];return o.width===o.height},ot=function e(t){var i="".concat(t.metadata.__typename,"_").concat(t.metadata.id),n=Object(l.useRouteState)({modal:i}),a=n.matches,c=n.to,r=n.close,s=o.useState(a),u=$e()(s,2),m=u[0],p=u[1],v=o.useState("MOBILE"===t.viewportCategory?411:600),b=$e()(v,2),f=b[0],g=b[1],_=function e(){return function e(t){return t.every(it)}(t.photos)?"".concat(f,"px"):function e(t){return t.every(tt)}(t.photos)?"".concat(f/4*3,"px"):function e(t){return t.every(function(e){return!tt(e)})}(t.photos)?"".concat(f/3*4,"px"):"".concat(f,"px")},h=o.useRef(null);o.useEffect(function(){if(h.current&&"function"==typeof h.current.getBoundingClientRect){var e=h.current.getBoundingClientRect().width;g(e)}else d.a.error("Container ref is not properly set in FeedSectionPhotoCarousel")},[]);var k=function e(){r(),p(!1)};return t.photos&&0!==t.photos.length?o.createElement(l.RouteConsumer,null,function(e){var n,r,s=e.route;return o.createElement("div",{ref:h,className:"social-sections-FeedSectionPhotoCarousel__carouselBottom--3WWri"},(null==s?void 0:s.modal)===i?o.createElement(l.HeadProperties,{openGraphInfo:at(t.photos[0])}):null,t.includeRoutedModal&&a&&m&&o.createElement(et.ClientOnly,null,o.createElement(R.ModalView,{header:o.createElement(Ke,null,o.createElement(y.BrandedHeader,{branding:"TA_GREEN"})),onClose:k,closeXColorVariant:"WHITE",isFullBleed:!0,bodyScroll:!1,fullscreenAlways:!0},o.createElement(Ze,{images:t.photos,actor:t.actor,deleteObject:t.deleteObject,untagObject:t.untagObject,showPOISavesIcon:!0,currentIndex:t.currentlyDisplayedIndex,onPhotoChange:t.onPhotoChange,viewportCategory:t.viewportCategory,additionalContent:t.additionalModalContent,socialStatisticsBar:t.socialStatisticsBar,socialActionBar:t.socialActionBar,overflowMenuObject:t.overflowMenuObject,overflowMenuObjectForType:t.overflowMenuObjectForType}))),o.createElement(l.Link,{to:E()({},c,{username:(null==t?void 0:null===(n=t.actorForUrl)||void 0===n?void 0:n.username)||(null==t?void 0:null===(r=t.actor)||void 0===r?void 0:r.username)}),href:null,onClick:function e(i){p(!0),t.onCarouselClick&&t.onCarouselClick(i)},activeClassName:"",className:"social-sections-FeedSectionPhotoCarousel__link--572li"},o.createElement(Qe.PhotoCarousel,{photos:t.photos.map(function(e){return{id:e.id,photoSizes:e.photoSizes}}),width:"100%",height:_(),displayIndex:t.currentlyDisplayedIndex,totalCount:t.photos.length,showIndicatorDots:t.photos.length>1,showProgress:t.photos.length>1,hideArrows:!0,noCta:!0,onPhotoChange:t.onPhotoChange,maxIndicatorDots:10})))}):null},nt=function e(t,i){var o,n;return null!=(null==t?void 0:t.name)&&null!=(null==t?void 0:t.isGeo)&&null!=(null==i?void 0:i.displayName)&&(!1===t.isGeo&&null!=t.parent.additionalNames.long?o=Object(O.localize)("social_opengraph_photo_title",{locationName:t.name,additionalLocationName:t.parent.additionalNames.long,userName:i.displayName}):null==t.placetype||null==t.parent.placetype?o=Object(O.localize)("social_opengraph_photo_title_short",{locationName:t.additionalNames.long,userName:i.displayName}):null!=(null==t?void 0:t.name)&&null!=(null==t?void 0:null===(n=t.parent)||void 0===n?void 0:n.name)&&(o=Object(O.localize)("social_opengraph_photo_title_short",{locationName:"".concat(t.name,", ").concat(t.parent.name),userName:i.displayName}))),o},at=function e(t){var i=t.photoSizes.length-1;return{type:"image.gallery",title:nt(t.location,t.userProfile)||"",description:null!=t.caption?"".concat(t.caption):"",url:t.route.url,image:{url:"".concat(t.photoSizes[i].url),width:t.photoSizes[i].width,height:t.photoSizes[i].height}}},ct=function e(t){var i,n=t.photo,a=t.actor;return(null==n?void 0:null===(i=n.object)||void 0===i?void 0:i.socialStatistics)?o.createElement(Be,{stats:n.object.socialStatistics,socialRef:{type:n.object.__typename,id:"".concat(n.object.id)},socialProofParams:{displayName:a.displayName},deduplicate:!0}):null},rt=function e(t){var i=t.photo,n=t.actor,a=t.member,c=t.authInfo,r=Object(j.featureIsEnabled)("social_boosting_enabled")&&(null==c?void 0:c.canBoostContent)?o.createElement(F.BoostAction,{socialObjectRef:{type:"PHOTO",id:i.object.id},socialStatistics:i.object.socialStatistics,typename:i.object.__typename}):null;return o.createElement(F.SocialActionBar,null,o.createElement(F.NestedSocialAction,{padRight:!0},o.createElement(F.LikeAction,{item:i.object}),Object(j.featureIsEnabled)("trips_save_ugc_photos")&&o.createElement(F.SaveAction,{object:{__typename:i.object.__typename,id:i.object.id},displayStyle:"icon+text"})),o.createElement(F.NestedSocialAction,null,o.createElement(L.RepostAction,{modalName:"repost_".concat(i.object.__typename,"_").concat(i.object.id),repostPreviewProps:{feedSectionItem:i,member:a,actor:n},actor:n,socialStatistics:i.object.socialStatistics}),Object(j.featureIsEnabled)("social_ugc_share")&&i.object.route&&i.object.route.url?o.createElement(N.ShareCta,{url:"".concat(i.object.route.url),itemType:"Photo",itemId:i.object.id,styleAsSocialAction:!0,alignEdge:"right"}):o.createElement(F.DisabledSocialAction,{actionType:"Share"}),r))};rt.defaultProps={authInfo:void 0};var lt=function e(t){var i=t.photo,n=t.isSingleObject,a=t.layout,c=t.member,r=t.actor,s=t.actorForUrl,d=t.deleteObject,u=t.loggedInMemberAuthorization,m=t.untagObject,v=t.loggedInUserId,b=t.viewportCategory,f=t.clusterId,g=t.sponsorship,_=o.createElement(P.MemberEventOnObjectBlock,{objectEventType:"onPhoto",object:i.object,member:c,actor:r,deleteObject:d,untagObject:m,loggedInUserId:v,isEmbedded:"REPOST_WITH_MODAL"===a||"REPOST_NO_MODAL"===a,viewportCategory:b}),k=function e(){return o.createElement("div",{className:"social-sections-PhotoSection__ctaLine--1F_Nc"},o.createElement("span",{className:"social-sections-PhotoSection__cta--2EtuT"},Object(O.localize)("common_Read_more")),o.createElement(h.Icon,{name:"caret-down"}))},S="FULL"===a&&(null==i?void 0:i.socialStatistics)&&o.createElement(ct,{photo:i,actor:r}),j=rt({photo:i,actor:r,member:c,authInfo:u}),N=E()({},null==i?void 0:i.object,{numPhotos:1}),F=(null==i?void 0:i.object)?[i.object]:[],L=[o.createElement(Ue.Content,{fullWidth:!0,key:"photo"},o.createElement(p.InteractionLogger,null,function(e){return o.createElement("div",{className:"social-sections-PhotoSection__photo_wrap--1KgZI"},o.createElement("div",{className:"social-sections-PhotoSection__photo--3wuyX"},o.createElement(ot,{actor:r,actorForUrl:s,currentlyDisplayedIndex:0,includeRoutedModal:!0,member:c,metadata:N,onCarouselClick:function t(i){e(i,"feedClick")},overflowMenuObject:N,photos:F,socialActionBar:j,socialStatisticsBar:S})))}),("REPOST_WITH_MODAL"===a||"FULL"===a)&&o.createElement(o.Fragment,null,o.createElement(l.RouteConsumer,null,function(e){return e.route&&e.route.modal==="Photo_".concat(i.object.id)?o.createElement(l.HeadProperties,{openGraphInfo:at(i.object)}):null}),o.createElement(R.RoutedModal,{path:{modal:"Photo_".concat(i.object.id)},header:o.createElement(Ke,null,o.createElement(y.BrandedHeader,{branding:"TA_GREEN"})),closeXColorVariant:"WHITE",isFullBleed:!0,bodyScroll:!1,fullscreenAlways:!0},o.createElement(Ze,{images:[i.object],actor:r,deleteObject:d,untagObject:m,showPOISavesIcon:!0,socialStatisticsBar:S,socialActionBar:j,overflowMenuObject:i.object})))),o.createElement(Ue.Content,{key:"caption_".concat(i.object.id)},i.object.caption&&o.createElement(p.InteractionLogger,null,function(e){return o.createElement("div",{className:"social-sections-PhotoSection__caption--1s0nn"},"MOBILE"===b&&i.object.caption.length>160?o.createElement(I.ReadMore,{numLinesToShow:3,cta:k(),ctaNewline:!0},o.createElement(C.Linkify,{text:i.object.caption,socialReferences:i.object.socialReferences,useSpan:!0,onLinkReferenceClick:function t(i,o){e(i,"linkReferenceClick",{authorUserId:r.userId,url:o})}})):o.createElement(C.Linkify,{text:i.object.caption,socialReferences:i.object.socialReferences,useSpan:!0,onLinkReferenceClick:function t(i,o){e(i,"linkReferenceClick",{authorUserId:r.userId,url:o})}}))}))];return o.createElement(Ue,{isSingleObject:n,isEmbedded:"REPOST_WITH_MODAL"===a||"REPOST_NO_MODAL"===a,header:_,content:L,socialStatistics:i.object.socialStatistics,socialActionBar:j,pois:i.object.location?[i.object.location]:[],cardRef:{type:i.object.__typename,id:i.object.id},socialProofParams:{displayName:Object(w.getDisplayName)(r)},clusterId:f,sponsorship:g})};lt.defaultProps={isSingleObject:!1,isEmbedded:!1,member:null,actor:null,actorForUrl:void 0,deleteObject:null,loggedInMemberAuthorization:void 0,untagObject:null,loggedInUserId:"",viewportCategory:"",forceShowRoutedModal:!1,clusterId:void 0,sponsorship:void 0};var st=lt,dt=i("./packages/social/sections/UgcActionSection.jsx"),ut=i("@ta/public.content-uploader"),mt=i("@ta/social.ugc-actions"),pt=i("@ta/media.upload"),vt=function e(t){var i=t.permissions,n=t.permissionsLoading,a=t.fullWidth,c=t.triggerFeedRefresh,r=t.isLoggedIn,l=Object(j.featureIsEnabled)("social_link_posting_enabled"),s=Object(j.featureIsEnabled)("media_video_upload_enabled"),d=Object(j.featureIsEnabled)("media_photo_upload_enabled"),u=[];return Object(j.featureIsEnabled)("social_feedback_enabled")&&u.push(Object(mt.ugcActionMapper)("Feedback")),s&&i&&i.canUploadVideo&&u.push({label:Object(O.localize)("ugc_uploader_video_v3"),icon:"video-fill",trackingName:"POST_VIDEOS",name:"video-uploader",overlay:function e(){return o.createElement(pt.MediaUploaderModal,{mediaType:"video",modalName:"video-uploader",linkUploaderModalName:"link-uploader",onSubmit:c,pid:40488})}}),d&&(Object(j.featureIsEnabled)("enable_post_photo_ugc_for_logout_user")||(null==i?void 0:i.canPostPhoto))&&u.push({label:Object(O.localize)("ugc_uploader_photo_v3"),icon:"camera-fill",name:"photo-uploader",trackingName:"POST_PHOTOS",pid:mt.LoginPID.Photo,overlay:function e(){return o.createElement(pt.MediaUploaderModal,{mediaType:"photo",modalName:"photo-uploader",linkUploaderModalName:"link-uploader",onSubmit:c,pid:40488})}}),Object(j.featureIsEnabled)("social_war_enabled")&&(!r||n||i&&i.canWriteReview)&&u.push({label:Object(O.localize)("ugc_uploader_review_v2"),icon:"pencil-paper",trackingName:"WRITE_REVIEW",url:"/UserReview",loginPid:40468,pid:40488}),l&&i&&i.canPostLink&&u.push({label:Object(O.localize)("ugc_uploader_linkPost_v3"),icon:"link",name:"link-uploader",trackingName:"POST_LINKS",overlay:function e(){return o.createElement(ut.LinkPostUploader,{modalName:"link-uploader",onSubmit:c,displaySuccessModal:!1})}}),a?o.createElement(mt.SocialFab,{actions:u}):o.createElement(dt.a,{actions:u})};vt.defaultProps={isLoggedIn:!1};var bt=Object(Ve.connect)(function(e){return{isLoggedIn:!!e.auth.loggedInUserId}})(vt),ft=i("@ta/social.block-button"),gt=i("@ta/social.profile"),_t=function e(t){var i=t.children,n=t.isSingleObject,a=t.profile,c=t.buttonBlock,r=t.isMobile;return o.createElement("div",{className:"".concat("social-sections-profile-ProfileSection__section--60aGC"," ").concat(n?"ui_card section":"")},r&&a&&o.createElement(gt.ProfileOverflowMenu,{displayName:Object(w.getDisplayName)(a),profileUserId:a.userId,isBlocking:a.blockStatus.isBlocking,className:"social-sections-profile-ProfileSection__mobile_overflow--3LGln"}),o.createElement("div",{className:"social-sections-profile-ProfileSection__member_buttons_wrap--3Uel9"},o.createElement("div",{className:"social-sections-profile-ProfileSection__member_block_wrap--27Cl7"},a&&o.createElement(w.MemberBlock,{profile:a})),o.createElement("div",{className:"social-sections-profile-ProfileSection__buttons_wrap--WxPPR"},a&&!a.isMe&&o.createElement(ft.ProfilePublicSocialButtonBlock,{profile:a}),c)),i)};_t.defaultProps={isSingleObject:!1,buttonBlock:null,children:null,isMe:!1};var ht=function e(t){var i=t.isSingleObject,n=t.profile,a=t.children,c=t.buttonBlock,r=t.isMobile;return o.createElement(p.FollowPlacementContext.Provider,{value:{placement:"FOLLOW_PROFILE_IN_VIEW"}},o.createElement(_t,{isSingleObject:i,profile:n,buttonBlock:c,isMobile:r},o.createElement(l.HeadProperties,{title:Object(O.localize)("social_profile_page_title",{displayname:Object(w.getDisplayName)(n),username:n?"@".concat(n.username):Object(w.getDisplayName)(n)}),metaTags:[{name:"description",content:Object(O.localize)("social_profile_page_meta_description_v2",{username:n?"@".concat(n.username):Object(w.getDisplayName)(n)})}]}),a))};ht.defaultProps={buttonBlock:null,children:null};var kt=Object(Ve.connect)(function(e){return{isMobile:"MOBILE"===e.meta.device.viewportCategory}})(ht),St=i("./packages/social/feed/MemberProfile.fragment.gql"),Et={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PermissionFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PermissionSet"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[],directives:[]}]}}],loc:{start:0,end:55}};Et.loc.source={body:"11846faf6d5f"};var jt=Et,yt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ProfileSection"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"memberProfiles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userIds"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}]}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MemberForProfile"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"permissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PermissionFields"},directives:[]}]}}]}}],loc:{start:0,end:256}};yt.loc.source={body:"1f0429e2520d"};var Nt={};function Ot(e){return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!Nt[t]&&(Nt[t]=!0,!0)})}yt.definitions=yt.definitions.concat(Ot(St.a.definitions)),yt.definitions=yt.definitions.concat(Ot(jt.definitions));var It=yt,Ct=i("@ta/social.cover-photo"),wt=i("@ta/social.member-common"),Pt=i("@ta/social.skeletons"),Ft=i("@ta/common.cdn"),Lt=function e(){return o.createElement("div",{className:"ui_card message ".concat("social-sections-profile-ProfileSectionNarrowLogout__sectionLogout--2xZdK")},o.createElement(Ft.CdnImage,{className:"social-sections-profile-ProfileSectionNarrowLogout__sectionLogoutImage--jtVHf",src:"/img2/social/Avatar_stock_PNG_v2.png",alt:""}),o.createElement("div",{className:"social-sections-profile-ProfileSectionNarrowLogout__sectionLogoutTitle--2DfDn"},Object(O.unescaped)(Object(O.localize)("social_left_hand_rail_value_prop_bold"))),o.createElement("ul",{className:"social-sections-profile-ProfileSectionNarrowLogout__sectionLogoutList--2tQCT"},o.createElement("li",{className:"social-sections-profile-ProfileSectionNarrowLogout__listItemContainer--3mZqU"},o.createElement("span",{className:"social-sections-profile-ProfileSectionNarrowLogout__listCircle--ipESw"}),o.createElement("div",{className:"social-sections-profile-ProfileSectionNarrowLogout__listText--OXnWH"},Object(O.unescaped)(Object(O.localize)("onboarding_social_brand_splash_native_personal_advice_bold_v2")))),o.createElement("li",{className:"social-sections-profile-ProfileSectionNarrowLogout__listItemContainer--3mZqU"},o.createElement("span",{className:"social-sections-profile-ProfileSectionNarrowLogout__listCircle--ipESw"}),o.createElement("div",{className:"social-sections-profile-ProfileSectionNarrowLogout__listText--OXnWH"},Object(O.unescaped)(Object(O.localize)("left_rail_social_brand_splash_native_easily_find_bold_v2")))),o.createElement("li",{className:"social-sections-profile-ProfileSectionNarrowLogout__listItemContainer--3mZqU"},o.createElement("span",{className:"social-sections-profile-ProfileSectionNarrowLogout__listCircle--ipESw"}),o.createElement("div",{className:"social-sections-profile-ProfileSectionNarrowLogout__listText--OXnWH"},Object(O.unescaped)(Object(O.localize)("onboarding_social_brand_splash_native_everything_need_1_bold")),Object(O.unescaped)(Object(O.localize)("onboarding_social_brand_splash_native_everything_need_2"))))))},Rt=function e(t){var i=t.children,n=t.isSingleObject,a=t.profile,c=t.buttonBlock;return o.createElement("div",{className:"".concat("social-sections-profile-ProfileSectionNarrow__section--x9Tx0"," ").concat(n?"ui_card section":"")},o.createElement(Ct.CoverPhotoImage,ne()({userId:a.userId,isMe:a.isMe,isNarrow:!0},a.coverPhoto)),o.createElement(p.InteractionLogger,null,function(e){var t;return o.createElement("div",{className:"social-sections-profile-ProfileSectionNarrow__member_block--3FczJ",onClick:function t(i){return e(i,"profileSectionClick")}},o.createElement(He.Avatar,{photo:a.avatar,size:"large",withBorder:!0,href:null==a?void 0:null===(t=a.route)||void 0===t?void 0:t.url,target:"_self"}),o.createElement("div",{className:"social-sections-profile-ProfileSectionNarrow__align_to_bottom--2Aivn"},o.createElement(wt.MemberName,{profile:a,displayNameClassName:"social-sections-profile-ProfileSectionNarrow__display_name--1_JJ3"})))}),!a.isMe&&o.createElement(ft.ProfilePublicSocialButtonBlock,{profile:a}),c,o.createElement(w.MemberStats,{profile:a,isNarrow:!0}),o.createElement(wt.MemberHometown,{hometown:a.hometown}),o.createElement(w.MemberLink,{website:a.website}),o.createElement(w.MemberBio,{bio:a.bio}),o.createElement(w.DestinationExpertInfo,{expertForums:a.expertForums}),i)};Rt.defaultProps={isSingleObject:!1,buttonBlock:null,children:null};var Tt=function e(t){var i=t.isSingleObject,n=t.userId,a=t.children,c=t.buttonBlock,r=t.onError;return n?o.createElement(ge.QueryWithPartialRefetchUntilReactApollo220Release,{query:It,variables:{userId:n},onError:r},function(e){var t=e.loading,n=e.error,r=e.data,l=void 0===r?{}:r;return n&&d.a.error(n),t?o.createElement(Pt.IntroBlockLoadingSkeleton,null):l.memberProfiles&&l.memberProfiles[0]?o.createElement(Rt,{isSingleObject:i,profile:l.memberProfiles[0],buttonBlock:c},a):null}):o.createElement(Lt,null)};Tt.defaultProps={buttonBlock:null,children:null,onError:void 0};var Mt=Tt,At=i("@ta/social.review-info"),Dt=i.n(At),Bt=function e(t){var i=o.useState(0),n=$e()(i,2),a=n[0],c=n[1];return o.createElement(ot,ne()({},t,{currentlyDisplayedIndex:a,onPhotoChange:c}))},zt=function e(t){var i=t.section,n=function a(e){if(e){if("PREVIOUS_VIEWED"===e.reasonFor&&e.reasonForLocation)return Object(O.unescaped)(Object(O.localize)("rebrand_recommended_POI_list_shelf_title_with_placename",{poiName:'<a href="'.concat(e.reasonForLocation.url,'" class="ui_link">').concat(e.reasonForLocation.name,"</a>")}));if("SPONSORED"===e.reasonFor)return Object(O.localize)("discovery_sponsored_label")}return null}(i);if(!n)return null;var c=function r(e){return e&&"SPONSORED"===e.reasonFor?"social-sections-ReasonForCrust__sponsored--1Dec7":""}(i);return o.createElement("div",{className:"".concat("social-sections-ReasonForCrust__reason--3HP9k"," ").concat(c)},n)};zt.defaultProps={section:null};var xt=zt,Ut=function e(t){var i,n,a,c=t.review,s=t.isSingleObject,d=t.layout,u=t.member,m=t.actor,v=t.actorForUrl,b=t.section,f=t.deleteObject,g=t.loggedInMemberAuthorization,_=t.viewportCategory,h=t.clusterId;if(!c.object)return null;var k=o.createElement(o.Fragment,null,!1,o.createElement(P.MemberEventOnObjectBlock,{objectEventType:"onReview",object:c.object,member:u,actor:m,deleteObject:f,isEmbedded:"REPOST_WITH_MODAL"===d||"REPOST_NO_MODAL"===d,viewportCategory:_})),S={id:c.object.id,caption:c.object.text,socialReferences:c.object.socialReferences,socialStatistics:c.object.socialStatistics,orderedLocations:[c.object.location],createdDate:c.object.publishedDate,__typename:c.object.__typename,numPhotos:(null==c?void 0:c.photos)?c.object.photos.length:0,route:c.object.route},E=function e(t,i){var n,a=t?c.object.text:o.createElement(o.Fragment,null,c.object.text.substring(0,160),c.object.text.length>160&&"..."),s=null===(n=c.object.route)||void 0===n?void 0:n.url,d=o.createElement("div",{className:s?D()("social-sections-ReviewSection__review--3qryC","social-sections-ReviewSection__linked--2rTun"):"social-sections-ReviewSection__review--3qryC"},o.createElement(r.BubbleRating,{rating:c.object.rating}),o.createElement("div",{className:s?D()("social-sections-ReviewSection__title--35ISZ","social-sections-ReviewSection__linked--2rTun"):"social-sections-ReviewSection__title--35ISZ"},c.object.title),o.createElement("div",{className:D()("social-sections-ReviewSection__body_text--3w6JO",M()({},"social-sections-ReviewSection__full_text--2CJvf",t))},o.createElement("q",{className:"social-sections-ReviewSection__quote--3gE7d"},a)),o.createElement(Dt.a,{stayDate:c.object.tripInfo&&c.object.tripInfo.stayDate,placeType:c.object.location&&c.object.location.placeType}));return s?o.createElement(l.Link,{href:s,onClick:i},d):d},y="FULL"===d&&(null==c?void 0:null===(i=c.object)||void 0===i?void 0:i.socialStatistics)?o.createElement(Be,{stats:c.object.socialStatistics,socialRef:{type:c.object.__typename,id:"".concat(c.object.id)},socialProofParams:{displayName:m.displayName},deduplicate:!0}):null,O=Object(j.featureIsEnabled)("social_boosting_enabled")&&g&&g.canBoostContent?o.createElement(F.BoostAction,{socialObjectRef:{type:"REVIEW",id:c.object.id},socialStatistics:c.object.socialStatistics,typename:c.object.__typename}):null,I=o.createElement(F.SocialActionBar,null,o.createElement(F.NestedSocialAction,{padRight:!0},o.createElement(F.LikeAction,{item:c.object}),Object(j.featureIsEnabled)("trips_save_ugc_reviews")&&o.createElement(F.SaveAction,{object:{__typename:c.object.__typename,id:c.object.id},displayStyle:"icon+text"})),o.createElement(F.NestedSocialAction,null,o.createElement(L.RepostAction,{modalName:"repost_".concat(c.object.__typename,"_").concat(c.object.id),repostPreviewProps:{feedSectionItem:c,member:u,actor:m},actor:m,socialStatistics:c.object.socialStatistics}),Object(j.featureIsEnabled)("social_ugc_share")&&c.object.route&&c.object.route.url?o.createElement(N.ShareCta,{url:"".concat(c.object.route.url),itemType:"Review",itemId:c.object.id,styleAsSocialAction:!0,alignEdge:"right"}):o.createElement(F.DisabledSocialAction,{actionType:"Share"}),O)),C=[];return(null==c?void 0:null===(n=c.object)||void 0===n?void 0:null===(a=n.photos)||void 0===a?void 0:a.length)>0&&C.push(o.createElement(Ue.Content,{key:c.object.id,fullWidth:!0},o.createElement(p.InteractionLogger,null,function(e){var t;return o.createElement(Bt,{metadata:S,deleteObject:f,member:u,photos:null==c?void 0:null===(t=c.object)||void 0===t?void 0:t.photos,onCarouselClick:function t(i){e(i,"feedClick")},actor:m,actorForUrl:v,additionalModalContent:E(!0),socialStatisticsBar:y,socialActionBar:I,includeRoutedModal:"FULL"===d||"REPOST_WITH_MODAL"===d,overflowMenuObject:c.object})}))),C.push(o.createElement(Ue.Content,{key:"review_".concat(c.object.id)},o.createElement("div",{className:D()("social-sections-ReviewSection__review_wrap--2b9Qj",M()({},"social-sections-ReviewSection__embedded--_nXGn","REPOST_WITH_MODAL"===d||"REPOST_NO_MODAL"===d))},o.createElement(p.InteractionLogger,null,function(e){return E(!1,function(t){return e(t,"feedClick")})})))),o.createElement(Ue,{isSingleObject:s,isEmbedded:"REPOST_WITH_MODAL"===d||"REPOST_NO_MODAL"===d,header:k,content:C,socialActionBar:I,socialStatistics:c.object.socialStatistics,pois:c.object.location?[c.object.location]:[],cardRef:{type:c.object.__typename,id:c.object.id},socialProofParams:{displayName:Object(w.getDisplayName)(m)},clusterId:h,sponsorship:null==b?void 0:b.sponsorship})};Ut.defaultProps={isSingleObject:!1,isEmbedded:!1,member:null,actor:null,actorForUrl:void 0,section:null,deleteObject:null,loggedInMemberAuthorization:void 0,viewportCategory:"",clusterId:void 0};var Vt=Ut,Ht="social-sections-forums-ForumsListLayout__cell--29qmz",Wt=Object(Ve.connect)(function(e){return{device:e.meta.device.viewportCategory}})(function e(t){var i=t.children,n=t.device;return o.createElement("div",{className:"social-sections-forums-ForumsListLayout__layout--kqCMA"},"MOBILE"!==n&&o.createElement("div",{className:"social-sections-forums-ForumsListLayout__header--30AJn"},o.createElement("div",{className:"social-sections-forums-ForumsListLayout__row--3oSM3"},o.createElement("span",{className:D()(Ht,"social-sections-forums-ForumsListLayout__date--3RMOJ")},Object(O.localize)("content_11228")),o.createElement("span",{className:D()(Ht,"social-sections-forums-ForumsListLayout__type--1XXWI")},Object(O.localize)("mw_Type")),o.createElement("span",{className:D()(Ht,"social-sections-forums-ForumsListLayout__forum--1DbA_")},Object(O.localize)("common_Forum")),o.createElement("span",{className:D()(Ht,"social-sections-forums-ForumsListLayout__topic--2IBQh")},Object(O.localize)("mc_forum_topic_c8c")))),o.createElement("div",{className:"social-sections-forums-ForumsListLayout__content--300Gq"},i))}),Gt=function(e,t){return e.lang===t?e.route.url:e.route.absoluteUrl},qt=Object(Ve.connect)(function(e){return{device:e.meta.device.viewportCategory,language:e.i18n.language}})(function e(t){var i=t.post,n=t.device,a=t.language,c=i.object.id===i.object.parentId,r=Gt(i.object,a),s=i.object.forum.route.url,d=Object(qe.getDateInBrowserTimezone)(i.object.publishedDate),u=c?i.object.topicTitle:Object(O.localize)("common_Re_topic_title",{0:i.object.topicTitle});if(!i.object)return null;var m=o.createElement(p.InteractionLogger,null,function(e){return o.createElement(o.Fragment,null,d&&o.createElement("span",{className:D()(Ht,"social-sections-forums-ForumsListLayout__date--3RMOJ")},O.globalize.formatDate("date_medium",d)),o.createElement("span",{className:D()(Ht,"social-sections-forums-ForumsListLayout__type--1XXWI")},c?Object(O.localize)("mc_forum_topic_c8c"):Object(O.localize)("common_Reply")),o.createElement("span",{className:D()(Ht,"social-sections-forums-ForumsListLayout__forum--1DbA_")},o.createElement(l.Link,{key:"forum_".concat(i.object.id),className:"ui_link",href:s,title:i.object.forumName,onClick:function t(i){return e(i,"feedClick")}},i.object.forumName)),o.createElement("span",{className:D()(Ht,"social-sections-forums-ForumsListLayout__topic--2IBQh")},o.createElement(l.Link,{key:"topic_".concat(i.object.id),className:"ui_link",href:r,title:u,onClick:function t(i){return e(i,"feedClick")}},u)))}),v=o.createElement("div",{className:"social-sections-forums-ForumsListSection__cell--2m6kM"},d&&o.createElement("div",{className:"social-sections-forums-ForumsListSection__date_topic--Dglo7"},O.globalize.formatDate("date_medium",d),", ",i.object.forumName),o.createElement("div",{className:"social-sections-forums-ForumsListSection__title--1vEki"},o.createElement(p.InteractionLogger,null,function(e){return o.createElement(l.Link,{key:"topic_".concat(i.object.id),className:"ui_link",href:r,title:u,onClick:function t(i){return e(i,"feedClick")}},u)})));return o.createElement("div",{className:"social-sections-forums-ForumsListLayout__row--3oSM3"},"MOBILE"!==n?o.createElement(o.Fragment,null,m):o.createElement(o.Fragment,null,v))}),Qt=function e(t){var i=t.post,n=t.isSingleObject,a=t.isEmbedded,c=t.member,r=t.actor,s=t.deleteObject,d=t.language,u=t.loggedInMemberAuthorization,m=t.clusterId,v=Gt(i.object,d),b=i.object.id===i.object.parentId;if(!i.object)return null;var f=o.createElement(P.MemberEventOnObjectBlock,{objectEventType:"onForumPost",object:i.object,member:c,actor:r,deleteObject:s,isEmbedded:a}),g=o.createElement(Ue.Content,{key:i.object.id},o.createElement(p.InteractionLogger,null,function(e){return o.createElement(l.Link,{key:"forum_".concat(i.object.id),className:D()("social-sections-forums-ForumPostSection__post_wrap--2RkGb",M()({},"social-sections-forums-ForumPostSection__embedded--2WBaI",a)),href:v,onClick:function t(i){return e(i,"feedClick")}},o.createElement("div",{className:"social-sections-forums-ForumPostSection__post--15RWn"},o.createElement("div",{className:"social-sections-forums-ForumPostSection__title--392Pj"},(b?"":"Re: ")+i.object.topicTitle),o.createElement("div",{className:"social-sections-forums-ForumPostSection__body_text--2itgI"},o.createElement("q",{className:"social-sections-forums-ForumPostSection__quote--1Zl9_"},i.object.body.substring(0,160),i.object.body.length>160&&"..."))))})),_=Object(j.featureIsEnabled)("social_boosting_enabled")&&u&&u.canBoostContent?o.createElement(F.BoostAction,{socialObjectRef:{type:"FORUM_POST",id:i.object.id},socialStatistics:i.object.socialStatistics,typename:i.object.__typename}):null,h=o.createElement(F.SocialActionBar,null,o.createElement(F.LikeAction,{item:i.object,socialObject:{objectType:"FORUM_POST",objectId:i.object.id}}),o.createElement(F.NestedSocialAction,null,o.createElement(L.RepostAction,{modalName:"repost_".concat(i.object.__typename,"_").concat(i.object.id),repostPreviewProps:{feedSectionItem:i,member:c,actor:r},actor:r,socialStatistics:i.object.socialStatistics}),Object(j.featureIsEnabled)("social_ugc_share")?o.createElement(N.ShareCta,{url:v,itemType:b?"ForumPost":"ForumResponse",itemId:i.object.id,styleAsSocialAction:!0,alignEdge:"right"}):o.createElement(F.DisabledSocialAction,{actionType:"Share"}),_));return o.createElement(Ue,{isSingleObject:n,isEmbedded:a,header:f,content:g,socialStatistics:i.object.socialStatistics,socialActionBar:h,pois:i.object.location?[i.object.location]:[],cardRef:{type:i.object.__typename,id:i.object.id},socialProofParams:{displayName:Object(w.getDisplayName)(r),isForumTopic:b},fullWidth:!0,clusterId:m})};Qt.defaultProps={isSingleObject:!1,isEmbedded:!1,member:null,actor:null,deleteObject:null,loggedInMemberAuthorization:void 0,clusterId:void 0};var Xt=Object(Ve.connect)(function(e,t){return E()({},t,{language:e.i18n.language})})(Qt),Jt=i("@babel/runtime/helpers/esm/objectWithoutProperties"),Zt=i.n(Jt),Kt=i("@ta/events.window-resize"),Yt=i.n(Kt),$t=i("@ta/media.common"),ei=i("@ta/platform.import"),ti=i("@ta/common.sessionstorage"),ii=i.n(ti),oi=i("@ta/events.keyboard-event-listener"),ni=i.n(oi),ai=i("@ta/overlays.pieces"),ci=function e(t){var i=t.video,n=t.actor,a=t.deleteObject,c=t.untagObject,r=t.onClose,s=t.loggedInUserId,d=t.loggedInMemberAuthorization,u=i.object.orderedLocations,m={id:i.object.id,type:i.object.__typename},v={FOLLOW:!1,UNTAG:!!Object(F.DisplayUntagIcon)(i.object,s)},b=i.object.publishedDate||i.object.uploadDate,f=Object(j.featureIsEnabled)("social_boosting_enabled")&&(null==d?void 0:d.canBoostContent)?o.createElement(F.BoostAction,{socialObjectRef:{type:"VIDEO",id:i.object.id},socialStatistics:i.object.socialStatistics,typename:i.object.__typename}):null;return o.createElement(o.Fragment,null,o.createElement("div",{className:"ui_column is-4 is-3-widescreen is-12-mobile ".concat("social-sections-VideoSidebar__modal_info--2hHAj")},o.createElement("div",{className:"".concat("social-sections-VideoSidebar__section--2jb4X"," ").concat("social-sections-VideoSidebar__sidebar--1CG8r")},o.createElement("div",{className:"social-sections-VideoSidebar__member_block--1_TzJ"},o.createElement(p.InteractionLogger,null,function(e){return o.createElement(o.Fragment,null,o.createElement("div",{className:"social-sections-VideoSidebar__member_block_left--3ceP3"},o.createElement(l.Link,{to:{page:"Profile",username:n.username},className:"social-sections-VideoSidebar__avatar_wrap--2pywP",onClick:function t(i){return e(i,"userClick",{userId:n.userId})}},o.createElement(He.Avatar,{photo:n.avatar,display:"inline",withBorder:!0,onClick:function t(i){return e(i,"userClick",{userId:n.userId})}})),o.createElement("span",{className:"social-sections-VideoSidebar__member_wrap--2K2el"},o.createElement(l.Link,{to:{page:"Profile",username:n.username},className:D()("social-sections-VideoSidebar__member_name--2QjRc",{verified:n.isVerified}),onClick:function t(i){return e(i,"userClick",{userId:n.userId})}},n.displayName),o.createElement("span",{className:"social-sections-VideoSidebar__event_date--F1n1s"},o.createElement(qe.ContentDisplayDate,{dateStr:b})))),o.createElement("div",{className:"social-sections-VideoSidebar__member_block_right--3gmMY"},!n.isMe&&o.createElement(Ge.a,{profile:n,displayType:"icon+text"}),o.createElement(Xe.SectionOverflowMenu,{sectionObject:i.object,sectionActor:n,deleteObject:a,untagObject:c,overrideItems:v})))})),i.object.caption&&o.createElement("div",{className:"social-sections-VideoSidebar__caption--3hydh"},o.createElement(C.Linkify,{text:i.object.caption,socialReferences:i.object.socialReferences})),o.createElement(Be,{stats:{likeCount:i.object.socialStatistics.likeCount,repostCount:i.object.socialStatistics.repostCount},deduplicate:!0,socialRef:m,socialProofParams:{displayName:Object(w.getDisplayName)(n)}}),o.createElement(F.SocialActionBar,null,o.createElement(F.NestedSocialAction,{padRight:!0},o.createElement(F.LikeAction,{item:i.object}),Object(j.featureIsEnabled)("trips_save_ugc_videos")&&o.createElement(F.SaveAction,{object:{__typename:i.object.__typename,id:i.object.id},displayStyle:"icon+text"})),o.createElement(F.NestedSocialAction,null,Object(j.featureIsEnabled)("social_ugc_share")?o.createElement(N.ShareCta,{url:"".concat(i.object.route.url),itemType:"Video",itemId:i.object.id,styleAsSocialAction:!0,alignEdge:"right"}):o.createElement(F.DisabledSocialAction,{actionType:"Share"}),f))),u&&u[0]&&o.createElement(ee.POIObjectList,{pois:u,showSavesIcon:!0})),o.createElement(o.Fragment,null,o.createElement("div",{className:"social-sections-VideoSidebar__close--2Qplt",onClick:function e(){r&&r()}}),o.createElement(ni.a,{keyName:"Escape",callback:function e(){r&&r()}}),o.createElement(ai.BlockScroll,null)))};ci.defaultProps={onClose:void 0,loggedInUserId:"",untagObject:null,loggedInMemberAuthorization:void 0};var ri=ci,li=Object(ei.deferredImport)("@ta/media.video-player","VideoPlayer"),si=function e(t){var i=(null==t?void 0:t.object).statuses;return!(!i||0===i.length||i.includes("UPLOADING"))},di=function(e){function t(e){var i;return z()(this,t),i=H()(this,G()(t).call(this,e)),M()(J()(J()(i)),"computeStyles",function(){if(i.contentNode&&i.contentNode.current){var e=i.contentNode.current.getBoundingClientRect().width;i.setState({containerWidth:e})}}),M()(J()(J()(i)),"contentNode",void 0),i.state={containerWidth:null,realAspectRatio:null,videoFullscreen:!1},i.contentNode=o.createRef(),i}return Q()(t,e),U()(t,[{key:"componentDidMount",value:function e(){this.computeStyles()}},{key:"render",value:function e(){var t=this,i=this.props,n=i.actor,a=i.video,c=i.isOpen,r=i.loggedInMemberAuthorization,s=i.deleteObject,d=i.untagObject,u=i.loggedInUserId,m=i.onClick,v=i.trackingModule,b=i.onClose,f=i.maxVideoHeight,g=this.state,_=g.realAspectRatio,k=g.videoFullscreen,S=a.object;if(!S||!n.isMe&&!S.statuses.includes("PUBLISHED")&&!S.statuses.includes("PENDING"))return null;var E=_||S.sources&&S.sources.length>0&&S.sources[0].aspectRatio,j=E&&this.state.containerWidth?"".concat(Math.min(f,Math.ceil(this.state.containerWidth/E)),"px"):"350px",N=si(a),I=a.object.sources.findIndex(function(e){return e.url.toLowerCase().indexOf("mp4")>-1});I=I>-1?I:a.object.sources.length-1;var C=k?{opacity:1}:{};return o.createElement(o.Fragment,null,o.createElement(Yt.a,{callback:this.computeStyles}),o.createElement("div",{key:"vw_".concat(S.id),className:"".concat("social-sections-VideoSection__video_wrap--2Gd-C"," ").concat(c?"social-sections-VideoSection__modalView--3lq_2":"social-sections-VideoSection__inlineView--2RavO"),ref:this.contentNode},o.createElement("div",{className:"".concat("social-sections-VideoSection__video--3IXg4"," ").concat(c?"ui_columns":""),style:C},c&&o.createElement("div",{className:"".concat("social-sections-VideoSection__header--32q9T"," ui_column is-4 is-offset-8 is-3-widescreen is-offset-9-widescreen is-12-mobile")},o.createElement(y.BrandedHeader,{branding:"TA_GREEN"})),o.createElement("div",{className:c?"".concat("social-sections-VideoSection__video_wrap--2Gd-C"," ui_column is-8 is-9-widescreen is-12-mobile"):""},o.createElement(l.RouteConsumer,null,function(e){return e.route&&e.route.modal==="Video_".concat(a.object.id)?o.createElement(l.HeadProperties,{openGraphInfo:{type:"video.other",title:null!=a.object.userProfile&&null!=a.object.userProfile.displayName?Object(O.localize)("social_opengraph_video_title",{username:a.object.userProfile.displayName}):"",description:null!=a.object.caption?"".concat(a.object.caption):"",url:a.object.route.url,image:{url:null!=a.object.posterSizes[0]?"".concat(a.object.posterSizes[0].url):"",width:null!=a.object.posterSizes[0]?a.object.posterSizes[0].width:0,height:null!=a.object.posterSizes[0]?a.object.posterSizes[0].height:0},video:{url:"".concat(a.object.sources[I].url),width:a.object.sources[I].width,height:a.object.sources[I].height}}}):null}),N&&o.createElement(p.InteractionLogger,null,function(e){return o.createElement(li,{key:"player_".concat(S.id),source:a.object.sources[0].url,width:"100%",height:c?"100%":j,preload:"auto",trackingModule:v,mediaId:a.object.id,fullscreenOnLandscape:!0,onFullscreenChange:function e(i){t.setState({videoFullscreen:i})},onLoaded:function e(i,o){t.setState({realAspectRatio:i/o})},onClick:m,onClickTracking:function t(i){return e(i,"feedClick")}})}),!N&&o.createElement("div",{className:"social-sections-VideoSection__video_not_available--1RZA1",style:{height:c?"100%":j}},o.createElement(h.Icon,{name:"video-fill",className:"social-sections-VideoSection__video_not_available_icon--3JzkT"}))),c&&o.createElement(ri,{video:a,actor:n,deleteObject:s,untagObject:d,loggedInUserId:u,loggedInMemberAuthorization:r,onClose:b}))))}}]),t}(o.Component);M()(di,"defaultProps",{maxVideoHeight:450});var ui=Object(Ve.connect)(function(e){return{loggedInUserId:e.auth.loggedInUserId}})(di),mi=function e(t){var i=t.member,n=t.actor,a=t.video,c=t.isSingleObject,r=t.isEmbedded,l=t.loggedInMemberAuthorization,s=t.viewportCategory,d=t.isOpen,u=t.navigate,m=t.route,v=t.actorForUrl,b=t.clusterId,f=t.maxVideoHeight,g=t.sponsorship,_=a.object,k=si(a)?void 0:o.createElement(Ue.Content,{key:"topNote"},o.createElement("div",{className:"social-sections-VideoSection__video_not_available_message--1Yga7"},Object(O.localize)("upload_video_processing_copy"))),S=Object(j.featureIsEnabled)("social_boosting_enabled")&&l&&l.canBoostContent?o.createElement(F.BoostAction,{socialObjectRef:{type:"VIDEO",id:a.object.id},socialStatistics:a.object.socialStatistics,typename:a.object.__typename}):null,y=o.createElement(P.MemberEventOnObjectBlock,{objectEventType:"onVideo",object:a.object,member:i,actor:n,deleteObject:t.deleteObject,untagObject:t.untagObject,loggedInUserId:t.loggedInUserId,isEmbedded:r,viewportCategory:s}),R=o.createElement(F.SocialActionBar,null,o.createElement(F.NestedSocialAction,{padRight:!0},o.createElement(F.LikeAction,{item:a.object}),Object(j.featureIsEnabled)("trips_save_ugc_videos")&&o.createElement(F.SaveAction,{object:{__typename:a.object.__typename,id:a.object.id},displayStyle:"icon+text"})),o.createElement(F.NestedSocialAction,null,o.createElement(L.RepostAction,{modalName:"repost_video_".concat(a.object.id),repostPreviewProps:{feedSectionItem:a,member:i,actor:n},actor:n,socialStatistics:a.object.socialStatistics}),Object(j.featureIsEnabled)("social_ugc_share")&&a.object.route&&a.object.route.url?o.createElement(N.ShareCta,{url:"".concat(a.object.route.url),itemType:"Video",itemId:a.object.id,styleAsSocialAction:!0,alignEdge:"right"}):o.createElement(F.DisabledSocialAction,{actionType:"Share"}),S)),T=function e(){return o.createElement("div",{className:"social-sections-VideoSection__ctaLine--2Cd5u"},o.createElement("span",{className:"social-sections-VideoSection__cta--2ntbp"},Object(O.localize)("common_Read_more")),o.createElement(h.Icon,{name:"caret-down"}))},M=d?void 0:function(e,t){e&&(ii.a.set("VideoFullscreenFromFeedDate",Date.now()),u(E()({},m,{modal:"Video_".concat(a.object.id),username:v&&v.username||a.object.userProfile.username})),t())},A=Object($t.getVideoTrackingModule)(m),D=[o.createElement(Ue.Content,{fullWidth:!0,key:"video"},o.createElement(ui,{actor:n,video:a,isOpen:d,deleteObject:t.deleteObject,untagObject:t.untagObject,onClick:M,trackingModule:A,onClose:function e(){return u(m,{reset:!0})},maxVideoHeight:f})),o.createElement(Ue.Content,{key:"caption"},_.caption&&o.createElement("div",{className:"social-sections-VideoSection__title_description--M6tDp"},o.createElement(p.InteractionLogger,null,function(e){return o.createElement("div",{className:"social-sections-VideoSection__caption--6EYXC",onClick:function t(i){return e(i,"feedClick")}},"MOBILE"===s&&_.caption.length>160?o.createElement(I.ReadMore,{numLinesToShow:3,cta:T(),ctaNewline:!0},o.createElement(C.Linkify,{text:_.caption,socialReferences:_.socialReferences,useSpan:!0,onLinkReferenceClick:function t(i,o){e(i,"linkReferenceClick",{authorUserId:n.userId,url:o})}})):o.createElement(C.Linkify,{text:_.caption,socialReferences:_.socialReferences,useSpan:!0,onLinkReferenceClick:function t(i,o){e(i,"linkReferenceClick",{authorUserId:n.userId,url:o})}}))})))];return o.createElement(Ue,{isSingleObject:c,isEmbedded:r,topNote:k,header:y,content:D,socialStatistics:a.object.socialStatistics,socialActionBar:R,pois:a.object.orderedLocations,cardRef:{type:a.object.__typename,id:a.object.id},socialProofParams:{displayName:Object(w.getDisplayName)(n)},clusterId:b,sponsorship:g})},pi=function e(t){return o.createElement(l.RouteConsumer,null,function(e){var i=e.route,n=i.modal,a=Zt()(i,["modal"]),c=e.navigate;return t.video.object&&o.createElement(mi,ne()({key:"vs_".concat(t.video.object.id),navigate:c,route:a,isOpen:n&&n==="Video_".concat(t.video.object.id)},t))})};pi.defaultProps={isSingleObject:!1,isEmbedded:!1,member:null,actor:null,actorForUrl:void 0,deleteObject:null,loggedInMemberAuthorization:void 0,untagObject:null,loggedInUserId:"",viewportCategory:"",clusterId:void 0,maxVideoHeight:450};var vi=pi,bi=i("@ta/common.decode"),fi=i.n(bi),gi=i("@ta/social.link-preview"),_i=function e(t){var i=t.post,n=t.isSingleObject,a=t.isEmbedded,c=t.member,r=t.actor,l=t.deleteObject,s=t.loggedInMemberAuthorization,d=t.untagObject,u=t.loggedInUserId,m=t.viewportCategory,v=t.clusterId,b=t.sponsorship,f={id:i.object.preview.id,title:i.object.preview.title,description:i.object.preview.description,url:i.object.preview.canonicalUrl,urlDomain:i.object.preview.urlDomain,imgSource:i.object.preview.media&&i.object.preview.media[0]?i.object.preview.media[0].photoSizes:void 0};if(!i||!i.object)return null;var g=o.createElement(o.Fragment,null,o.createElement(P.MemberEventOnObjectBlock,{objectEventType:"onLinkPost",object:i.object,member:c,actor:r,deleteObject:l,untagObject:d,loggedInUserId:u,isEmbedded:a,viewportCategory:m}),i.object.comment&&i.object.comment.length&&o.createElement("div",{key:"comment_".concat(i.object.postId),className:"social-sections-LinkPostSection__comment--8j7yf"},o.createElement(C.Linkify,{text:i.object.comment,socialReferences:i.object.socialReferences}))),_=[o.createElement(Ue.Content,{key:"LinkPost_".concat(i.object.postId),fullWidth:!0},o.createElement(p.InteractionLogger,null,function(e){var t,n,c;return o.createElement(gi.LinkPreview,{linkPreviewState:f,isClickable:!0,onClick:function t(i){return e(i,"feedClick")},delineateContent:a,tightenContent:(null==i?void 0:null===(t=i.object)||void 0===t?void 0:null===(n=t.tags)||void 0===n?void 0:null===(c=n.orderedLocations)||void 0===c?void 0:c.length)?"tighten_bottom":"tighten",border:!1})}))],h=Object(j.featureIsEnabled)("social_boosting_enabled")&&s&&s.canBoostContent?o.createElement(F.BoostAction,{socialObjectRef:{type:"LINK_POST",id:i.object.postId},socialStatistics:i.object.socialStatistics,typename:i.object.__typename}):null,k=o.createElement(F.SocialActionBar,null,o.createElement(F.NestedSocialAction,{padRight:!0},o.createElement(F.LikeAction,{item:i.object,socialObject:{objectType:"LINK_POST",objectId:i.object.postId}}),Object(j.featureIsEnabled)("trips_save_ugc_links")&&o.createElement(F.SaveAction,{object:{__typename:i.object.__typename,postId:i.object.postId},displayStyle:"icon+text"})),o.createElement(F.NestedSocialAction,null,o.createElement(L.RepostAction,{modalName:"repost_".concat(i.object.__typename,"_").concat(i.object.postId),repostPreviewProps:{feedSectionItem:i,member:c,actor:r},actor:r,socialStatistics:i.object.socialStatistics}),Object(j.featureIsEnabled)("social_ugc_share")?o.createElement(N.ShareCta,{url:"".concat(fi()(i.object.preview.canonicalUrl)),itemType:"LinkPost",itemId:i.object.postId,styleAsSocialAction:!0,alignEdge:"right"}):o.createElement(F.DisabledSocialAction,{actionType:"Share"}),h));return o.createElement(Ue,{isSingleObject:n,isEmbedded:a,header:g,content:_,noEmptyCarouselSpace:!0,socialStatistics:i.object.socialStatistics,socialActionBar:k,pois:i.object.tags?i.object.tags.orderedLocations:[],cardRef:{type:i.object.__typename,id:i.object.postId},socialProofParams:{displayName:Object(w.getDisplayName)(r)},clusterId:v,sponsorship:b})};_i.defaultProps={isSingleObject:!1,isEmbedded:!1,member:null,actor:null,deleteObject:null,loggedInMemberAuthorization:void 0,untagObject:null,loggedInUserId:"",viewportCategory:"",clusterId:void 0};var hi=_i,ki=function e(t){var i,n,a,c,r,l,s,d={numPhotos:t.photos.length,caption:null==t?void 0:null===(i=t.metadata)||void 0===i?void 0:i.caption,id:t.metadata.mediaBatchId,socialReferences:t.metadata.socialReferences,socialStatistics:t.metadata.socialStatistics,orderedLocations:t.metadata.orderedLocations,createdDate:t.metadata.created,__typename:t.metadata.__typename,route:t.metadata.route},u={REPORT:t.photos[t.currentlyDisplayedImageIndex]},m=o.createElement(P.MemberEventOnObjectBlock,{objectEventType:"onMediaBatch",member:t.member,object:d,actor:t.actor,deleteObject:t.deleteObject,untagObject:t.untagObject,loggedInUserId:t.loggedInUserId,isEmbedded:"REPOST_NO_MODAL"===t.layout||"REPOST_WITH_MODAL"===t.layout,viewportCategory:t.viewportCategory,overflowMenuObjectForType:u}),v=function e(){return o.createElement("div",{className:"social-sections-MediaBatchPhotoSection__ctaLine--1H9rK"},o.createElement("span",{className:"social-sections-MediaBatchPhotoSection__cta--2QPXv"},Object(O.localize)("common_Read_more")),o.createElement(h.Icon,{name:"caret-down",className:""}))},b=d.caption?d.caption:(null==t?void 0:null===(n=t.photos)||void 0===n?void 0:null===(a=n[t.currentlyDisplayedImageIndex])||void 0===a?void 0:a.caption)||"",f=d.caption?d.socialReferences:null==t?void 0:null===(c=t.photos)||void 0===c?void 0:null===(r=c[t.currentlyDisplayedImageIndex])||void 0===r?void 0:r.socialReferences,g="FULL"===t.layout&&(null==d?void 0:d.socialStatistics)?o.createElement(Be,{stats:null==d?void 0:d.socialStatistics,socialRef:{type:d.__typename,id:"".concat(d.id)},socialProofParams:{displayName:t.actor.displayName},deduplicate:!0}):null,_=o.createElement(F.SocialActionBar,null,o.createElement(F.LikeAction,{item:d,socialObject:{objectType:"MEDIA_BATCH",objectId:"".concat(d.id)}}),o.createElement(F.NestedSocialAction,null,o.createElement(L.RepostAction,{modalName:"repost_".concat(d.__typename,"_").concat(d.id),repostPreviewProps:{feedSectionItem:{object:t.metadata},photos:t.photos,member:t.member,actor:t.actor,actorForUrl:t.actorForUrl,metadata:t.metadata},actor:t.actor,socialStatistics:d.socialStatistics}),Object(j.featureIsEnabled)("social_ugc_share")&&(null==t?void 0:null===(l=t.metadata)||void 0===l?void 0:null===(s=l.route)||void 0===s?void 0:s.url)?o.createElement(N.ShareCta,{url:"".concat(d.route.url),itemType:d.__typename,itemId:"".concat(d.id),styleAsSocialAction:!0,alignEdge:"right"}):o.createElement(F.DisabledSocialAction,{actionType:"Share"}))),k=[o.createElement(Ue.Content,{fullWidth:!0,key:"mediaBatchPhoto"},o.createElement(p.InteractionLogger,null,function(e){return o.createElement(ot,{actor:t.actor,actorForUrl:t.actorForUrl,deleteObject:t.deleteObject,untagObject:t.untagObject,member:t.member,metadata:d,photos:t.photos,currentlyDisplayedIndex:t.currentlyDisplayedImageIndex,onPhotoChange:function i(o,n){o>t.currentlyDisplayedImageIndex&&n&&e(n,"batchGalleryScroll",{slot:o+1,itemCount:d.numPhotos}),t.setCurrentlyDisplayedImageIndex(o)},socialStatisticsBar:g,socialActionBar:_,overflowMenuObject:d,overflowMenuObjectForType:u,includeRoutedModal:"FULL"===t.layout||"REPOST_WITH_MODAL"===t.layout,onCarouselClick:function i(o){e(o,"batchGalleryClick",{slot:t.currentlyDisplayedImageIndex+1,itemCount:d.numPhotos})}})})),o.createElement(Ue.Content,{key:"caption_".concat(d.id)},o.createElement(p.InteractionLogger,null,function(e){return o.createElement("div",{className:"social-sections-MediaBatchPhotoSection__caption--11JpL"},"MOBILE"===t.viewportCategory&&b.length>160?o.createElement(I.ReadMore,{numLinesToShow:3,cta:v(),ctaNewline:!0},o.createElement(C.Linkify,{text:b,socialReferences:f,useSpan:!0,onLinkReferenceClick:function i(o,n){e(o,"linkReferenceClick",{authorUserId:t.actor.userId,url:n})}})):o.createElement(C.Linkify,{text:b,socialReferences:f,useSpan:!0,onLinkReferenceClick:function i(o,n){e(o,"linkReferenceClick",{authorUserId:t.actor.userId,url:n})}}))}))];return o.createElement(Ue,{isSingleObject:t.isSingleObject,isEmbedded:"REPOST_WITH_MODAL"===t.layout||"REPOST_NO_MODAL"===t.layout,header:m,content:k,socialStatistics:d.socialStatistics,socialActionBar:_,pois:function e(){var i,o,n;return(null==d?void 0:null===(i=d.orderedLocations)||void 0===i?void 0:i.length)>0?d.orderedLocations:(null===(o=t.photos)||void 0===o?void 0:null===(n=o[t.currentlyDisplayedImageIndex])||void 0===n?void 0:n.location)?[t.photos[t.currentlyDisplayedImageIndex].location]:[]}(),cardRef:{type:d.__typename,id:"".concat(d.id)},socialProofParams:{displayName:t.actor.displayName},classNames:"",contentClass:"",sponsorship:t.sponsorship})};ki.defaultProps={isSingleObject:!1,member:null,actor:null,actorForUrl:void 0,deleteObject:null,loggedInMemberAuthorization:void 0,untagObject:null,loggedInUserId:null,viewportCategory:void 0,layout:"FULL"};var Si=Object(Ve.connect)(function(e){return{loggedInUserId:e.auth.loggedInUserId,viewportCategory:e.meta.device.viewportCategory}})(ki),Ei=function e(t){var i=o.useState(0),n=$e()(i,2),a=n[0],c=n[1];return o.createElement(Si,ne()({},t,{currentlyDisplayedImageIndex:a,setCurrentlyDisplayedImageIndex:c}))},ji=(i("@ta/trips.trip-types"),i("@ta/trips.social")),yi=i("@ta/trips.trip-byline"),Ni=i.n(yi),Oi=i("@ta/trips.trip-avatars"),Ii=i.n(Oi),Ci=i("@ta/trips.collaboration"),wi=function e(t,i){var a=t&&t.photo&&t.photo.photoSizes,c="MOBILE"!==i?300:176;return a?o.createElement(n.ResponsiveImage,{sources:a,width:"100%",height:"".concat(c,"px")}):o.createElement("div",{className:"social-sections-TripSection__placeholder--czjll",style:{width:"100%",height:c}},o.createElement(h.Icon,{name:"suitcase"}))},Pi=function e(t){var i=t.children,n=t.trip;return o.createElement(p.InteractionLogger,null,function(e){return o.createElement(l.Link,{to:{page:"Trips",tripId:n.object.id,tripTitle:"PUBLIC"===n.object.status?n.object.title:void 0},onClick:function t(i){e(i,"feedClick"),i.stopPropagation()}},i)})},Fi=function e(t){var i=o.createElement(y.TitleBar,{iconName:"users",displayType:"LEFT_ALIGN_GRAY"},o.createElement("span",null,Object(O.localize)("saves_Collaborators")));return o.createElement(R.Modal,{name:t.name,header:i},o.createElement(Ci.CollaboratorPanel,{trip:t.trip,readOnly:!0,avatarNotLazy:!0}))},Li=function e(t){var i=t.member,n=t.actor,a=t.trip,c=t.deleteObject,r=t.untagObject,l=t.loggedInUserId,s=t.isSingleObject,d=t.isEmbedded,u=t.descriptionLength,m=t.viewportCategory,v=t.loggedInMemberAuthorization,b=t.clusterId,f=t.sponsorship,g=a.object.orderedLocations?a.object.orderedLocations:[],_=a.object.items?a.object.items.map(function(e){return e.object}).filter(function(e){return e&&"AttractionProductInformation"===e.__typename}):[],h=g.concat(_),k=o.createElement(P.MemberEventOnObjectBlock,{objectEventType:"onTrip",object:a.object,member:i,deleteObject:c,untagObject:r,loggedInUserId:l,isEmbedded:d,actor:n,viewportCategory:m}),S=Object(ji.TripSocialActionBar)({trip:a,member:i,actor:n,shareType:"PUBLIC",viewportCategory:m,loggedInMemberAuthorization:v,justifyContent:"SPACE_BETWEEN"}),E=o.useRef("collabModal".concat(a.object.id,"_").concat(Math.random())).current,j=o.createElement(Fi,{trip:a.object,name:E}),y=o.createElement(Ii.a,{trip:a.object,avatarSize:"default",tabletAvatarSize:"large"}),N=o.createElement(ae.Opener,{name:E},function(e){return o.createElement(Ni.a,{trip:a.object,linkClassName:"social-sections-TripSection__creator_name--2UYLQ",onExpand:e})}),O=a.object.description,I=void 0===O?"":O,F=u&&I.length>u?"".concat(I.substring(0,u).trim(),"..."):I,L=[o.createElement(Ue.Content,{fullWidth:!0,key:"coverphoto"},o.createElement("div",{className:"social-sections-TripSection__photoContainer--2WlMA"},o.createElement(Pi,{trip:a},wi(a.object,m)),o.createElement("div",{className:"social-sections-TripSection__avatar--192NQ"},y))),o.createElement(Ue.Content,{fullwidth:!0,key:"title",className:"social-sections-TripSection__content--J6Jua"},o.createElement(Pi,{trip:a},o.createElement("div",{className:"social-sections-TripSection__title--36a5q"},a.object.title)),N,j,o.createElement(Pi,{trip:a},o.createElement("div",{className:"social-sections-TripSection__description--17WeV"},o.createElement(p.InteractionLogger,null,function(e){return o.createElement(C.Linkify,{text:F,socialReferences:a.object.socialReferences,useSpan:!0,onLinkReferenceClick:function t(i,o){e(i,"linkReferenceClick",{authorUserId:n.userId,url:o})}})}))))];return o.createElement(Ue,{isSingleObject:s,header:k,content:L,socialActionBar:S,socialStatistics:a.object.socialStatistics,contentClass:"social-sections-TripSection__content--J6Jua",pois:h,isEmbedded:d,cardRef:{type:"Trip",id:a.object.id.toString()},socialProofParams:{displayName:Object(w.getDisplayName)(n)},clusterId:b,sponsorship:f})};Li.defaultProps={isEmbedded:!1,deleteObject:null,untagObject:null,loggedInUserId:"",isSingleObject:!1,descriptionLength:250,loggedInMemberAuthorization:void 0,clusterId:void 0};var Ri=Object(Ve.connect)(function(e,t){return E()({viewportCategory:e.meta.device.viewportCategory},t)})(Li),Ti=function e(t){var i,n,a,c,r,l=t.repost,s=t.isSingleObject,d=t.isEmbedded,u=t.member,m=t.actor,p=t.deleteObject,v=t.loggedInMemberAuthorization,b=t.untagObject,f=t.loggedInUserId,g=t.viewportCategory,_=t.clusterId,h=o.useState(0),k=$e()(h,2),S=k[0],E=k[1];if(!l.object||!l.object.repostedObject)return null;var y=l.object.repostedObject,O=y.__typename,I=y["LinkPost"===O?"postId":"id"],R=l.object.repostedObject.userProfile,T={object:l.object.repostedObject},M=null;switch(O){case"LinkPost":M=o.createElement(hi,{post:T,member:u,isEmbedded:!0,actor:R});break;case"ForumPost":M=o.createElement(Xt,{post:T,member:u,isEmbedded:!0,actor:R});break;case"Video":M=o.createElement(vi,{video:T,member:u,isEmbedded:!0,actor:R,actorForUrl:m,loggedInMemberAuthorization:v});break;case"Review":M=o.createElement(Vt,{review:T,member:u,isEmbedded:!0,actor:R,actorForUrl:m,layout:"REPOST_WITH_MODAL"});break;case"Photo":M=o.createElement(st,{photo:T,member:u,isEmbedded:!0,actor:R,actorForUrl:m,forceShowRoutedModal:!0,layout:"REPOST_WITH_MODAL"});break;case"Trip":Object(j.featureIsEnabled)("trips_2018_home_profile")&&(M=o.createElement(Ri,{trip:T,member:u,isEmbedded:!0,actor:R}));break;case"MediaBatch":var A,D,B,z,x,U,V,H,W=((null==T?void 0:null===(A=T.object)||void 0===A?void 0:A.media)||[]).filter(Boolean);W.length&&(M=o.createElement(Si,{metadata:{__typename:null==T?void 0:null===(D=T.object)||void 0===D?void 0:D.__typename,orderedLocations:null==T?void 0:null===(B=T.object)||void 0===B?void 0:B.orderedLocations,mediaBatchId:null==T?void 0:null===(z=T.object)||void 0===z?void 0:z.mediaBatchId,route:null==T?void 0:null===(x=T.object)||void 0===x?void 0:x.route,socialReferences:null==T?void 0:null===(U=T.object)||void 0===U?void 0:U.socialReferences,socialStatistics:null==T?void 0:null===(V=T.object)||void 0===V?void 0:V.socialStatistics,caption:null==T?void 0:null===(H=T.object)||void 0===H?void 0:H.caption},photos:W,layout:"REPOST_WITH_MODAL",member:u,actor:R,actorForUrl:m,currentlyDisplayedImageIndex:S,setCurrentlyDisplayedImageIndex:E}));break;default:M=null}var G=o.createElement(o.Fragment,null,o.createElement(P.MemberEventOnObjectBlock,{objectEventType:"onRepost",object:l.object,member:u,actor:m,deleteObject:p,untagObject:b,loggedInUserId:f,isEmbedded:d,overflowMenuObjectForType:"MediaBatch"===(null===(i=l.object)||void 0===i?void 0:null===(n=i.repostedObject)||void 0===n?void 0:n.__typename)?{REPORT:null===(a=l.object)||void 0===a?void 0:null===(c=a.repostedObject)||void 0===c?void 0:null===(r=c.media)||void 0===r?void 0:r[S]}:void 0,viewportCategory:g}),l.object.comment&&l.object.comment.length&&o.createElement("div",{className:"social-sections-RepostSection__comment--17aBN"},o.createElement(C.Linkify,{text:l.object.comment,socialReferences:l.object.socialReferences}))),q=[o.createElement(Ue.Content,{fullWidth:!0,key:l.object.repostId},M)],Q={id:l.object.repostId,type:l.object.__typename},X=Object(j.featureIsEnabled)("social_boosting_enabled")&&v&&v.canBoostContent?o.createElement(F.BoostAction,{socialObjectRef:{type:"REPOST",id:Q.id},socialStatistics:l.object.socialStatistics,typename:l.object.__typename}):null,J=o.createElement(F.SocialActionBar,null,o.createElement(F.NestedSocialAction,{padRight:!0},o.createElement(F.LikeAction,{item:l.object,socialObject:{objectType:"REPOST",objectId:Q.id}}),Object(j.featureIsEnabled)("trips_save_ugc_reposts")&&Object(we.isRepostSaveable)(l)&&o.createElement(F.SaveAction,{object:{__typename:l.object.__typename,repostId:l.object.repostId},displayStyle:"icon+text"})),o.createElement(F.NestedSocialAction,null,o.createElement(L.RepostAction,{modalName:"repost_".concat(Q.type,"_").concat(Q.id,"_").concat(I),repostPreviewProps:{feedSectionItem:T,member:u,actor:R},originalRepostReference:Q,actor:m,socialStatistics:l.object.socialStatistics}),Object(j.featureIsEnabled)("social_ugc_share")&&l.object.route&&l.object.route.url?o.createElement(N.ShareCta,{url:"".concat(l.object.route.url),itemType:"Repost",itemId:l.object.repostId,styleAsSocialAction:!0,alignEdge:"right"}):o.createElement(F.DisabledSocialAction,{actionType:"Share"}),X));return M?o.createElement(Ue,{isSingleObject:s,isEmbedded:d,header:G,content:q,socialStatistics:l.object.socialStatistics,socialActionBar:J,pois:[],cardRef:{type:Q.type,id:Q.id},socialProofParams:{displayName:Object(w.getDisplayName)(m)},fullWidth:!0,noEmptyCarouselSpace:"LinkPost"===O,clusterId:_}):null};Ti.defaultProps={isSingleObject:!1,isEmbedded:!1,member:null,deleteObject:null,loggedInMemberAuthorization:void 0,untagObject:null,loggedInUserId:"",viewportCategory:"",clusterId:void 0};var Mi=Ti,Ai=function e(){return o.createElement("div",{className:"ui_card section ".concat("social-sections-ErrorSection__section--33WfM")},o.createElement("span",null,"Profile feed was partially loaded, try refreshing the page again"),o.createElement("span",{style:{paddingLeft:"10px"}},o.createElement("button",{className:"ui_button standard",onClick:function e(t){t.preventDefault(),window.location.reload()}},Object(O.localize)("link_uploader_refresh")," ")))},Di=function e(t){var i=t.object,a=t.getLinkForImage,c=t.onClick,r=t.className,s=i.object.photos,d=s&&s.length-3,u="";if(!s||0===s.length)return null;if(s)switch(s.length){case 1:u=D()("social-sections-SectionThumbnails__flex_item--1NClb","social-sections-SectionThumbnails__use1x1--BTyLz");break;case 2:u=D()("social-sections-SectionThumbnails__flex_item--1NClb","social-sections-SectionThumbnails__use2x1--n0lm7");break;default:u=D()("social-sections-SectionThumbnails__flex_item--1NClb","social-sections-SectionThumbnails__use3x1--3YlIy")}return o.createElement("div",{className:D()("social-sections-SectionThumbnails__flex_grid--3zpfe",r)},s&&s.filter(function(e){return!!e}).slice(0,3).map(function(e,t){var i=o.createElement(o.Fragment,null,2===t&&d>0&&o.createElement("span",{className:"social-sections-SectionThumbnails__hasCTA--3Ti6v"},"+",d),o.createElement(n.ResponsiveImage,{sources:e.photoSizes,width:"100%",height:"128px"}));if(a){var r=a(e);if(r)return o.createElement("div",{key:e.id||t,className:u},o.createElement(l.Link,{href:r,onClick:c},i))}return o.createElement(o.Fragment,{key:e.id||t},o.createElement(ae.Opener,{name:"view_".concat(e.id)},function(e){return o.createElement("div",{className:u,onClick:e},i)}))}))};Di.defaultProps={getLinkForImage:void 0,onClick:void 0,className:void 0};var Bi=Di,zi=function e(t){var i=t.className,n=t.children;return o.createElement("div",{className:"".concat(i," ui_card section")},n)},xi=i("@ta/common.radio"),Ui=i.n(xi),Vi=function e(t){var i=t.photos,a=t.id,c=t.locationId,r=t.totalCount;return i.length<4?null:o.createElement(p.InteractionLogger,null,function(e){return o.createElement("div",{className:"social-sections-geoOverviewExtraParts-GeoOverviewPhotos__photosWrap--MPcVI"},i.map(function(t,i){var l=3===i;if(i<4){var s=l?-1:t.id;return o.createElement("div",{key:t.id,className:"social-sections-geoOverviewExtraParts-GeoOverviewPhotos__photoItem--1fffH",style:{flexBasis:"calc(".concat(50,"% - 2px)")},onClick:function i(o){e(o,"linkedPhotoClick",{mediaId:t.id}),function n(e,t,i,o){var n={detail:e,geo:t,albumViewMode:"grid",updateType:"full",albumId:i,filter:7};o>0&&(n.ff=o,n.baseMediaId=o,n.albumViewMode="hero"),Ui()("responsive-photoviewer").emit("load",n)}(c,c,a,s)}},o.createElement(n.ResponsiveImage,{sources:t.photoSizes,height:"100%",width:"100%"}),l?function e(t){return o.createElement("div",{className:"social-sections-geoOverviewExtraParts-GeoOverviewPhotos__shadowOver--dXrj7"},o.createElement("div",{className:"social-sections-geoOverviewExtraParts-GeoOverviewPhotos__countText--1oMI3"},"+ ",O.globalize.formatNumber("integer",t)))}(r):null)}return null}))})},Hi=function e(t){var i=t.overview;if(!i||!i.object)return null;var n=i.object.geo&&i.object.geo.albums&&i.object.geo.albums.length>0?i.object.geo.albums[0]:null,a=i.object.geo&&i.object.geo.dmoPlacementInfo&&i.object.geo.dmoPlacementInfo.album?i.object.geo.dmoPlacementInfo.album.photos:null;return o.createElement("div",{className:"".concat("social-sections-GeoOverviewSection__section--n7hF8"," ui_card")},o.createElement("div",{className:"social-sections-GeoOverviewSection__header--zogLR"},o.createElement("h1",{id:"HEADING"},o.createElement("span",{className:"ui_header h2"},function e(t){return t&&t.additionalNames&&t.additionalNames.longParentAbbreviated?Object(O.localize)("about_geo",{sGeo:t.additionalNames.longParentAbbreviated}):Object(O.localize)("hr_tabs_overview_tab_fffff660")}(i.object.geo)," "))),i.object.geoOverview&&o.createElement(o.Fragment,null,o.createElement("div",{className:"".concat("social-sections-GeoOverviewSection__container--3_uMq"," ui_container")},o.createElement(p.InteractionLogger,null,function(e){return o.createElement(Y.TabActiveContext.Consumer,null,function(t){return o.createElement(I.ReadMore,{numLinesToShow:4,collapsible:!0,ctaNewline:!0,collapsed:!t||t.isActive,cta:o.createElement(o.Fragment,null,o.createElement("span",{className:"social-sections-GeoOverviewSection__ellipsis--1zeRK"}),o.createElement("div",{className:"social-sections-GeoOverviewSection__readMore--3U3Ht",onClick:function t(i){return e(i,"feedClick")}},o.createElement("span",null,Object(O.localize)("tavrs_common_show_more")),o.createElement(h.Icon,{name:"caret-down",className:"social-sections-GeoOverviewSection__icon--36rU9"}))),ctaCollapse:o.createElement("div",{className:"social-sections-GeoOverviewSection__readMore--3U3Ht"},o.createElement("span",null,Object(O.localize)("tavrs_common_show_less")),o.createElement(h.Icon,{name:"caret-up",className:"social-sections-GeoOverviewSection__icon--36rU9"})),key:i.object.id},o.createElement("span",null,Object(O.unescaped)(i.object.geoOverview)))})}))),n?o.createElement(Vi,ne()({},n,{photos:[].concat(be()(a||[]),be()(n.photos||[]))})):null)},Wi=function e(t){var i=t.title;return o.createElement("div",{className:"".concat("social-sections-HeaderSection__section--125AG"," h2")},i)},Gi=i("@ta/social.in-destination"),qi=i("@ta/styleguide.button"),Qi=i.n(qi),Xi=function e(t){var i=t.item;return o.createElement("div",{className:"ui_card ".concat("social-sections-LocationPermissionSection__container--lH1LU")},o.createElement("div",{className:"ui_container"},o.createElement("div",{className:"social-sections-LocationPermissionSection__header--30nAP"},i.title),o.createElement("div",{className:"social-sections-LocationPermissionSection__body--3VERn"},i.text),o.createElement("div",null,o.createElement(Gi.InDestinationRedirect,null,function(e){return o.createElement(Qi.a,{type:"secondary",onClick:e},o.createElement("div",null,o.createElement(h.Icon,{name:"nearby-fill",className:"social-sections-LocationPermissionSection__icon--1CRqD"}),o.createElement("span",null,i.button)))}))))};i.d(t,"LocationSectionPhotoWrap",function(){return c}),i.d(t,"LocationSection",function(){return f}),i.d(t,"DmoSectionPhotoWrap",function(){return _}),i.d(t,"NoDmoPhotoAvailable",function(){return k}),i.d(t,"PhotoSection",function(){return st}),i.d(t,"PhotoSocialActionBar",function(){return rt}),i.d(t,"PhotoSocialStatistics",function(){return ct}),i.d(t,"UgcActionSection",function(){return dt.a}),i.d(t,"SocialUgcActionSection",function(){return bt}),i.d(t,"ProfileSection",function(){return kt}),i.d(t,"ProfileQuery",function(){return It}),i.d(t,"ProfileSectionNarrow",function(){return Mt}),i.d(t,"ReviewSection",function(){return Vt}),i.d(t,"ForumsListLayout",function(){return Wt}),i.d(t,"ForumsListSection",function(){return qt}),i.d(t,"ForumPostSection",function(){return Xt}),i.d(t,"VideoSection",function(){return vi}),i.d(t,"FULLSCREEN_FROM_FEED_DATE_LOCAL_STORAGE_KEY",function(){return"VideoFullscreenFromFeedDate"}),i.d(t,"LinkPostSection",function(){return hi}),i.d(t,"MediaBatchPhotoSection",function(){return Si}),i.d(t,"ManagedMediaBatchSection",function(){return Ei}),i.d(t,"RepostSection",function(){return Mi}),i.d(t,"ErrorSection",function(){return Ai}),i.d(t,"TripSection",function(){return Ri}),i.d(t,"SocialStatisticsBar",function(){return Be}),i.d(t,"VideoSidebar",function(){return ri}),i.d(t,"VideoPlayerAndSidebar",function(){return ui}),i.d(t,"SocialProofModal",function(){return Ae}),i.d(t,"ReasonForCrust",function(){return xt}),i.d(t,"SectionModal",function(){return Ze}),i.d(t,"SectionModalHeader",function(){return Ke}),i.d(t,"SectionThumbnails",function(){return Bi}),i.d(t,"SocialSection",function(){return zi}),i.d(t,"GeoOverviewSection",function(){return Hi}),i.d(t,"HeaderSection",function(){return Wi}),i.d(t,"SponsoredCrust",function(){return ze}),i.d(t,"LocationPermissionSection",function(){return Xi})},"./roots/social/profile/ProfileBasicFields.fragment.gql":function(e,t,i){"use strict";var o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ProfileBasicFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MemberProfile"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"userId"},name:{kind:"Name",value:"id"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"static"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isMe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isVerified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isFollowing"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"externallyConnectedAccountTypes"},arguments:[],directives:[]}]}}],loc:{start:0,end:163}};o.loc.source={body:"716324cd6168"},t.a=o}}});
//# sourceMappingURL=social.sections.ebd1182d59.js.map