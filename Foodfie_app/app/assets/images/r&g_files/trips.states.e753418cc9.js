(window.$WP=window.$WP||[]).push({id:"@ta/trips.states",d:["vendor-babel","vendor-react-libs","ta-platform","ta-common","@ta/social.login-gate","@ta/overlays.fullscreen-overlay","@ta/overlays.modal","@ta/overlays.managers","@ta/trips.tracking"],e:["./packages/trips/states/index.jsx"],x:{"./packages/trips/states/index.jsx":["FinishedLoading","LoggedOut","LoggedOutControlled","LoggedOutGates","TripsLink"]},m:{"./packages/trips/states/index.jsx":function(e,t,n){"use strict";n.r(t);var o=n("@babel/runtime/helpers/esm/objectSpread"),r=n.n(o),a=n("@babel/runtime/helpers/esm/classCallCheck"),i=n.n(a),s=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),l=n.n(s),c=n("@babel/runtime/helpers/esm/getPrototypeOf"),u=n.n(c),d=n("@babel/runtime/helpers/esm/createClass"),g=n.n(d),m=n("@babel/runtime/helpers/esm/inherits"),p=n.n(m),f=n("react"),h=function(e){function t(e){var n;return i()(this,t),(n=l()(this,u()(t).call(this,e))).state={deferCallback:!1,isMounted:!1},n}return p()(t,e),g()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,n){return t.loading?r()({},n,{hasEverFinishedLoading:!0}):r()({},n)}}]),g()(t,[{key:"componentDidMount",value:function e(){this.state.deferCallback&&!this.props.loading?(this.props.onFinishedLoading(),this.setState({deferCallback:!1,isMounted:!0})):this.setState({isMounted:!0})}},{key:"componentDidUpdate",value:function e(t){this.state.isMounted&&t.loading&&!this.props.loading&&this.props.onFinishedLoading()}},{key:"render",value:function e(){return null}}]),t}(f.Component),v=n("@ta/common.i18n"),_=n("@ta/common.cdn"),L=n("@ta/common.classnames"),b=n.n(L),E=n("@ta/styleguide.button"),C=n.n(E),O=n("@ta/social.login-gate"),k=function e(t){var n=t.onLoginClicked,o=t.onLoginFlowComplete,r=t.joinGate,a=t.loginGate;return f.createElement("div",{className:"trips-states-LoggedOut__logged_out_container--F5Lt3"},f.createElement("div",{className:"trips-states-LoggedOut__section_one--1KfiC"},f.createElement(_.CdnImage,{className:"trips-states-LoggedOut__ta_logo--1W_4f",src:"/img2/branding/rebrand/TA_logo_primary.svg"}),f.createElement("div",{className:b()("trips-states-LoggedOut__say_hello--3GwZQ","trips-states-LoggedOut__header--3O85O")},Object(v.localize)("logged_out_home_hello_trips")),f.createElement("div",{className:"trips-states-LoggedOut__text--2jEJn"},Object(v.localize)("logged_out_home_trips_give")),f.createElement(C.a,{type:"primary",size:"fullwidth",onClick:function e(){n&&n(),r().then(o)}},Object(v.localize)("empty_trip_home_get_started")),f.createElement("a",{className:b()("trips-states-LoggedOut__log_in--2BMVJ","ui_link"),onClick:function e(){n&&n(),a().then(o)}},Object(v.localize)("trips_log_in_now"))),f.createElement("div",{className:"trips-states-LoggedOut__section_two--3OHWQ"}))},y=function e(t){var n=t.onLoginSuccess,o=t.children;return f.createElement(O.SocialLoginGate,{flowOrigin:"login",pid:40439,onLoginSuccess:n},function(e){return f.createElement(O.SocialLoginGate,{flowOrigin:"join",pid:40439,onLoginSuccess:n},function(t){return o(t,e)})})},w=function e(t){var n=t.onLoginFlowComplete;return f.createElement(y,null,function(e,t){return f.createElement(k,{onLoginFlowComplete:n,joinGate:e,loginGate:t})})},F={onLoginClicked:void 0,onLoginFlowComplete:void 0};w.defaultProps=F,k.defaultProps=F,y.defaultProps={onLoginSuccess:void 0};var j=n("@babel/runtime/helpers/esm/assertThisInitialized"),S=n.n(j),G=n("@babel/runtime/helpers/esm/defineProperty"),M=n.n(G),I=n("react-redux"),x=n("@ta/overlays.fullscreen-overlay"),N=n.n(x),P=n("@ta/overlays.modal"),T=n("@ta/overlays.managers"),z=n("@ta/trips.tracking"),W=n("@ta/common.routing"),B=function(e){function t(){var e,n;i()(this,t);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(r))),M()(S()(S()(n)),"state",{show:!1}),n}return p()(t,e),g()(t,[{key:"renderInner",value:function e(t,n){var o=this,r=this.props,a=r.isLoggedIn,i=r.isMobile,s=r.loggedInElement,l=r.loggedOutElement;return f.createElement(z.TripInteraction,{source:"trips"},function(e){var r=function t(){return e({elementClick:{element:i?"mw_trips":"mastheadCta"}})};if(a)return f.createElement("span",{onClick:r},s);var c=f.createElement("div",{className:"modal-container"},f.createElement(W.RouteConsumer,null,function(e){var o=e.navigate;return f.createElement(k,{joinGate:t,loginGate:n,onLoginFlowComplete:function e(){return o({page:"Trips",login:!0})}})}));return f.createElement(f.Fragment,null,i?f.createElement(f.Fragment,null,l(function(){r(),o.setState({show:!0})}),o.state.show&&f.createElement(N.a,{closeButton:!0,onClose:function e(){return o.setState({show:!1})}},c)):f.createElement(f.Fragment,null,f.createElement(T.Opener,{name:"trip-link-widget-modal"},function(e){return l(function(){r(),e()})}),f.createElement(P.Modal,{name:"trip-link-widget-modal",isFullBleed:!0,closeXColorVariant:"WHITE"},c)))})}},{key:"render",value:function e(){var t=this;return f.createElement(y,null,function(e,n){return t.renderInner(e,n)})}}]),t}(f.Component),D=Object(I.connect)(function(e,t){return r()({isLoggedIn:e.auth.isMember,isMobile:"MOBILE"===e.meta.device.viewportCategory},t)})(B);n.d(t,"FinishedLoading",function(){return h}),n.d(t,"LoggedOut",function(){return w}),n.d(t,"LoggedOutControlled",function(){return k}),n.d(t,"LoggedOutGates",function(){return y}),n.d(t,"TripsLink",function(){return D})}}});
//# sourceMappingURL=trips.states.e753418cc9.js.map