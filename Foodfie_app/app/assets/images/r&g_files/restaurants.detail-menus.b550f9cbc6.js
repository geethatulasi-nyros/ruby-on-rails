(window.$WP=window.$WP||[]).push({id:"@ta/restaurants.detail-menus",d:["vendor-babel","vendor-react-libs","ta-common","ta-platform","@ta/styleguide.tagcloud","@ta/overlays.modal","@ta/overlays.managers","@ta/overlays.headers","@ta/restaurants.tracking"],e:["./packages/restaurants/detail-menus/index.jsx"],x:{"./packages/restaurants/detail-menus/index.jsx":["FullMenu","AbridgedMenu","validateMenu"]},m:{"./packages/restaurants/detail-menus/index.jsx":function(e,t,n){"use strict";n.r(t);var a=n("@babel/runtime/helpers/esm/classCallCheck"),r=n.n(a),l=n("@babel/runtime/helpers/esm/createClass"),i=n.n(l),s=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),u=n.n(s),c=n("@babel/runtime/helpers/esm/getPrototypeOf"),m=n.n(c),o=n("@babel/runtime/helpers/esm/inherits"),d=n.n(o),_=n("@babel/runtime/helpers/esm/assertThisInitialized"),p=n.n(_),b=n("@babel/runtime/helpers/esm/defineProperty"),v=n.n(b),h=n("react"),E=n("@ta/styleguide.loading"),g=n("@ta/styleguide.button"),f=n.n(g),M=n("@ta/common.i18n"),y=n("@ta/styleguide.tagcloud"),k=function e(t){return h.createElement("div",null,t.prices&&t.prices.length>0&&h.createElement("div",{className:"restaurants-detail-menus-MenuEntry__menuPrice--3nIEs"},t.prices.map(function(e,t){return h.createElement("div",{key:t},e.title," ",e.unit,e.price)})),h.createElement("div",{className:"restaurants-detail-menus-MenuEntry__menuDetail--3kYk2"},h.createElement("div",{className:"restaurants-detail-menus-MenuEntry__menuTitle--Mifaa"},t.title),h.createElement("div",{className:"restaurants-detail-menus-MenuEntry__menuDesc--22aQ3"},t.description)),h.createElement("div",{className:"restaurants-detail-menus-MenuEntry__menuClear--3pC1l"}))},T=function e(t){return h.createElement(h.Fragment,null,t.content.map(function(e,t){return h.createElement("div",{key:t,className:"restaurants-detail-menus-MenuEntryList__menuItemContainer--1YSWR"},h.createElement(k,e))}))},N=function e(t){return h.createElement("div",null,t.sections.map(function(e,t){return null==e.sections||0===e.sections.length?h.createElement("div",{key:t},h.createElement("div",{className:"restaurants-detail-menus-FullMenuTab__menuSectionTitle--5-2ww"},e.title.toUpperCase()),h.createElement("div",{key:t,className:"restaurants-detail-menus-FullMenuTab__menuSectionDesc--2DJL7"},e.description),h.createElement(T,{content:e.items})):e.sections.map(function(t,n){return h.createElement("div",{key:n},h.createElement("div",{className:"restaurants-detail-menus-FullMenuTab__menuSectionTitle--5-2ww"},e.title.toUpperCase()),h.createElement("div",{key:n,className:"restaurants-detail-menus-FullMenuTab__menuSectionDesc--2DJL7"},e.description),h.createElement(T,{content:t.items}))})}))},D=function(e){function t(e){var n;return r()(this,t),n=u()(this,m()(t).call(this,e)),v()(p()(p()(n)),"switchToMenuTab",function(e){n.setState({selectedMenuTabItem:e})}),v()(p()(p()(n)),"menuTabItems",function(e){var t=[];return e.menu.forEach(function(e){t.push({value:e.title,label:e.title})}),t}),v()(p()(p()(n)),"selectedMenuTab",function(e){var t=n.props.menu[0];return n.props.menu.forEach(function(n){n.title===e&&(t=n)}),t}),n.state={selectedMenuTabItem:n.menuTabItems(e)[0].value},n}return d()(t,e),i()(t,[{key:"render",value:function e(){return h.createElement("div",null,h.createElement(y.TagCloud,{selectedTag:this.state.selectedMenuTabItem,tags:this.menuTabItems(this.props),onSelect:this.switchToMenuTab}),h.createElement("div",{className:"restaurants-detail-menus-FullMenuTabList__menuEntries--2GeMX"},h.createElement(N,this.selectedMenuTab(this.state.selectedMenuTabItem))))}}]),t}(h.Component),F={loading:"restaurants-detail-menus-FullMenu__loading--1zN7v",error_block:"restaurants-detail-menus-FullMenu__error_block--2HCRj",error_heading:"restaurants-detail-menus-FullMenu__error_heading--rMyHo",error_body:"restaurants-detail-menus-FullMenu__error_body--2Mf-t",divider:"restaurants-detail-menus-FullMenu__divider--DvBv5",attribution:"restaurants-detail-menus-FullMenu__attribution--2wUk3"},w=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return n=u()(this,(e=m()(t)).call.apply(e,[this].concat(l))),v()(p()(p()(n)),"state",{loading:!0,menuData:null}),v()(p()(p()(n)),"retry",function(){n.setState({loading:!0}),n.fetchFullMenuData()}),v()(p()(p()(n)),"fetchFullMenuData",function(){fetch("/data/1.0/restaurant/".concat(n.props.locationId,"/fullmenu"),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){n.setState({menuData:e,loading:!1})}).catch(function(){n.setState({loading:!1})})}),v()(p()(p()(n)),"errorMessage",function(){return h.createElement("div",{className:F.error_block},h.createElement("p",{className:F.error_heading},Object(M.localize)("social_loading_error_1")," "),h.createElement("p",{className:F.error_body},Object(M.localize)("soical_loading_error_2")," "),h.createElement(f.a,{onClick:n.retry,type:"primary",size:"large"},h.createElement("span",null,Object(M.localize)("mobile_try_again")," ")))}),n}return d()(t,e),i()(t,[{key:"componentDidMount",value:function e(){this.fetchFullMenuData()}},{key:"render",value:function e(){if(this.state.loading)return h.createElement("div",{className:F.loading},h.createElement(E.LoadingBubbles,null));if(null===this.state.menuData||void 0===this.state.menuData)return this.errorMessage();var t=this.state.menuData;return h.createElement("div",null,h.createElement("div",null,h.createElement(D,t)),h.createElement("div",{className:F.divider}),h.createElement("div",{className:F.attribution},h.createElement("a",{href:t.attribution_link,target:"_blank"},h.createElement("img",{src:t.attribution_image}))))}}]),t}(h.Component),C=n("@ta/common.api"),I=n("@ta/overlays.modal"),A=n("@ta/overlays.managers"),j=n("@ta/overlays.headers"),O=n("@ta/restaurants.tracking"),S=n("@ta/common.radio"),z=n.n(S),x=n("@ta/styleguide.icon"),L=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];return n=u()(this,(e=m()(t)).call.apply(e,[this].concat(l))),v()(p()(p()(n)),"menuRadio",new z.a("restaurant-detail-menu")),n}return d()(t,e),i()(t,[{key:"componentDidMount",value:function e(){this.menuRadio.on("open-menu-clicked",this.props.open)}},{key:"componentWillUnmount",value:function e(){this.menuRadio.off("open-menu-clicked",this.props.open)}},{key:"render",value:function e(){return h.createElement("span",null,h.createElement(x.Icon,{name:"menu",className:"restaurants-detail-menus-MenuOpener__showFullMenuIcon--38yDT"}),h.createElement("a",{className:"restaurants-detail-menus-MenuOpener__showFullMenuLink--2foQ-",onClick:this.props.open},Object(M.localize)("restaurants_show_full_menu")))}}]),t}(h.PureComponent),R=function e(t){return t&&t.menu&&t.menu.length>0},P=Object(C.bind)(function(e,t){var n=e.page.detailId,a=t("/data/1.0/restaurant/".concat(n,"/menus")),r={attribution_image:"",attribution_link:"",menu:[]};return function(){var t=a.get().data;return{locationId:n,viewportCategory:e.meta.device.viewportCategory,menuData:t&&t.providerMenuData||r}}})(function e(t){return R(t.menuData)?h.createElement(h.Fragment,null,h.createElement(A.Opener,{name:"menu-modal"},function(e){return h.createElement(O.RDetailClickTracker,{action:"menu_click_showfull"},h.createElement("div",{className:"restaurants-detail-menus-AbridgedMenu__wrapperDiv--3FJO_",onClick:e,"data-tab":"TABS_MENU"},h.createElement("div",{className:"restaurants-detail-menus-AbridgedMenu__innerDiv--oinev"},h.createElement("h2",{className:"restaurants-detail-menus-AbridgedMenu__menuText--2ncyO"},Object(M.localize)("mob_menu_header_title_147b")),h.createElement("div",{className:"restaurants-detail-menus-AbridgedMenu__divider--3Hgii"}),h.createElement("div",{className:"restaurants-detail-menus-AbridgedMenu__abridgedMenuContainer--2v0ir"},h.createElement(N,t.menuData.menu[0])),h.createElement("div",{className:"restaurants-detail-menus-AbridgedMenu__divider--3Hgii"}),h.createElement("div",{className:"restaurants-detail-menus-AbridgedMenu__showFullMenuSpan--3-UIB"},h.createElement(L,{open:e})))))}),h.createElement(I.Modal,{name:"menu-modal",header:h.createElement(j.TitleBar,{displayType:"LEFT_ALIGN_GRAY"},Object(M.localize)("mob_menu_header_title_147b")," ")},h.createElement("div",{className:"restaurants-detail-menus-AbridgedMenu__fullMenu--3yS1G"},h.createElement(w,{locationId:t.locationId})))):null});n.d(t,"FullMenu",function(){return w}),n.d(t,"AbridgedMenu",function(){return P}),n.d(t,"validateMenu",function(){return R})}}});
//# sourceMappingURL=restaurants.detail-menus.b550f9cbc6.js.map