(window.$WP=window.$WP||[]).push({id:"@ta/social.in-destination",d:["vendor-react-libs","vendor-apollo-libs","@ta/common.geolocation","ta-platform","@ta/overlays.managers","@ta/overlays.slide-in"],e:["./packages/social/in-destination/index.jsx"],x:{"./packages/social/in-destination/index.jsx":["InDestinationRedirect","SetOnTrip","InDestinationSlideUpPrompt"]},m:{"./packages/social/in-destination/index.jsx":function(e,n,i){"use strict";i.r(n);var a=i("react"),t=i("react-apollo"),o=i("react-redux"),d=i("@ta/common.geolocation"),l=i("@ta/common.i18n"),r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"TrackGeoIdByLatLong"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"latitude"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"longitude"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trackGeoIdByLatLong"},arguments:[{kind:"Argument",name:{kind:"Name",value:"latitude"},value:{kind:"Variable",name:{kind:"Name",value:"latitude"}}},{kind:"Argument",name:{kind:"Name",value:"longitude"},value:{kind:"Variable",name:{kind:"Name",value:"longitude"}}}],directives:[]}]}}],loc:{start:0,end:138}};r.loc.source={body:"c7c9d41d0237"};var u=r,c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetUserOnTrip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"taUnique"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isOnTrip"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateInsightProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"request"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"ObjectField",name:{kind:"Name",value:"taUnique"},value:{kind:"Variable",name:{kind:"Name",value:"taUnique"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"profile"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"onTripConfirmations"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"isOnTrip"},value:{kind:"Variable",name:{kind:"Name",value:"isOnTrip"}}}]}}]}}]}}],directives:[]}]}}],loc:{start:0,end:249}};c.loc.source={body:"bc4dc0485996"};var m=c,s=Object(o.connect)(function(e){return{userId:e.auth.loggedInUserId,taUnique:e.meta.taUnique}})(function e(n){var i=n.userId,o=n.taUnique,r=n.isOnTrip,c=n.children,s=function e(n){Object(d.requestLocation)(function(e,i){n(e,i,function(){window.location="/?latitude=".concat(encodeURIComponent("".concat(e)),"&longitude=").concat(encodeURIComponent("".concat(i))).concat(r?"&isNearby=true":"")})},function(){alert(Object(l.localize)("mw_js_positionPermissionDenied")),window.location="/Home"})};return r?a.createElement(t.Mutation,{mutation:m},function(e){return a.createElement(t.Mutation,{mutation:u},function(n){return c(function(){s(function(a,t,d){e({variables:{userId:i,taUnique:o,isOnTrip:!0}}).then(function(){n({variables:{latitude:a,longitude:t}}).then(d)})})})})}):a.createElement(t.Mutation,{mutation:u},function(e){return c(function(){s(function(n,i,a){e({variables:{latitude:n,longitude:i}}).then(a)})})})}),k=Object(o.connect)(function(e){return{userId:e.auth.loggedInUserId,taUnique:e.meta.taUnique}})(function e(n){var i=n.userId,o=n.taUnique,d=n.isOnTrip,l=n.children;return a.createElement(t.Mutation,{mutation:m},function(e){return l(function(){e({variables:{userId:i,taUnique:o,isOnTrip:d}})})})}),v=i("@ta/overlays.managers"),p=i("@ta/overlays.slide-in"),b=i.n(p),f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUsername"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"loggedInUserId"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"memberProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"loggedInUserId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:115}};f.loc.source={body:"9585d1d41233"};var N=f,g=Object(o.connect)(function(e){return{loggedInUserId:e.auth.loggedInUserId}})(function e(n){var i=n.loggedInUserId;return a.createElement(t.Query,{errorPolicy:"all",query:N,variables:{loggedInUserId:i}},function(e){var n=e.data,i=null;return n&&n.memberProfile&&(i=n.memberProfile.username),a.createElement(a.Fragment,null,a.createElement(b.a,{name:"in-destination-prompt",hideX:!0,noBackdrop:!0,slideFrom:"bottom",transitionDuration:1e3},function(e){return a.createElement("div",{className:"social-in-destination-InDestinationSlideUpPrompt__prompt--33teg"},a.createElement("div",{className:"social-in-destination-InDestinationSlideUpPrompt__title--cyV0G"},i?Object(l.localize)("in_destination_prompt_hey_user",{sUsername:i}):Object(l.localize)("in_destination_prompt_hey_there")),a.createElement("div",{className:"social-in-destination-InDestinationSlideUpPrompt__body--1X8cE"},Object(l.localize)("in_destination_prompt_on_trip_now")),a.createElement("div",null,a.createElement(s,{isOnTrip:!0},function(n){return a.createElement("span",{className:"social-in-destination-InDestinationSlideUpPrompt__button--h3cML",onClick:function i(){e(),n()}},Object(l.localize)("in_destination_prompt_yes_i_am"))}),a.createElement(k,{isOnTrip:!1},function(n){return a.createElement("span",{className:"social-in-destination-InDestinationSlideUpPrompt__button--h3cML",onClick:function i(){n(),e()}},Object(l.localize)("in_destination_prompt_no_not_yet"))})))}),a.createElement(v.AutoOpener,{name:"in-destination-prompt",openLayerCheck:function e(){return!0},markAsCheckedCallback:function e(){}}))})});i.d(n,"InDestinationRedirect",function(){return s}),i.d(n,"SetOnTrip",function(){return k}),i.d(n,"InDestinationSlideUpPrompt",function(){return g})}}});
//# sourceMappingURL=social.in-destination.13a8bfdd14.js.map