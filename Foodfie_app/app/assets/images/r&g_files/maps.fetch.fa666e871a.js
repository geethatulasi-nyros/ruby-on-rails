(window.$WP=window.$WP||[]).push({id:"@ta/maps.fetch",d:["vendor-babel","vendor-react-libs"],e:["./packages/maps/fetch/Fetch.jsx"],x:{"./packages/maps/fetch/Fetch.jsx":["default"]},m:{"./packages/maps/fetch/Fetch.jsx":function(e,t,r){"use strict";r.r(t);var n=r("@babel/runtime/helpers/esm/classCallCheck"),s=r.n(n),a=r("@babel/runtime/helpers/esm/createClass"),i=r.n(a),u=r("@babel/runtime/helpers/esm/possibleConstructorReturn"),o=r.n(u),l=r("@babel/runtime/helpers/esm/getPrototypeOf"),c=r.n(l),h=r("@babel/runtime/helpers/esm/inherits"),p=r.n(h),d=r("@babel/runtime/helpers/esm/assertThisInitialized"),m=r.n(d),f=r("@babel/runtime/helpers/esm/defineProperty"),b=r.n(f),v=function(e){function t(){var e,r;s()(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=o()(this,(e=c()(t)).call.apply(e,[this].concat(a))),b()(m()(m()(r)),"state",{loading:!0,data:null,error:null}),b()(m()(m()(r)),"currentRequest",void 0),r}return p()(t,e),i()(t,[{key:"componentDidMount",value:function e(){this.doFetch(this.props.url)}},{key:"componentDidUpdate",value:function e(t){this.props.url!==t.url&&this.doFetch(this.props.url)}},{key:"componentWillUnmount",value:function e(){this.currentRequest=null}},{key:"parseData",value:function e(t,r){return this.props.parser?this.props.parser(t,r):t}},{key:"doFetch",value:function e(t){var r=this,n=fetch(t,{credentials:"same-origin"});this.currentRequest=n,this.currentRequest.then(function(e){if(e.status>=200&&e.status<300)return Promise.resolve(e);var t=new Error(e.statusText||e.status);return Promise.reject(t)}).then(function(e){return e.json()}).then(function(e){return n===r.currentRequest&&r.setState({loading:!1,data:r.parseData(e,null),error:void 0})}).catch(function(e){return n===r.currentRequest&&r.setState({loading:!1,data:r.parseData(null,e),error:e})}),this.setState({loading:!0})}},{key:"render",value:function e(){return this.props.children({loading:this.state.loading,data:this.state.data,error:this.state.error})}}]),t}(r("react").PureComponent);b()(v,"defaultProps",{parser:void 0}),t.default=v}}});
//# sourceMappingURL=maps.fetch.fa666e871a.js.map