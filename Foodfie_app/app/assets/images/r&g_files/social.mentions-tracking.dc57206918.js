(window.$WP=window.$WP||[]).push({id:"@ta/social.mentions-tracking",d:["vendor-react-libs","ta-platform","vendor-babel","@ta/tracking.interactions","@ta/social.feed","vendor-common","@ta/tracking.impressions"],e:["./packages/social/mentions-tracking/index.jsx"],x:{"./packages/social/mentions-tracking/index.jsx":["useMentionsInteractionContext","MentionsInteractionProvider","useMentionsImpressionContext","MentionsImpressionProvider","MentionsTrackingContext","MentionsTrackingProvider","useInnerHTMLEventListeners"]},m:{"./packages/social/mentions-tracking/index.jsx":function(e,n,r){"use strict";r.r(n);var t=r("react"),o=r("@ta/common.logging"),i=r.n(o),s=r("@babel/runtime/helpers/esm/extends"),a=r.n(s),c=r("@babel/runtime/helpers/esm/objectSpread"),u=r.n(c),d=r("@babel/runtime/helpers/esm/objectWithoutProperties"),l=r.n(d),p=r("@babel/runtime/helpers/esm/slicedToArray"),v=r.n(p),m=r("react-redux"),f=r("@ta/common.routing"),h=r("@ta/tracking.interactions"),g=r("@ta/social.feed"),C=t.createContext({previousContext:null}),k=function e(n){var r=n.namespace,o=n.children;return r?t.createElement(h.TrackingNamespaceContext.Provider,{value:r},o):o},I=function e(n){var r=n.children,o=l()(n,["children"]),i=t.useContext(C),s=function e(n){var r=t.useRef({});return Object.keys(r.current).forEach(function(e){delete r.current[e]}),Object.assign(r.current,n)}(u()({previousContext:i},function e(n){var r={};return Object.entries(n).forEach(function(e){var n=v()(e,2),t=n[0],o=n[1];void 0!==o&&(r[t]=o)}),r}(o)));return t.createElement(k,{namespace:o.namespace},t.createElement(C.Provider,{value:s},r))},b=Object(m.connect)(function(e,n){return u()({sessionType:Object(g.sessionType)(e.meta.device.viewportCategory),owner:e.auth.loggedInUserId,puid:e.tracking.uid},n)})(function e(n){var r=Object(f.useLocationDetail)();return t.createElement(I,a()({locationId:r||void 0},n))}),x=function e(n){return t.useContext(C).previousContext?t.createElement(I,n):t.createElement(b,n)},T=function e(n){var r=function e(n){if(n.previousContext){var r=e(n.previousContext);return r.push(n),r}return[n]}(n),t={};return r.forEach(function(e){Object.assign(t,e)}),t},w=t.createContext(null),E=function e(){var n=t.useContext(C),r=t.useContext(w),o=t.useCallback(function(e){var t=T(n),o=t.sectionId,s=t.itemId;o?(s||i.a.error("No item id was provided. This is a no-op!"),r&&r(e,"feedClick",{feedSectionId:o,itemId:s})):i.a.error("No section id was provided. This is a no-op!")},[r,n]),s=t.useCallback(function(e){var t=T(n).impressionId;t?r&&r(e,"showMore",{mixerImpressionId:t}):i.a.error("No impression id was provided. This is a no-op!")},[r,n]),a=t.useCallback(function(e){var t=T(n),o=t.sectionId,s=t.itemId,a=t.actor;o?s?a?r&&r(e,"userClick",{feedSectionId:o,itemId:s,userId:a}):i.a.error("No actor was provided. This is a no-op!"):i.a.error("No item id was provided. This is a no-op!"):i.a.error("No section id was provided. This is a no-op!")},[r,n]);return t.useMemo(function(){return r?{feedClick:o,showMore:s,userClick:a}:{feedClick:null,showMore:null,userClick:null}},[r,o,s,a])},M=function e(n){var r=n.logInteraction,o=n.children,i=t.useCallback(r,[]);return t.createElement(w.Provider,{value:i},o)},j=function e(n){var r=n.children;return t.createElement(h.InteractionLogger,null,function(e){return t.createElement(M,{logInteraction:e},r)})},P=t.createContext(null),N=function e(){var n=t.useContext(C),r=t.useContext(P),o=t.useCallback(function(){var e=T(n),t=e.locationId,o=e.sectionId,s=e.placement,a=e.objectTypes,c=e.sessionType,u=e.owner,d=e.puid;t?o?s?a?c?d?r&&r({allowedTypes:a,locationId:t,owner:u,placement:s,puid:d,sectionId:o}):i.a.error("No page uid was provided. This is a no-op!"):i.a.error("No session type was provided. This is a no-op!"):i.a.error("No objects types were provided. This is a no-op!"):i.a.error("No placement was provided. This is a no-op!"):i.a.error("No section id was provided. This is a no-op!"):i.a.error("No location id was provided. This is a no-op!")},[r,n]);return r&&o},y=r("lodash/debounce"),L=r.n(y),O=r("@ta/tracking.impressions"),F=function e(n){var r=n.trackFeedImpression,o=n.children,i=t.useCallback(L()(r,500),[]);return t.createElement(P.Provider,{value:i},o)},S=function e(n){var r=n.children;return t.createElement(O.FeedImpressionLogger,null,function(e){return t.createElement(F,{trackFeedImpression:e},r)})},W=r("@babel/runtime/helpers/esm/toConsumableArray"),A=r.n(W),H=function e(n,r){var o=n.onClick,i=t.useRef(null);return t.useEffect(function(){if(i.current&&o){for(var e=function e(n){return A()(n.children).reduce(function(n,r){return n.push.apply(n,A()(e(r))),n},[n])}(i.current),n=e.map(function(e,n){return function(e){o(e,n),e.stopPropagation()}}),r=0;r<e.length;r++){var t=e[r],s=n[r];t.addEventListener("click",s)}return function(){for(var r=0;r<e.length;r++){var t=e[r],o=n[r];t.removeEventListener("click",o)}}}return function(){}},[o,r]),i};r.d(n,"useMentionsInteractionContext",function(){return E}),r.d(n,"MentionsInteractionProvider",function(){return j}),r.d(n,"useMentionsImpressionContext",function(){return N}),r.d(n,"MentionsImpressionProvider",function(){return S}),r.d(n,"MentionsTrackingContext",function(){return C}),r.d(n,"MentionsTrackingProvider",function(){return x}),r.d(n,"useInnerHTMLEventListeners",function(){return H})}}});
//# sourceMappingURL=social.mentions-tracking.dc57206918.js.map