require(["ta/rollupAmdShim"],function(a){a.install(["ta/Core/TA.FireEvent","utils/urlDecoder","ta/Core/TA.Event","ta/Browser","ta/Core/TA.Record","ta/util/SessionStorage","vanillajs","lib/jquery-amd","ta/util/Error","facebook/authutils","ta/util/ActionRecord","ta/util/Cookie","ta/popups/CookieSettingsPanel","ta/util/Currency","utils/ajax","common/Radio","ta/registration/RegEvents","utils/throttle","widget/components","utils/asdf-encoder","ta/util/CommonMessagingUtil","api-mod","ta/Core/TA.LocalStorage","ta/Core/TA.Store","overlays/Overlay","overlays/styles/flyout","overlays/position","overlays/options/matchWidth","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/options/fade","overlays/options/closeOnScroll","overlays/options/centerArrowOnSrcElement","overlays/options/repositionOnTaEvent","common/page-filters","utils/nodePreserve","common/trackingStreams","cpm/BannerResizeHandler","babel/babel-helpers","cpm/ResponsiveBannerResizeHandler","utils/ResponsiveEvents","cpm/AdBlockDetect","utils/responsive","utils/resize-invalidated-cache","hotels/SpecialMessageUtil","overlays/loading-spinner","ajax-request","ta/util/ReCaptcha","ta/util/GeeTest","pages/inappropriate_vote_stub","utils/classnameUtils","hotels/HRContentBlockUtils","overlays/widgetoverlays","ta/util/Element","members/memberOverlay","overlays/styles/modal","overlays/options/closeOnEscape","overlays/styles/windowshade","overlays/options/ajax","overlays/options/disablePageScroll","overlays/uiOverlay","overlays/styles/default","overlays/position/conditional","overlays/position/fullscreen","overlays/position/center","actions/openRespPhotoViewer","overlays/ajaxUtil","ta/registration/RegOverlay","ta/util/ajaxPreserves","attractions/ApdPlacementSectionUtil","sponsoredlisting/utils","mobile/lite/image-loader","utils/VisibilityChecker","utils/ScrollInContainer","photoviewer/loader","t4b/tracking/b2bClickTracking","retargeting/listeners/mobile-bl-click","photoviewer/models/eventTypes","photoviewer/radioHelper","photoviewer/tracking","ta/util/I18N","utils/urlutils","hotels/tracking/timing","ta/common/Swipe","utils/browserutils","responsive/text-resizer","ta/common/Repoll","cpm/DblClickAPI","utils/safeCall"],["ta","ta","page-model","ta","ta","page-model","page-model","ta","ta","page-model","page-model","page-model","page-model"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"build/concat/apg-Restaurant_Review",files:{js3_secure:{ssl:{ta:{Core:{"TA.Record":1}}}},"js-amd":{lib:{babel:{"babel-helpers":1}},src:{cpm:{AdBlockDetect:1,DblClickAPI:1,BannerResizeHandler:1},facebook:{authutils:1},mobile:{lite:{"image-loader":1}},retargeting:{listeners:{"mobile-bl-click":1}},"ajax-request":1,common:{trackingStreams:1},hotels:{HRContentBlockUtils:1},utils:{urlutils:1,throttle:1,ScrollInContainer:1,urlDecoder:1,"asdf-encoder":1,browserutils:1,VisibilityChecker:1,responsive:1,classnameUtils:1,ResponsiveEvents:1,ajax:1,nodePreserve:1},"api-mod":1,members:{memberOverlay:1},overlays:{ajaxUtil:1,uiOverlay:1,options:{fade:1,matchWidth:1,autoReposition:1,centerArrowOnSrcElement:1,closeOnEscape:1,disablePageScroll:1,repositionOnTaEvent:1,ajax:1,closeOnDocClick:1,closeOnScroll:1},widgetoverlays:1,styles:{"default":1,flyout:1,windowshade:1,modal:1},position:{conditional:1,fullscreen:1,center:1},"loading-spinner":1},attractions:{ApdPlacementSectionUtil:1},actions:{openRespPhotoViewer:1},sponsoredlisting:{utils:1},vanillajs:1}},js3:{lib:{"jquery-amd":1},build:{es6:{src:{cpm:{ResponsiveBannerResizeHandler:1},t4b:{tracking:{b2bClickTracking:1}},widget:{components:1},common:{Radio:1,"page-filters":1},hotels:{SpecialMessageUtil:1,tracking:{timing:1}},utils:{"resize-invalidated-cache":1,safeCall:1},overlays:{Overlay:1},responsive:{"text-resizer":1},photoviewer:{models:{eventTypes:1},loader:1,radioHelper:1,tracking:1}}}},src:{pages:{inappropriate_vote_stub:1},ta:{common:{Repoll:1,Swipe:1},util:{Cookie:1,GeeTest:1,CommonMessagingUtil:1,ActionRecord:1,Currency:1,Element:1,Error:1,SessionStorage:1,ReCaptcha:1,I18N:1,ajaxPreserves:1},popups:{CookieSettingsPanel:1},registration:{RegOverlay:1,RegEvents:1},Browser:1,Core:{"TA.FireEvent":1,"TA.Event":1,"TA.LocalStorage":1,"TA.Store":1}}}}},_:{baseUrl:"/"}})};
define("utils/AjaxData",["ta","mixins/Events","lib/jquery-amd"],function(t,e,n){"use strict";function i(){}function a(t){function a(){return null!==s||null!==l}function r(){var t=a(),e=d,n=l;if(d=null,s=null,l=null,null!==n)try{n.abort()}catch(t){}return null!==e&&clearTimeout(e),t}function o(){var t=s;if(s=null,t){var e;t.success=function(n){l==e&&(l=null,v&&(y=n),f.data=n,f.error=void 0,f.dataVersion=++p,h(f,e,t.data),u.emit("update"))},t.error=function(n,i,a){l==e&&(l=null,f.data=y,f.dataVersion=++p,f.error={type:i,error:a,status:n.status,responseText:n.responseText},h(f,e,t.data),u.emit("update"))},e=c(t),l=e,u.emit("update")}}t=t||{};var u=new e("update"),d=null,s=null,l=null,f=this,p=0,c=t.ajaxFunc||n.ajax,h=t.transformer||i,m=t.dataType||"html",v=!!t.holdData,y=void 0;this.dataVersion=0,this.on=u.on.bind(u),this.off=u.off.bind(u),this.removeListener=u.removeListener.bind(u),this.isDone=function(){return!a()},this.isBusy=function(){return a()},this.clear=function(){var t=a()||"undefined"!=typeof this.data||"undefined"!=typeof this.error;r(),y=void 0,f.data=void 0,f.error=void 0,f.dataVersion=0,h(f),t&&u.emit("update")},this.refresh=function(t,e,n,i,a){r(),(!i||i<0)&&(i=0),s={type:t,url:e,data:n,dataType:m,xhrFields:{withCredentials:!0}},"undefined"!=typeof a&&(s.timeout=a),d=setTimeout(o,i),f.error=void 0,v||(f.data=void 0,h(f)),u.emit("update")},this.postJson=function(t,e,n,i){r(),n=n||0,n<0&&(n=0),s={beforeSend:function(t){t.setRequestHeader("Content-Type","application/json")},type:"POST",url:t,contentType:"application/json",data:JSON.stringify(e),dataType:m,xhrFields:{withCredentials:!0}},"undefined"!=typeof i&&(s.timeout=i),d=setTimeout(o,n),f.error=void 0,v||(f.data=void 0,h(f)),u.emit("update")}}return a});
require(["ta/rollupAmdShim"],function(a){a.install(["mixins/Events","utils/browserutils","api-mod","utils/MouseAway","utils/resourceLoader","overlays/Overlay","overlays/utils","overlays/ajaxUtil","overlays/options/closeOnDocClick","overlays/options/delayedCloseOnDocClick","overlays/options/closeOnChildClick","overlays/options/closeOnSourceClick","overlays/options/closeOnWindowshadeClick","overlays/options/closeOnMouseOut","overlays/options/closeOnMouseAway","overlays/options/closeOnScroll","overlays/options/closeOnEscape","overlays/options/closeOnEvent","overlays/options/closeOnTaEvent","overlays/options/closeOnTargetEvent","overlays/options/closeOnLegacyOverlay","overlays/options/fireEventOnWindowshadeClick","overlays/options/hoverDelay","overlays/options/storeOverlayOnElement","overlays/options/fadeInOut","overlays/options/highlightElement","overlays/options/repositionOnEvent","overlays/options/repositionOnTaEvent","overlays/options/autoReposition","overlays/options/autosizePage","overlays/options/keepInDom","overlays/options/matchWidth","overlays/options/maxWidth","overlays/options/minWidth","overlays/options/ajax","overlays/options/centerArrowOnSrcElement","overlays/options/closeOnTargetChildClick","overlays/options/stickyClick","overlays/position","overlays/styles/modal","overlays/styles/popover","overlays/styles/tooltip","overlays/styles/windowshade","overlays/styles/dropdown","overlays/styles/notification","overlays/uiOverlay"],["ta","ta"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"build/concat/uiOverlays",files:{"js-amd":{src:{mixins:{Events:1},utils:{browserutils:1,resourceLoader:1,MouseAway:1},"api-mod":1,overlays:{ajaxUtil:1,uiOverlay:1,utils:1,options:{closeOnTargetChildClick:1,keepInDom:1,autoReposition:1,closeOnTaEvent:1,ajax:1,closeOnDocClick:1,closeOnMouseOut:1,closeOnSourceClick:1,centerArrowOnSrcElement:1,fadeInOut:1,highlightElement:1,storeOverlayOnElement:1,autosizePage:1,closeOnScroll:1,stickyClick:1,maxWidth:1,closeOnWindowshadeClick:1,closeOnEscape:1,closeOnMouseAway:1,minWidth:1,closeOnLegacyOverlay:1,closeOnChildClick:1,closeOnTargetEvent:1,matchWidth:1,repositionOnEvent:1,fireEventOnWindowshadeClick:1,closeOnEvent:1,repositionOnTaEvent:1,delayedCloseOnDocClick:1,hoverDelay:1},styles:{notification:1,popover:1,tooltip:1,windowshade:1,dropdown:1,modal:1},position:1}}},js3:{build:{es6:{src:{overlays:{Overlay:1}}}}}},_:{baseUrl:"/"}})};
define("utils/MouseAway",["vanillajs","api-mod","ta","mixins/mixin","mixins/Events","utils/throttle"],function(t,o,e,r,n,i){"use strict";function l(t,o){var e=t.right<=o.left,r=t.left>=o.right,n=t.top>=o.bottom,i=t.bottom<=o.top;if(e||r){var l=e?"left":"right",u=e?"right":"left";return[[t[l],t.top],[o[l],o.top],[o[u],o.top],[o[u],o.bottom],[o[l],o.bottom],[t[l],t.bottom]]}if(n||i){var a=n?"bottom":"top",f=n?"top":"bottom";return[[t.right,t[a]],[o.right,o[a]],[o.right,o[f]],[o.left,o[f]],[o.left,o[a]],[t.left,t[a]]]}return null}function u(t,o){if(!o)return!1;for(var e=t[0],r=t[1],n=!1,i=0,l=o.length-1;i<o.length;l=i++){var u=o[i][0],a=o[i][1],f=o[l][0],s=o[l][1],m=a>r!=s>r&&e<(f-u)*(r-a)/(s-a)+u;m&&(n=!n)}return n}function a(t,e,r){var n=r.relatedTarget||r.target;if(!t||!e)return!1;if(o.containsElement(t,n)||o.containsElement(e,n))return!0;var i=l(o.getCoords(t),o.getCoords(e)),a=u([r.clientX+o.scrollLeft(),r.clientY+o.scrollTop()],i);return a}function f(t,e){r(this,new n("mouseAway")),o.addEvent(window,"mousemove",i(function(o){var r=a(t,e,o);r||this.emit("mouseAway")}).bind(this),300)}return f});
define("overlays/ajaxUtil",["vanillajs","ta","utils/object/shallow-copy","utils/AjaxData","mixins/Events","overlays/loading-spinner","utils/resourceLoader","amdloaders"],function(e,t,a,r,n,i,o,s){"use strict";function d(e,t){var a,r=[];for(a in t)t[a]&&r.push(a);r.sort();for(var n=e,i=n.indexOf("?")>=0?"&":"?",o=0;o<r.length;++o)a=r[o],n+=i+encodeURIComponent(a)+"="+encodeURIComponent(String(t[a])),i="&";return n}function u(){for(var e=0,t={},a=[],r=p.length-1;r>=0;--r){var n=p[r],i=g[n];i&&!t[n]&&(i.hasClients()||++e<=h)&&(t[n]=i,a.push(n))}return a.reverse(),g=t,p=a,m=p.length+h,p}function l(e,i){function d(){if(T){T=!1,u();for(var e=p.length-1;e>=0;--e){var t=g[p[e]];t.needsTravelInfo&&t.invalidate()}}}function l(){u();for(var e=p.length-1;e>=0;--e){var t=g[p[e]];t.invalidateOnPricingModeUpdate&&t.invalidate()}}function c(e,a,r,n,i,s,u){if(n=n&&t.page&&t.page.usingUnifiedDates){T=!0;var c=t.page.datesToQueryString("STAYDATES");!c&&i&&(c=t.page.defaultDatesToQueryString("STAYDATES")),c&&(a+="&"+c),y||(y=!0,t.page.on("dateSelected",d),t.page.on("guestsSelected",d),require(["trjs!common/Radio"],function(e){v||(v=e("web-component-pricingMode"),v.on("update",function(){l()}))}))}if(s>1){if(s>20)return;a+="&reqNum="+s,u>=0||(u=2e3)}else u=0;r?e.refresh("POST",a,r,u):e.refresh("GET",a,void 0,u),o.load(A,function(){S=!0,h()})}function h(){if(b.isBusy()||!S)return L&&clearTimeout(L),void(L=void 0);if(!b.data)return void(0!==b.dataVersion?E.error&&E.error===b.error||(E.error=b.error||"no content",L=L||setTimeout(m,0)):0!==j&&(V=q,j=b.dataVersion,U=[],P.hasListeners("update")&&(L=L||setTimeout(m,0))));if(j!==b.dataVersion){try{var e=document.createElement("div");e.innerHTML=b.data;var t=x,a=document.head||document.getElementsByTagName("head")[0];U=[],i.noScript||Array.prototype.forEach.call(e.querySelectorAll("script"),function(e){if(t){var r=document.createElement("script");r.setAttribute("type","text/javascript"),e.src&&(r.src=e.src),e.text&&(r.text=e.text),r.setAttribute("data-rup",e.getAttribute("data-rup")),a.appendChild(r),e.src||a.removeChild(r)}e.parentNode.removeChild(e)}),Array.prototype.forEach.call(e.querySelectorAll("style"),function(e){t?a.appendChild(e):e.parentNode.removeChild(e)}),Array.prototype.forEach.call(e.querySelectorAll("[data-targetEvent]"),function(e){U.push(e),e.parentNode.removeChild(e)}),t&&(x=!1,f[i.inlineResourceId]=!0),V=e.innerHTML,j=b.dataVersion,b.data=void 0}catch(e){E.error="invalid HTML"}L=L||setTimeout(m,0)}}function m(){var t,a=!P.hasListeners("update");for(L=void 0,E.data=V,E.dataVersion=j,P.emit("update");t=U.shift();){var r=t.getAttribute("data-targetEvent");if("repoll-required"===r){if(a)return U=[],E.data=V=q,void(E.dataVersion=j=0);++M>1||(M=2);var n=Number(t.getAttribute("data-delay"));c(b,e,i.reqParams,I,D,M,n)}else P.emit("data-targetEvent",r,t)}}var A,S,E=this,b=new r({dataType:"html",ajaxFunc:i.ajaxFunc}),P=new n("update","data-targetEvent"),q=i.loadingContent||C,x=!1,I=!!i.sendTravelInfo,R=!!i.invalidateOnPricingModeUpdate,D=I&&i.sendDefaultDates,L=void 0,V=q,j=b.dataVersion,U=[],M=0;this.error=void 0,this.loadingData=q,this.data=V,this.dataVersion=j,this.needsTravelInfo=I,this.invalidateOnPricingModeUpdate=R,this.on=P.on.bind(P),this.off=P.off.bind(P),this.removeListener=P.removeListener.bind(P),this.init=function(){b.on("update",h.bind(this))},this.isBusy=function(){return b.isBusy()||L},this.isDone=function(){return!b.isBusy()&&!L},this.invalidate=function(){b.clear(),M=0,this.hasClients()?c(b,e,i.reqParams,I,D,0,0):(E.data=V=q,E.dataVersion=j=0)},this.hasClients=function(){return P.hasListeners("update")},this.load=function(){if(!b.isBusy()){if(0!==b.dataVersion)return void setTimeout(function(){P.emit("update")},1);var t=i.reqParams,r=!i.isWidget||!i.inlineResourceId||!f[i.inlineResourceId];if(r){var n=s.getLoadedFilesParams();x=!0,t=t?a(t):{},t.haveJses=n.haveJses,t.haveCsses=n.haveCsses,i.isWidget&&(t.Action="install")}A=i.resources,M=0,c(b,e,t,I,D,0,0)}}}function c(e,t){var a=d(e,t.reqParams);a.length<128&&(e=a,t.reqParams=void 0);var r=g[a];return r||(r=new l(e,t),r.init(),t.noCache||(g[a]=r)),t.noCache||(p.push(a),p.length>m&&u()),r}var v,f={},h=10,p=[],g={},m=h,y=!1,T=!1,C=i();return{loadData:function(e,t){!t&&(t={});var a=c(e,t);return a.load(),a},loadOverlayWidget:function(e,t,r){var n="/OverlayWidgetAjax?Mode="+e;r?n+="&metaReferer="+encodeURIComponent(r):"string"==typeof crPageServlet&&(n+="&metaReferer="+encodeURIComponent(crPageServlet)),t=t?a(t):{},t.inlineResourceId=e,t.isWidget=!0;var i=c(n,t);return i.load(),i},cleanCache:u}});
define("overlays/options/delayedCloseOnDocClick",["api-mod"],function(t){"use strict";function e(e){if(!(this.sourceElement&&t.containsElement(this.sourceElement,e.target)||t.containsElement(this.container,e.target)||e.target&&("option"===e.target.tagName||t.hasClass(e.target,"ui_dropdown")||t.getParent(e.target,"ui_dropdown"))||t.checkBrowser("ie")&&e.target&&"select"==e.target.tagName&&t.containsEvent(e.target,e)&&t.select(this.container,"input").indexOf(e.target)))if(i&&i>0){var n=this;setTimeout(function(){n.hide("doc-click")},i)}else this.hide("doc-click")}function n(n){return function(o){return function(){var c=t.bind(e,this);i=o,this.on("show",function(){setTimeout(function(){this.isOpen()&&(t.addEvent(document,"click",c),n&&t.addEvent(document,"touchstart",c))}.bind(this),1)}).on("hide",function(){t.removeEvent(document,"click",c),n&&t.removeEvent(document,"touchstart",c)})}}}var i=0,o=n(!0);return o.withoutTouchEvents=n(!1),o});
define("overlays/options/closeOnChildClick",["vanillajs","api-mod"],function(t,n){"use strict";function i(t){n.containsElement(this.container,t.target)&&this.hide("child-click")}function e(t){return function(){var e=n.bind(i,this);this.on("show",function(){n.addEvent(this.domParent,"click",e),t&&n.addEvent(this.domParent,"touchstart",e)}).on("hide",function(){n.removeEvent(this.domParent,"click",e),t&&n.removeEvent(this.domParent,"touchstart",e)})}}var o=e(!0);return o.withoutTouchEvents=e(!1),o});
define("overlays/options/closeOnSourceClick",["vanillajs","api-mod"],function(t,e){"use strict";function n(t){e.containsElement(this.sourceElement,t.target)&&(this.hide("source-click"),t.stopPropagation(),t.preventDefault())}function i(t){return function(){var i=n.bind(this),o=function(t){setTimeout(t.bind(this),1)}.bind(this);this.on("show",o.bind(void 0,function(){e.addEvent(this.sourceElement,"click",i),t&&e.addEvent(this.sourceElement,"touchstart",i)})).on("hide",o.bind(void 0,function(){e.removeEvent(this.sourceElement,"click",i),t&&e.removeEvent(this.sourceElement,"touchstart",i)}))}}var o=i(!0);return o.withoutTouchEvents=i(!1),o});
define("overlays/options/closeOnWindowshadeClick",["vanillajs","api-mod"],function(i,n){"use strict";return function(){var i=this;n.addEvent(this.shade,"click",function(){i.hide("windowshade")})}});
define("overlays/options/closeOnMouseOut",["vanillajs","api-mod"],function(e,t){"use strict";function n(e){t.containsElement(this.sourceElement,e.relatedTarget)||t.containsElement(this.container,e.relatedTarget)||this.hide()}var o=function(){var e=t.bind(n,this);this.on("show",function(){t.addEvent(this.sourceElement,"mouseout",e),t.addEvent(this.container,"mouseout",e)}).on("hide",function(){t.removeEvent(this.sourceElement,"mouseout",e),t.removeEvent(this.container,"mouseout",e)})};return o});
define("overlays/options/closeOnMouseAway",["vanillajs","utils/MouseAway"],function(n,e){"use strict";var o=function(n){return function(){var o,t=new e(this.sourceElement,this.container),i=this.hide,u=i;n&&(u=function(){o=setTimeout(i,n)}),this.on("show",function(){t.on("mouseAway",u)}).on("hide",function(){t.off("mouseAway"),clearTimeout(o)})}},t=o(null);return t.withDelay=function(n){return o(n)},t});
define("overlays/options/closeOnScroll",["vanillajs","api-mod"],function(n,o){"use strict";var i=function(){this.on("show",function(){o.addEvent(window,"scroll",this.hide)}).on("hide",function(){o.removeEvent(window,"scroll",this.hide)})};return i});
define("overlays/options/closeOnEscape",["vanillajs","api-mod"],function(e,n){"use strict";function t(e){27===e.keyCode&&(e.preventDefault(),this.hide("escape"))}var o=function(){var e=n.bind(t,this);this.on("show",function(){n.addEvent(document,"keyup",e)}).on("hide",function(){n.removeEvent(document,"keyup",e)})};return o});
define("overlays/options/closeOnEvent",["vanillajs","api-mod"],function(n,t){"use strict";function i(){this.hide("on-event")}return function(n){return function(){var e=t.bind(i,this);this.on("show",function(){t.addEvent(this.domParent,n,e)}).on("hide",function(){t.removeEvent(this.domParent,n,e)})}}});
define("overlays/options/closeOnTargetEvent",["vanillajs","api-mod"],function(n,t){"use strict";function i(){this.hide("on-event")}return function(n,o){return function(){var e=o.splice?o:[o],c=i.bind(this);this.on("show",function(){e.forEach(function(i){t.addEvent(n,i,c)})}).on("hide",function(){e.forEach(function(i){t.removeEvent(n,i,c)})})}}});
define("overlays/options/closeOnLegacyOverlay",["vanillajs","ta/Core/TA.Event"],function(n,e){"use strict";return function(){e.on("onOverlayShow",this.hide.bind(this))}});
define("overlays/options/fireEventOnWindowshadeClick",["vanillajs","api-mod"],function(n,i){"use strict";var e=function(n){return function(){i.addEvent(this.shade,"click",function(){i.fireEvent(document,n,{})})}};return e});
define("overlays/options/hoverDelay",["vanillajs","api-mod"],function(e,t){"use strict";var i=function(e,i){return function(){var n=t.bind(function(){this.hoverTimer=setTimeout(this.show,e)},this),o=t.bind(function(){clearTimeout(this.hoverTimer)},this);t.addEvent(this.sourceElement,"mouseover",n),t.addEvent(this.sourceElement,"mouseout",o),i&&n()}};return i});
define("overlays/options/fadeInOut",["api-mod","utils/bindAll"],function(i,t){"use strict";var n={"fade_none":0,"fade_short":250,"fade_normal":500,"fade_long":1e3},e="fade_in";return function(s,o){return function(){if(s&&s in n){i.addClass(this.container,s);var a=n[s],d=i.bind(this.show,this),h=i.bind(this.hide,this),u=null;this.show=function(){d&&d(),setTimeout(function(){i.addClass(this.container,e)}.bind(this),0),clearTimeout(u),o&&(u=setTimeout(i.bind(this.hide,this),a+o))},this.hide=function(){i.removeClass(this.container,e),clearTimeout(u),u=setTimeout(function(){h&&h()},a)},t(this,"show","hide")}}}});
define("overlays/options/highlightElement",["api-mod"],function(i){"use strict";var n=function(n){function t(n){this.on("show",function(){i.addClass(n,"highlight")}).on("hide",function(){i.removeClass(n,"highlight")})}return arguments.length?function(){t.call(this,n)}:void t.call(this,this.sourceElement)};return n});
define("overlays/options/autoReposition",["vanillajs","overlays/options/repositionOnEvent"],function(o,n){return n(window,["resize","scroll"])});
define("overlays/options/autosizePage",["lib/jquery-amd","api-mod"],function(o,t){"use strict";return function(i,n){return function(){function n(){var n=t.getCoords(this.container),s=t.getSize(window);this._scrollTop||(this._scrollTop=t.scrollTop()),o(document.body).css("overflow","hidden"),n.height+2*i>s.y&&o(this.container).css({top:i,marginTop:0}),window.scrollTo(0,0)}this.domParent=o("<div></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,overflow:"auto"})[0],this.on("append",function(){o(document.body).append(this.domParent)}),this.on("show",n),this.on("positionDirty",n),this.on("hide",function(){o(document.body).css("overflow","auto"),o(this.domParent).remove(),window.scrollTo(0,this._scrollTop),delete this._scrollTop})}}});
define("overlays/options/keepInDom",["vanillajs","api-mod"],function(n,i){var t="";return function(){this.isOpen=function(){return!!i.inDocument(this.container)&&!i.hasClass(this.container,"hidden")},this.show=function(){return i.inDocument(this.container)?(this.container.style.display=t,i.removeClass(this.container,"hidden")):this.domParent.appendChild(this.container),this.emit("show"),this},this.hide=function(n){return i.inDocument(this.container)&&"none"!=this.container.style.display&&("none"!=this.container.style.display&&(t=this.container.style.display||"",this.container.style.display="none"),i.hasClass(this.container,"hidden")||i.addClass(this.container,"hidden"),this.emit("hide",{trigger:n})),this}}});
define("overlays/options/matchWidth",["vanillajs","api-mod"],function(t,i){"use strict";var n=function(t){function n(){this.container&&t&&(i.setStyle(this.container,"width",i.getSize(t).x+"px"),this.emit("positionDirty"))}return function(){this.on("show",i.bind(n,this))}};return n});
define("overlays/options/maxWidth",["vanillajs"],function(i){"use strict";var t=function(i){function t(){this.container.style.maxWidth=i+"px",this.emit("positionDirty")}return function(){this.on("show",t.bind(this))}};return t});
define("overlays/options/minWidth",["vanillajs"],function(i){"use strict";var n=function(i){function n(){this.container.style.minWidth=i+"px",this.emit("positionDirty")}return function(){this.on("show",n.bind(this))}};return n});
define("overlays/options/ajax",["vanillajs","overlays/ajaxUtil"],function(t,e){"use strict";function i(t){return t&&t.match(/^((https?:)?(\/\/)?([\da-z\.\-\u00a1-\uffff]+)\.([a-z\.\u00a1-\uffff]{2,6}))?(\/[\w]+)*(\?[\/\w\.+%=\-#&\/!\u00a1-\uffff]+)?$/)}function n(t,n){function a(){if(this.sourceElement&&(t=t||this.sourceElement.getAttribute("data-url"),void 0===n.noCache&&(n.noCache=this.sourceElement.getAttribute("data-ajaxNoCache")),n.resources||(n.resources=this.sourceElement.getAttribute("data-resources"),n.resources&&(n.resources=n.resources.replace(/[\[\]]/g,"").split(/[ ,]+/))),n.invalidateOnPricingModeUpdate||(n.invalidateOnPricingModeUpdate=this.sourceElement.getAttribute("data-invalidateOnPricingModeUpdate"))),t){var a,s,r=0,o=function(){a.dataVersion!==r&&(this.contentElement.innerHTML=a.data,this.emit("contentsUpdated"),r=a.dataVersion,require.defined("ta/prwidgets")&&require("ta/prwidgets").initWidgets(this.contentElement)),this.reposition(),setTimeout(this.reposition.bind(this),1),this.emit("contentLoaded",a.error)}.bind(this),d=function(i){return s==t?(this.reposition(),void this.emit("contentsUnchanged")):(n.skipInvalidate||a&&a.invalidate(),s=t,a=e.loadData(t,n),i||(this.contentElement.innerHTML=a.data),this.emit("contentsUpdated"),this.reposition(),r=a.dataVersion,require.defined("ta/prwidgets")&&require("ta/prwidgets").initWidgets(this.contentElement),a.on("update",o),void a.on("data-targetEvent",u))}.bind(this),u=this.emit.bind(this,"data-targetEvent");this.on("show",d),this.on("hide",function(){a&&(a.off("update",o),a.off("data-targetEvent",u),a=void 0)});var h=this.updateContent;this.updateContent=function(e,n){return e?i(e)?(t=e,this.isOpen()&&d(n),this):(t="",h.apply(this,arguments)):(t="",e=this.sourceElement.getAttribute("data-url"),e?this.updateContent(e):h.apply(this,arguments))}}}return n||(n={}),a}return n});
define("overlays/options/closeOnTargetChildClick",["vanillajs","api-mod"],function(i,n){"use strict";return function(i){return function(){var t,c=n.bind(function(){this.hide("target-child-click")},this);this.on("show",function(){t=n.select(i),t&&n.addEvent(t,"click",c)}).on("hide",function(){t&&n.removeEvent(t,"click",c)})}}});
define("overlays/options/stickyClick",["vanillajs","api-mod","utils/MouseAway"],function(i,n,t){"use strict";var o=!1;return function(){var i=new t(this.sourceElement,this.container);n.addEvent(this.sourceElement,"click",function(){o=!0}),this.on("hide",function(){o=!1,i.off("mouseAway")}),this.on("show",function(){var n=this.hide.bind(this);i.on("mouseAway",function(){o||n("stickyClick")})})}});
define("overlays/styles/tooltip",["vanillajs","api-mod","overlays/utils"],function(t,e,i){"use strict";function n(t,n,r){this.container=e.createElement(r||"span",{"class":"ui_overlay ui_tooltip arrow_"+i.getArrowDir(t,this.sourceElement,this.domParent)+" "+n}),this.arrow=e.createElement("div",{"class":"arrow"}),this.container.appendChild(this.arrow),this.inner=e.createElement("div",{"class":"body_text"}),this.container.appendChild(this.inner),this.contentElement=this.inner}var r=function(t,e,i,r,a){return t&&(i=i||t.getAttribute("data-tooltip"),a=a||t.getAttribute("data-elementtype")),function(){n.call(this,e,i,a),this.updateContent(r)}};return r});
define("overlays/styles/dropdown",["vanillajs","api-mod"],function(t,n){"use strict";function e(t,e,i,o){this.container=n.createElement(o||"span",{"class":"ui_overlay ui_dropdown "+e,"style":i}),this.contentElement=this.container}var i=function(t,n,i,o,r,a){i=i||t.getAttribute("data-dropdown")||"";var s=r||t.getAttribute("style")||"";return function(){e.call(this,n,i,s,a),this.updateContent(o)}};return i});
define("overlays/styles/notification",["vanillajs","api-mod"],function(n,e){"use strict";function i(n,i){this.container=e.createElement("div",{"class":"ui_overlay ui_notification "+n}),this.icon=e.createElement("span",{"class":"ui_icon main_icon "+i}),this.container.appendChild(this.icon),this.close=e.createElement("span",{"class":"ui_icon times close"}),this.container.appendChild(this.close),this.inner=e.createElement("div",{"class":"message"}),this.container.appendChild(this.inner),this.contentElement=this.inner}function t(n){var i=e.find("."+u);i||(i=document.createElement("div"),i.className=u,document.body.appendChild(i)),n.domParent=i,i.appendChild(n.container),o(n),s(n)}function a(n){r(n),o(n),e.addEvent(n.container,"mouseleave",function i(){e.removeEvent(n.container,"mouseleave",i),s(n)}),n.emit("hover")}function o(n){e.removeClass(n.container,"hidden"),n.container.clientHeight,e.removeClass(n.container,"transparent")}function c(n){e.addClass(n.container,"transparent"),r(n),n.__hideTimer=setTimeout(e.bind(l,null,n),m)}function s(n){r(n),n.__transitionOutTimer=setTimeout(c.bind(null,n),h)}function r(n){n.__transitionOutTimer&&clearTimeout(n.__transitionOutTimer),n.__hideTimer&&clearTimeout(n.__hideTimer)}function l(n,e){n.hide(e)}function d(n){n.on("show",e.bind(t,null,n)),e.addEvent(n.container,"click",e.bind(l,null,n,"click")),e.addEvent(n.container,"mouseenter",e.bind(a,null,n))}var u="ui_notification_container",m=2e3,h=1e4,_=function(n,e,t,a){return e=e||n&&n.getAttribute("data-modal")||"",a=a||n&&n.getAttribute("data-icon")||"",function(){i.call(this,e,a),this.updateContent(t),d(this)}};return _});
define("overlays/uiOverlay",["vanillajs","api-mod","utils/responsive"],function(t,e,a){"use strict";function o(t){var e=a[t.getAttribute("data-breakpoint")];return!("function"==typeof e&&!e())}var r={"tooltip":{defaultPosition:"above",defaultFade:"fade_short"},"popover":{defaultPosition:"below",defaultFade:"fade_short"},"modal":{defaultPosition:"center",defaultFixed:!0,defaultFade:"fade_short"},"dropdown":{defaultPosition:"below"},"notification":{}},i={},s=function(t,a){if(t=t||window.event,a=a||t.target||t.srcElement,o(a)){var s=t&&t.type;s&&e.removePropertyEvent(a,s,"uiOverlay"),t&&e.stopEvent(t);var n,l=(a.getAttribute("data-position")||"").split(" ").filter(function(t){return!!t.length}),u=l.shift(),d=["overlays/Overlay","overlays/position"];for(var v in r)if(a.hasAttribute("data-"+v)){u=u||r[v].defaultPosition,d.push("overlays/styles/"+v),n=!0;break}var c=a.getAttribute("data-options")||"";if(!n&&require.defined("ta/util/Error")){var p="uiOverlay: no style. class="+a.className+", id="+a.id;return[].forEach.call(a.attributes,function(t){/^data-/.test(t.name)&&(p+=", "+t.name+"="+t.value)}),void require("ta/util/Error").record(null,p)}d.push(a.hasAttribute("data-windowshade")?"overlays/styles/windowshade":null);var h=!1;a.hasAttribute("data-defer")&&(h=parseInt(a.getAttribute("data-defer"))),d.push(h?"overlays/options/hoverDelay":null),d.push(a.hasAttribute("data-fade")?"overlays/options/fadeInOut":null),d.push(a.getAttribute("data-url")?"overlays/options/ajax":null),d.push(a.hasAttribute("data-close-event")?"overlays/options/closeOnEvent":null),d.push(a.hasAttribute("data-close-ta-event")?"overlays/options/closeOnTaEvent":null),d.push(a.hasAttribute("data-maxWidth")?"overlays/options/maxWidth":null),d.push(a.hasAttribute("data-close-child")?"overlays/options/closeOnTargetChildClick":null);var f=a.hasAttribute("data-move-padding")||a.hasAttribute("data-move-source");d.push(f?"overlays/options/moveIntoView":null),d.push(a.hasAttribute("data-keep-in-dom")?"overlays/options/keepInDom":null),d.push("overlays/options/storeOverlayOnElement"),c&&(d=d.concat(c.split(" ").map(function(t){return"overlays/options/"+t}))),a.hasAttribute("data-tooltip")?"click"===s?d.push("overlays/options/closeOnDocClick"):"mouseover"===s&&c.indexOf("closeOnMouseAway")<0&&d.push("overlays/options/closeOnMouseOut"):a.hasAttribute("data-dropdown")&&("click"===s?(d.push("overlays/options/closeOnDocClick"),d.push("overlays/options/closeOnSourceClick")):"mouseover"===s&&d.push("overlays/options/closeOnMouseAway")),d.push(a.hasAttribute("data-zIndex")?"overlays/options/zIndex":null);var y;if(!(a.hasAttribute("data-unique")&&(y=a.getAttribute("data-unique"),y&&y in i))){var b;return a.hasAttribute("data-group")&&(b=a.getAttribute("data-group")),require(d,function(t,n,d,c,p,f,A,g,m,w,O,E){var k=[d(a,u),u&&n[u](l,r[v].defaultFixed),c&&c(a.getAttribute("data-windowshade")),p&&p(h,!0),f&&f(r[v].defaultFade),A&&A(),g&&g(a.getAttribute("data-close-event")),m&&m(a.getAttribute("data-close-ta-event")),w&&w(a.getAttribute("data-maxWidth")),O&&O(a.getAttribute("data-close-child")),E&&E(a.getAttribute("data-move-source"),parseInt(a.getAttribute("data-move-padding"),10))],x=Array.prototype.slice.call(arguments,11),I=new t(a,k.concat(x)),q=function(){e.select(".ui_tooltip").forEach(function(t){t.overlay&&t.overlay!=I&&t.overlay.hide()}),b&&(i[b]||[]).forEach(function(t){t!=I&&t.hide()}),I.show()};if(b){var C=i[b]||[];C.push(I),i[b]=C}if(s&&!h){var F=function(t){o(a)&&(q(),e.stopEvent(t))};e.addEvent(a,s,F),I.on("destroy",function(){e.removeEvent(a,s,F)})}if(y&&(i[y]=I,I.on("destroy",function(){delete i[y]})),!h&&q(),a.hasAttribute("data-callback")){var P=e.fn(a.getAttribute("data-callback"));P&&P(I)}}),!1}var A=i[y];if(A.sourceElement=a,A.updateContent(),!h&&A.show(),a.hasAttribute("data-callback")){var g=e.fn(a.getAttribute("data-callback"));g&&g(A)}}};return s}),window.uiOverlay=function(){var t=arguments;require(["overlays/uiOverlay"],function(e){e.apply(null,t)})};
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"trip_planner_breadcrumbs","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent","utils/urlDecoder"],function(e,n,i){"use strict";function r(n){var i=document.getElementById(e.id);i&&(i.innerHTML=n.innerHTML)}function t(e,n){i.goToLink(e,n)}function o(e,n){return require.defined("ta/util/Cookie")&&require("ta/util/Cookie").setOneTimeCookie(e,n)}return n.on("update-"+e.name,r),{goToLink:t,onClick:o}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"browser_mode_tracking","handlers",["handlers"]);n(["placement","ta/Core/TA.Event","ta/Browser","ta/Core/TA.Record","ta/util/SessionStorage"],function(e,n,o,r,t){function s(e){r.trackEventOnPage("BROWSER_TRACKING",a,e,null,!0)}var a,i=e.id+"_browser_mode_tracked";n.queueForLoad(function(){t.canUseSessionStore()&&sessionStorage.getItem(i)||o.isChrome()&&(a="Chrome",o.isChromeIncognito(s),t.canUseSessionStore()&&sessionStorage.setItem(i,"1"))})})});
require(["ta/p13n/placements"],function(e){var c=e.define.bind(e,"comscore","handlers",["handlers"]);c(["placement","ta/Core/TA.Event","vanillajs"],function(e,c){"use strict";c.queueForLoad(function(){var c=document.getElementById(e.id),o=c.querySelector(".dataHolder"),t=o.getAttribute("data-id"),n={c1:"2",c2:t,c3:"",c4:""};if("undefined"!=typeof COMSCORE)COMSCORE.beacon(n);else{window._comscore=window._comscore||[],window._comscore.push(n);var r=document.createElement("script");r.async=!0,r.src=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",c.appendChild(r)}},5,"comscore")})});
define("Logging",[],function(){var e="undefined"!=typeof IS_DEBUG&&IS_DEBUG?4:1;"boolean"==typeof __SERVER__&&__SERVER__&&(e=4);for(var n={},o=["error","warn","dir","info","debug"],r=0;r<o.length;r++){var l=o[r];n[l]=function(n,o){return function(){e<o||"undefined"!=typeof console&&console[n]&&console[n].apply&&console[n].apply(console,Array.prototype.slice.call(arguments))}}(l,r)}return n.setLevel=function(n){e=n},n});
define("facebook/authutils",["api-mod","lib/jquery-amd","Logging","ta/Core/TA.Store","ta/util/Deferred","ta/util/SessionStorage","ta/util/Cookie","ta/util/Error","ta/registration/RegEvents","ta/Core/TA.Event"],function(e,t,n,o,i,s,a,r,u,c){"use strict";var d=6e5,f="fbAutoLoginTime",g=new i,p=function(e,t){var n=t||"v1.0";return FB.init({appId:e,version:n,status:!0,cookie:!0}),g.resolve()},l=function(e){g.promise().success(e)},v=function(){a.setOneTimeCookieOnFQDN("FacebookAuthCode2","ConflictedFBAccount"),window.location.reload()},h=function(e){window.__REDUX_STORE__&&e&&__REDUX_STORE__.dispatch({type:"SET_AUTH_STATE",loggedInUserId:e})},m=function(){var e=new i;return T()?(FB.getLoginStatus(function(n){if("connected"===n.status&&n.authResponse){if(o.has("cached.facebookuid"))return void R(o.retrieve("cached.facebookuid"),n.authResponse.userID);var i=new XMLHttpRequest;i.open("POST","/FacebookConnectAjax",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("a=autologin&signedRequest="+encodeURIComponent(n.authResponse.signedRequest)),i.onreadystatechange=function(){if(4==i.readyState){if(200!=i.status)return e.reject();if(e.resolve(),i.responseText){var n=t("<div>"+i.responseText+"</div>").find("#fbcajax_data");if(n.length){var o=n.data("fbAutologinTaUserId");o&&h(o)}}c.fireEvent("fbAutoLoginSuccess"),u.emit("success")}}}}),e.promise()):e.reject()},R=function(e,t){e!==""+t&&(r.record(null,"Mismatched Facebook uid between cached value and authResponse. cached: "+e+", response: "+t),v())},S=function(){T()&&FB.getLoginStatus(function(e){if("connected"===e.status&&e.authResponse){if(o.has("cached.facebookuid"))return void R(o.retrieve("cached.facebookuid"),e.authResponse.userID);var t=new XMLHttpRequest;t.open("POST","/FacebookConnectAjax",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("a=refresh&signedRequest="+encodeURIComponent(e.authResponse.signedRequest))}})},b=function(e,n,o){var i=t("form#"+e),s=i.find("."+n).val();return s&&s.match(/.+\@.+\..+/)?void i.submit():void i.find("."+o).removeClass("hidden")},T=function(){if(s.canUseSessionStore())try{var e=(new Date).getTime(),t=sessionStorage.getItem(f);return null==t?(sessionStorage.setItem(f,e),!0):(t=parseInt(t),e-t<d?(n.info("Skipping FB autologin, tried too recently"),!1):(sessionStorage.setItem(f,e),!0))}catch(e){r.record(null,"Error storing FB autologin attempt: "+e)}return!0};return{init:p,autoLogin:m,queueForInit:l,refreshToken:S,submitEmailRegistration:b}});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"facebook_autologin","handlers",["handlers"]);o(["placement","lib/jquery-amd","ta/Core/TA.Event","ta/util/Error","facebook/authutils"],function(e,o,t,n,a){"use strict";t.queueForAfterLoad(function(){var e=o("#fb_autologin_data");if(!e.length)return void n.record(null,"Could not find Facebook autologin data");var t=e.data("loadFbJs"),r=e.data("facebookJsUrl"),i=e.data("facebookConnectAppId"),c=e.data("facebookApiVersion"),u=e.data("fbAutoLogin"),d=e.data("fbFetchAccessToken");try{window.fbAsyncInit=function(){a.init(i,c)},t&&!function(e,o,t){var n,a=e.getElementsByTagName(o)[0];e.getElementById(t)||(n=e.createElement(o),n.id=t,n.src=r,a.parentNode.insertBefore(n,a))}(document,"script","facebook-jssdk"),u&&a.queueForInit(function(){a.autoLogin()}),d&&a.queueForInit(function(){a.refreshToken()})}catch(e){n.record(e,"Error setting up Facebook autologin JS")}},"placement: facebook_autologin")})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_footer_pickers","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/Core/TA.Record"],function(e,t,o){"use strict";function a(t,o,a,r){t&&t.stopPropagation(),o.onclick=null,e.require(["trjs!styleguide/overlays/Flyout","trjs!overlays/support/widgets","trjs!overlays/support/remoteWidget","trcss!src/build/styleguide/ui_overlays/flyouts"],function(n,s,i){n(t,o,s(e),i(a,{},r))})}return{showPos:function(r,n){var s=t(e.element).find(".point_of_sale_data");a(r,n,"POS_PICKER",{pageFeature:s.data("page-feature")||window.pageFeature||"",localeCodes:s.data("locale-codes")||window.localeCodes||"",relativeUrl:document.location.pathname+(document.location.search||"")+(document.location.hash||"")});var i=s.data("currentLocale");o.trackEventOnPage("POS_PICKER","Open",i)},showCurrency:function(e,t){a(e,t,"CURRENCY_PICKER")}}})});
define("ta/util/ActionRecord",["vanillajs","ta/util/Deferred","utils/ajax","ns-exporter","ta/Core/TA.Record"],function(r,t,e,o,n){function a(r,o,a,i){var c=new t;a||(a={});var u={url:a.url||r,method:a.method||"get",data:{action:o},success:function(r){a.onSuccess&&a.onSuccess(r),c.resolve(r)},error:function(r){a.onFailure&&a.onFailure(r),c.reject(r)}};for(var d in a)if(a.hasOwnProperty(d)&&!u.hasOwnProperty(d))u[d]=a[d];else if("data"==d)for(d in a.data)a.data.hasOwnProperty(d)&&(u.data[d]=a.data[d]);if(i){var s=n._toEvtParams(i);for(d in s)s.hasOwnProperty(d)&&(u.data[d]=s[d])}return e(u),i&&n._trackEventAfterAjax(i),c.promise()}var i={record:function(r,t,e){return a("/ActionRecord",r,t,e)},recordPlus:function(r,t,e){return a("/ActionRecordPlus",r,t,e)},recordPid:function(r){new e("/ActionRecord?pid="+r)}};return o.exportTo(i,"ta.util.action"),i});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"homepage_partner_footer_links","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/util/ActionRecord"],function(e,n,t){"use strict";n(e.element).on("click",".inlineLink",function(){var e=n(this).parent(".footerLink").data("trackAction");e&&t.record("Footer"+e)})})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_social_footer_links","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/util/ActionRecord"],function(e,t,i){"use strict";t(e.element).on("click",".footerLink",function(){var e=t(this).data("trackAction");e&&i.record("Footer_"+e)})})});
require(["ta/prwidgets"],function(t){var e=t.define.bind(t,"homepage_tripadvisor_footer_links","handlers",["handlers"]);e(["widget","lib/jquery-amd","ta/util/Cookie","ta/util/ActionRecord","page-model"],function(t,e,r,i,a){"use strict";function n(t){var e=t?t.srcElement||t.target:null;e&&e.getAttribute("data-pid")&&r.setPIDCookie(e.getAttribute("data-pid"))}return e(t.element).on("click",'.js_click[data-id="help_center"]',function(){var r=this,i=e(r).data("url");t.require(["trjs!brand/HelpCenterOverlay","trcss!src/build/required/help_center_overlay"],function(t){t.open(r,i)})}),e(t.element).on("click",'.js_click[data-id="rs_footer_link"]',function(){var t=e(this),r=function(){t.data("url")&&(window.location=t.data("url"))};require(["ta/Core/TA.Record"],function(e){e.trackEventOnPage(a.session.pageServlet,t.data("trackAction")),r()})}),e(t.element).on("click",".footerLink",function(t){var r="Footer_",a=e(this),n=a.data("trackAction");if(n){var o="_blank"==a.attr("target");a.is("a")&&!o?(t.preventDefault(),i.record(r+n).always(function(){window.location=a.attr("href")})):i.record(r+n)}}),{checkForPid:n}})});
define("ta/util/openNewTab",["utils/browserutils","ta/Browser","ta/util/Cookie"],function(e,o,t){return function(n){var i;return o.isIE10Metro()||(i=e.ie&&!o.isIE9orHigher()?window.open(n,"_blank","location=yes,resizable=yes,menubar=yes,scrollbars=yes,toolbar=yes,width="+document.documentElement.clientWidth+",height="+document.documentElement.clientHeight):window.open(n,"_blank")),!i||i.closed||"undefined"==typeof i.closed?(t.setPIDCookie(38821),window.location=n,!1):i}});
define("ta/popups/CookieSettingsPanel",["ta/util/openNewTab","page-model"],function(e,n){return function(s){s&&s.stop();var o={en:451,en_UK:834,en_IE:835,en_ZA:2635,sv:720,no:721,da:1199,fr:1197,fr_BE:6409,fr_CH:6410,de:1201,de_AT:2719,de_CH:6431,el:1198,it:1202,it_CH:6432,es:1200,pl:1208,nl:1209,nl_BE:6411,fi:2968,hu:3049,cs:3128,sk:3233,pt_PT:13938,"default":451},i={en:8328,en_UK:8328,en_IE:8316,en_ZA:8324,sv:8322,no:8323,da:8310,fr:8312,fr_BE:8307,fr_CH:8326,de:8313,de_AT:8306,de_CH:8325,el:8314,it:8317,it_CH:8327,es:8321,pl:8319,nl:8318,nl_BE:8309,fi:8311,hu:8315,cs:8308,sk:8320,pt_PT:13939,"default":8328},t=n.isMobile?i:o,_=n.session&&n.session.posLocale&&t[n.session.posLocale]?t[n.session.posLocale]:t["default"],l="http://info.evidon.com/pub_info/"+_+"?v=1&nt=0";e(l)}});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_tripadvisor_horizontal_footer_links","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/popups/CookieSettingsPanel","ta/util/ActionRecord"],function(e,t,i,o){"use strict";t(e.element).on("click",'.js_click[data-id="cookie-consent"]',function(){i()}),t(e.element).on("click",".footer_link",function(e){var i=t(this),n="Footer_",r=i.data("trackAction");r&&(i.is("a")&&(e.preventDefault(),o.record(n+r).always(function(){window.location=i[0].href})),o.record(n+r))})})});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"homepage_pos_picker","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/util/Cookie","ta/util/ActionRecord"],function(e,n,i,t){"use strict";function o(i){var o=n(i).data("id"),r=n(e.element).find(".picker_dropdown").data("currentLocale");t.record("POS_PICKER_SELECT_POS_"+o+"_FROM_"+r).always(function(){window.location=i.href})}function r(){i.remove("TAPD","/",window.domain)}var a=n(".fixed_header",n(e.element));n(e.element).before(a);var d=n(e.element).find(".pos_item.selected")[0];d&&d.scrollIntoView(),n(e.element).on("click",".pos_link",function(e){e.preventDefault(),r(),o(this)})})});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"homepage_currency_picker","handlers",["handlers"]);r(["widget","lib/jquery-amd","ta/util/Currency"],function(e,r,n){"use strict";function t(t){var d=r(e.element).find(".picker_dropdown").data("currentCurrency");n.setCurrencyAndReload(t,d)}var d=r(".fixed_header",r(e.element));return r(e.element).before(d),{setCurrencyAndReload:t}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_footer","handlers",["handlers"]);n(["placement","vanillajs","utils/ajax"],function(e,n,t){function i(){var n=window.location.pathname,t=n.indexOf("-"),i=n.length<=1?"Home":t>0?n.substring(1,t):n.substring(1);require(["trjs!ta/util/Element"],function(n){ta.util.element.trackWhenScrolledIntoView("#"+e.id,[i,"in_view","global_footer"])})}function a(){require(["trjs!common/PageDwell"],function(e){e.init(window.pageServlet)})}return i(),e.params.dwell_tracking&&a(),{getFullDisclaimerText:function(e){t({url:"/TAMGFooterAjax",success:function(n){e.parentElement&&(e.parentElement.innerHTML=n)},data:{"a":"SHOW_FULL_DISCLAIMER"},evalScripts:!0,method:"get"})}}})});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"global_nav","handlers",["deferred/lateHandlers","handlers"]);o(["placement","lib/jquery-amd","common/Radio","ta/registration/RegEvents","utils/throttle","widget/components","utils/asdf-encoder"],function(e,o,n,t,a,i,r){"use strict";function s(){var e=o(window).scrollTop();if(b.length&&w.is(":visible")){var n=v.height()-e;e<=0&&b.css({"position":"absolute","top":0}),n>0&&(e>0&&e<=50?b.css({"position":"absolute","top":e,"bottom":"auto"}):n<=50&&b.css({"position":"absolute","top":"auto","bottom":0}))}}function l(){var e=o(".second-view",v),n=o(window).scrollTop();b.length&&(m.css({"display":"block"}),e.length&&w.is(":visible")&&(n=p.height()-m.height(),window.scroll(0,n),b.css({"position":"absolute","top":"auto","bottom":0})))}function c(){var e=o(".global-nav-persistent",v);e.length&&e.toggleClass("fixed",o(window).scrollTop()>v.offset().top)}function d(e,o){e.preventDefault();var n=o.getAttribute("data-ahref")?r.asdf(o.getAttribute("data-ahref")).replace(/&amp;/g,"&"):"/";window.open(n,"_self")}var u="TopNav",v=o("#"+e.id),f=n("global-nav"),g=null,h=null,p=o(".persistent-icons",v),b=o(".global-nav-icons",p),m=o(".global-nav-logo",p),y=o(".global-nav-logo-2018",v),w=o('[data-placement-name="global_nav_geopill"]',v),j=n("candy-bar-quick-links"),C=o(".global-nav-bottom",v),k=n("tripsearch-scroll-geo-pill");f.on("run-my-trips-test-3",function(){T(!1,!0)}),k.on("hide-on-header",function(e){y&&y.toggleClass("is-hidden-mobile",!e)});var _=function(e){window.userLoggedIn=!0;var t=0==v.find("[data-non-components]").length;if(t){var a=v.find(".components-nav-legacy-actions"),r=o("<div>").html(e).find(".components-nav-legacy-actions").html();a.html(r)}else{var s=o("<div>").append(v.find(".global-nav-no-refresh"));v.html(e),v.find(".global-nav-no-refresh").each(function(e,n){o(n).replaceWith(s.find("#"+n.getAttribute("id"))[0])}),g&&g.hide("replace-el")}v[0]&&(i.initComponentWidgets(v[0],"@ta/trips.trip-link"),i.initComponentWidgets(v[0],"@ta/brand.global-nav-action-content-collect",!1)),n("inbox").trigger("setup_handler")}.bind(v),O=function(){return{skipLocation:e.location_id<=0,returnTo:document.location.pathname+(document.location.search||"")+(document.location.hash||"")}};t.on("success",function(){e.requestAJAXPlacement(_,null,O())}),v.on("mouseenter",".global-nav-links-container [data-element]",function(e){var n=o(this),t=n.find("a").first();g&&g.hide("new-overlay");var a=v.find(n.data("element")).clone();if(a.length){var i=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(i,function(i,r,s,l,c){var d=new i(n[0],new r(a[0],"global-nav-flyout global-nav-menu"),s,l.bottomRight([0,1]),c);d.domParent=v.find(".global-nav-overlays-container")[0],d.show(),t.attr("data-active-menu-trigger",!0),o(e.currentTarget).find(".ui_tab").addClass("hovering"),d.on("hide",function(){t.removeAttr("data-active-menu-trigger"),o(e.currentTarget).find(".ui_tab").removeClass("hovering")}),g=d})}}),v.on("mouseenter",".subItem",function(e){o(this).siblings(".expandSubItem").removeClass("active")}),v.on("mouseenter",".expandSubItem",function(e){var n=o(this);if(!n.hasClass("active")){n.addClass("active"),n.siblings(".expandSubItem").removeClass("active");var t=n.find(".secondSubNav").clone(),a=n.parents(".ui_overlay"),i=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseOut","trjs!overlays/options/destroyOnHide"];require(i,function(e,o,i,r){var s=new e(n[0],new o(t[0]),i,r);s.domParent=a[0],t.css("display","block"),s.show()})}}),v.on("mouseenter",".global-nav-links-ellipsis",function(e){var n=o(this);g&&g.hide("new-overlay");var t=v.find(".global-nav-links-container li"),a=t.filter(":hidden"),i=t.filter(function(e,n){return o(n).offset().top>t.offset().top}),r=o().add(a).add(i).clone(),s=v.find(".global-nav-links-menu-more").clone();s.prepend(r);var l=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(l,function(e,o,t,a,i){var r=new e(n[0],new o(s[0],"global-nav-flyout global-nav-menu"),t,a.bottomRight([0,1]),i);r.domParent=v.find(".global-nav-overlays-container")[0],r.show(),n.find(".ui_tab").addClass("hovering"),r.on("hide",function(){n.find(".ui_tab").removeClass("hovering")}),g=r})}),v.on("click","#global-nav-HelpDesk",function(e){e.preventDefault();var o=this,n=["trjs!overlays/Overlay","trjs!overlays/styles/modal","trjs!overlays/options/closeOnEscape","trjs!overlays/position","trjs!overlays/options/closeOnDocClick","trjs!overlays/options/ajax","trcss!src/build/required/help_center_overlay"];require(n,function(e,n,t,a,i,r,s){var l=new e(o,[n(null,"","help_center"),t,a.cssCentered(),i,r("/uvpages/helpCenterOverlay.html")]);l.show(),f.emit("overlay-show")})}),v.on("click",".masthead-saves",function(e){h?(g&&g.hide("new-overlay"),h&&h.destroy()&&(h=null),require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("TopNav","mytrips_dropdown_cancel")})):(T(!1,!1,e.currentTarget),o(e.currentTarget).find(".ui_icon").addClass("hovering"))});var T=function(e,n,t){g&&g.hide("new-overlay");var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","trjs!ta/Core/TA.Record"];require(a,function(a,i,r,s,l,c,d){var u=o(".masthead-saves"),f=new a(u[0],new i("","global-nav-flyout global-nav-utility trips-flyout-container"),r.withoutTouchEvents,u.data("nav-2018-enabled")?s.bottomLeft([u.width()/2-34,9]):s.bottomLeft([-20,-3]),l,c);f.domParent=v.find(".global-nav-overlays-container")[0],f.show(),v.find(".trips-flyout-container").addClass("hide-arrow"),g=f,require(["trdust!masthead-saves-dust","trdust!styleguide-dust","trjs!masthead-saves","trcss!masthead-saves"],function(a,i,r){setTimeout(function(){h=new window.MastheadSavesApp,h.start({inCreateTripFlow:e,runTest3:n}),f.on("hide",function(e){h&&h.destroy()&&(h=null),d.trackEventOnPage("TopNav","mytrips_dropdown_cancel"),t&&o(t).find(".ui_icon").removeClass("hovering")}),v.find(".trips-flyout-container").removeClass("hide-arrow")},0)})})}.bind(v);v.on("click",".global-nav-utility-activator",function(e){var n=o(this),t=v.find(n.data("element")).clone();if(t.length){if(g){if(g.sourceElement==this)return void(g.isOpen()?g.hide("close"):g.show());g.hide("new-overlay")}t=t.clone();var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/autoReposition"];require(a,function(a,i,r,s,l){var c=new a(n[0],new i(t[0],"global-nav-flyout global-nav-utility"),r,n.data("nav-2018-enabled")?s.bottomLeft([n.outerWidth()/2-34,12]):s.bottomLeft([-20,-3]),l);c.domParent=v.find(".global-nav-overlays-container")[0],c.show(),n.addClass("menu-open"),o(e.currentTarget).find(".ui_icon").addClass("hovering"),c.on("hide",function(){n.removeClass("menu-open"),o(e.currentTarget).find(".ui_icon").removeClass("hovering")}),g=c})}}),v.on("click",".global-nav-logo",function(){require(["trjs!ta/Core/TA.Record"],function(e){e.setEvtCookie("TopNav_"+window.pageServlet,"click","TAlogo",0,"/Home")})}),n("inbox").on("has_unread_conversations",function(e){v.find(".global-nav-hamburger .ui_jewel.unread").removeClass("hidden"),v.find(".nav-sub-link.inbox .icon-and-jewel").removeClass("hidden")}),n("inbox").on("no_unread_conversations",function(e){v.find(".global-nav-hamburger .ui_jewel.unread").addClass("hidden"),v.find(".nav-sub-link.inbox .icon-and-jewel").addClass("hidden")}),v.on("click","a.login-button.mobile",function(e){var n="CORE_COMBINED",t=40422,a="login";o(this).hasClass("join-button")&&(a="join");var i={flow:n,pid:t,userRequestedForce:"true",locationId:require("page-model").GEO_ID,onSuccess:function(e){if(require("@ta/social.onboarding-state")){var o=e&&(e.hasCreatedMember||!e.hasAcceptedTermsOfUse),n=require("@ta/social.onboarding-state").ACTIONS.setShouldFire;require("redux-init").dispatch(n(o,"MASTHEAD"))}}},r={extraQueryParams:{flowOrigin:a}};i=o.extend(i,r),require("ta/registration/RegOverlay").showForMobile(e,e.target,i),e.preventDefault()}),l();var q=a(c,100);return o(window).scroll(function(){s(),q()}),j.on("border-top",function(e){C.toggleClass("home_ui_tabs",e)}),v.on("click","a.global-nav-link[data-tracking-label]",function(e){var n=o(e.target).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(o){"HelpDesk"===n||"_blank"==e.target.target?o.trackEventOnPage(u,"click",n):o.setEvtCookie(u,"click",n,0,e.target.href)})}),{checkForPersistentIcons:s,checkForPersistentGlobalNav:c,clickLogoLink:d}})});
require(["ta/p13n/placements"],function(a){var n=a.define.bind(a,"global_nav_action_cart","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(a,n){"use strict";var e=n("#"+a.id);e.on("click","a.shopping-cart-link",function(){var a=n(this).data("tracking-label");require(["trjs!ta/Core/TA.Record"],function(n){n.trackEventOnPage("TopNav_"+window.pageServlet,"click",a)})})})});
define("ta/util/CommonMessagingUtil",["lib/jquery-amd","ta/Core/TA.LocalStorage","ta/support/Qualtrics","ta/util/SessionStorage","ta/Core/TA.Event"],function(e,t,n,a,i){"use strict";function r(e){if(t.enabled){var n=t.get(e+D);return n?parseInt(n):0}return null}function s(e){if(t.enabled&&e){var n=e+D;t.set(n,r(e)+1)}}function o(e){if(t.enabled){var n=t.get(e+y);return n?parseInt(n):0}return 0}function u(e){if(t.enabled&&e){var n=e+y;t.set(n,o(e)+1)}}function l(e){if(t.enabled){var n=t.get(e+p);return!!n}return!1}function c(e){t.enabled&&e&&t.set(e+p,"true")}function d(e){var n=(new Date).getDate();if(t.enabled&&e){var a=e+S;t.set(a,n.toString())}}function f(e){var n=(new Date).getDate();if(t.enabled&&e){var a=e+S,i=t.get(a);return!!i&&i===n.toString()}return!1}function m(e){var n=(new Date).getDate();t.enabled&&t.set(e,n.toString())}function g(e){var n=(new Date).getDate();if(t.enabled){var a=t.get(e);return!!a&&a===n.toString()}}function b(e,t,r){e&&"function"==typeof e&&e()&&(n.seenThisPageView()||n.canDisplaySmart()||n.canDisplay())||t&&"function"==typeof t&&t()||r&&"function"==typeof r&&(document.getElementById("FIXED_AD")?a.canUseSessionStore()&&a.getObject("ads.fixed.close")?r():i.on("ad_div_collapsed",function(){r()}):r())}function v(e){return e.toLowerCase().replace("mobile","")}var D="_view_count",p="_is_disabled",y="_times_dismissed",S="_disabled_for_day";return{getCurrentPageViews:r,incrementPageViews:s,getNumberOfTimesDismissed:o,incrementNumberOfTimesDismissed:u,isPlacementDisabled:l,disablePlacement:c,setPlacementDisabledForToday:d,isPlacementDisabledForToday:f,setPlacementGroupKey:m,checkPlacementGroupKey:g,parseServletName:v,displayPlacementIfNoSurveyNorAdIsPresent:b}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_action_inbox","handlers",["handlers"]);n(["placement","vanillajs","lib/jquery-amd","common/Radio","ta/Core/TA.Record","ta/util/CommonMessagingUtil"],function(e,n,o,i,t,a){function s(e){if(e.receivedCallback&&e.receivedCallback(),o(".inbox-flyout-container").length&&g)g.destroy();else{var n=e.el,i=e.bottomLeftOffset;l(void 0,n,i)}}function r(e){l(e,o(".masthead-inbox-icon")[0])}function l(n,i,a){var s=o("#"+e.id),r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","ta/registration/RegOverlay","trjs!unifiedinbox/inbox-lander","trcss!unified_inbox_lander"];require(r,function(e,r,l,c,d,v,_,b,f){var w=o(".inbox-nav-contents",s).clone()[0];if(w.classList.remove("hidden"),o(".login-cta",w).length){var p=o(".login-cta span",w);p.click(function(){n&&m&&(h=!0,t.trackEventOnPage("reg_trigger","mgp_click_login","Inbox Jewel Notification Log In Click | Nav | mgp_drs_mem",u)),g.destroy(),_.show({type:"dummy"},null,{flow:"CORE_COMBINED",pid:40472,userRequestedForce:!0,onSuccess:function(){o(".login-cta",s).remove(),o(".inbox-nav-dropdown",s).removeClass("with-login-cta")}.bind(this)})})}else for(var x,j=o(".js-inbox-lander-thread-list-item.loading",w),y=o(".inbox-masthead-wrapper",w),C=0;C<10;++C)x=j.clone(),x.removeClass("hidden"),y.append(x);var k=a;k||(k=o(i).data("nav-2018-enabled")?[o(i).width()/2-34,7]:[-20,-3]),g=new e(i,new r(w,"inbox-flyout-container"),l.withoutTouchEvents,c.bottomLeft(k),d,v),g.show(),n&&!n.hasClass("hidden")&&g.on("hide",function(){h||t.trackEventOnPage("reg_trigger","mgp_close","Inbox Jewel Notification | Nav | mgp_drs_mem",u),h=!1,m=!1}),o(".login-cta",s).length||b.loadMastheadDropdown()})}function c(e,n){if(n)if(n.hasClass("is-control"))t.trackEventOnPage("reg_trigger","mgp_view_control","Inbox Jewel Notification Control| Nav | mgp_drs_mem");else{var i=a.getCurrentPageViews(_);i>=b&&a.disablePlacement(_),a.isPlacementDisabledForToday(_)||a.isPlacementDisabled(_)||!n.hasClass("valid-for-test")||(o(".inbox-jewel-test",e).removeClass("hidden"),t.trackEventOnPage("reg_trigger","mgp_view","Inbox Jewel Notification | Nav | mgp_drs_mem",u))}}function d(){var n=o("#"+e.id),s=o(".inbox-jewel-test",n);c(n,s),o(".masthead-inbox-icon, .ui_jewel",n).click(function(e){e.stopPropagation(),s&&!s.hasClass("hidden")?(t.trackEventOnPage("reg_trigger","mgp_click","Inbox Jewel Notification | Nav | mgp_drs_mem",u),a.setPlacementDisabledForToday(_),a.incrementPageViews(_),m=!0,t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","no_unread",v)):o(".ui_jewel",n).length&&o(".ui_jewel",n).hasClass("hidden")?t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","no_unread",v):o(".ui_jewel",n).length&&t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","has_unread",v),o(".masthead-inbox-icon",n).attr("data-on-inbox")?window.location="/Inbox":o(".inbox-flyout-container").length&&g?g.destroy():r(s)}),i("inbox").on("thread_clicked",function(e){g&&g.destroy()}),i("inbox").on("has_unread_conversations",function(e){var i=o(".ui_jewel",n);"undefined"!==i&&i.length>0&&i.each(function(e,n){o(n).hasClass("inbox-jewel-test")||o(n).removeClass("hidden")})}),i("inbox").on("no_unread_conversations",function(e){var i=o(".ui_jewel",n);"undefined"!==i&&i.length>0&&i.each(function(e,n){o(n).hasClass("inbox-jewel-test")||o(n).addClass("hidden")})}),i("inbox").on("setup_handler",function(){d()})}var g,v=40186,u=40405,_="Membership_Inbox_Jewel_Test",b=3,m=!1,h=!1;return i("global-nav-inbox").on("open",function(e,n){s(e,n)}),d(),{}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_profile","handlers",["handlers"]);t(["placement","lib/jquery-amd","page-model"],function(e,t,a){"use strict";function r(){var e=t(".button_container").data("pageProperty1"),a=t(".button_container").data("pageProperty2"),r=t(".button_container").data("pageProperty3"),n=t(".button_container").data("pageProperty4");(e&&""!==e||a&&""!==a||r&&""!==r||n&&""!==n)&&require("ta/Core/TA.Record").trackEventOnPage(e,a,r,n)}function n(e){if(c.hasClass("core-login-button")){var t=c.data("isControl"),a=c.data("trackingPid"),r=c.data("joinAttr"),n="reg_trigger",o="mgp_";t&&r&&"view"===e&&(o="mgp_view_control",require("ta/Core/TA.Record").trackEventOnPage(n,o,r)),!t&&r&&a&&require("ta/Core/TA.Record").trackEventOnPage(n,o+e,r,a)}}var o=t("#"+e.id),i=null,c=t(".join-copy-tracking");n("view"),o.on("click","a.login-button",function(e){i&&i.hide("replace-el");var a=t(".core-login-button").data("flowName"),o=t(".core-login-button").data("pid"),c="login";t(this).hasClass("core-login-button")&&(c="join",t(this).hasClass("join-copy-tracking")&&n("click"));var l={flow:a,pid:o,userRequestedForce:"true",locationId:require("page-model").GEO_ID,onSuccess:function(e){if(require("@ta/social.onboarding-state")){var t=e&&(e.hasCreatedMember||!e.hasAcceptedTermsOfUse),a=require("@ta/social.onboarding-state").ACTIONS.setShouldFire;require("redux-init").dispatch(a(t,"MASTHEAD"))}}},d={extraQueryParams:{flowOrigin:c}};l=t.extend(l,d),require("ta/registration/RegOverlay").show(e,e.target,l),e.preventDefault(),r()});var l=function(e,a){var r=t(e).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(t){/\/#\s*$/.test(e.href)||"_blank"==e.target?t.trackEventOnPage(a,"click",r):t.setEvtCookie(a,"click",r,0,e.href)})};o.on("click",".global-nav-profile-menu a.subLink[data-tracking-label], .sidebar-nav-profile a.subLink[data-tracking-label]",function(){l(this,"UtilityNav")}),o.on("click","[data-track-profile-dropdown-open]",function(){var e=require("page-model").session.loggedIn?"Signed_in_profile_dropdown":"Signed_out_profile_dropdown";require(["trjs!ta/Core/TA.Record"],function(t){t.trackEventOnPage("UtilityNav","open",e)})})})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_trips","handlers",["handlers"]);t(["placement","lib/jquery-amd","api-mod","page-model","common/Radio","ta/Core/TA.Record","ta/Core/TA.LocalStorage"],function(e,t,n,o,a,i,l){"use strict";var r=t('[data-placement-name="global_nav_menus"]'),s=a("global-nav"),d=null,u={},c=t("#"+e.id),y=(c.find(".my-trips-dropdown-test"),c.find(".my-trips-dropdown-control"),c.find(".quick-save-test")),f="my-trips-dropdown-test-overlay",p="my_trips_educational_flyout",v=require("page-model").JS_SECURITY_TOKEN,m=require("page-model").session.pageServlet,g=function(e){t.ajax({type:"GET",url:"/data/1.0/trips/item",data:{limit:2},beforeSend:function(e){e.setRequestHeader("X-Requested-By",v)},success:e})},h=function(e){return(new Date).getTime()-e<2592e6},_=function(n){var o=["overlays/position","overlays/styles/flyout","overlays/options/destroyOnHide","overlays/options/autoReposition","overlays/options/fade"],a=function(e,t,o,a,i){return[new t(n[0],"global-nav-flyout global-nav-utility my-trips-dropdown-test-flyout"),e.bottomLeft([-20,-3]),o,a,i(i.SHORT,!0,!0)]};n.on("click",".ui_close_x",function(){s.trigger("hide-overlays",f)}),s.trigger("show-overlay",f,t("#"+e.id).find(".masthead-saves")[0],o,null,a)},w=function(){return t.find(".ui_notification_container").length||t.find(".ui_overlay").length||t.find("#qual_ol").length},b=function(){setTimeout(function(){!w()&&y.length>0&&l.has(p)&&!l.getObject(p)&&0==n.scrollTop()&&(_(y),l.set(p,!0),i.trackEventOnPage(p,"flyout_shown",m,0,!1))},1e3)};s.on("hide-overlays",function(e){e?u[e]&&u[e].hide("hide-overlay")&&(u[e]=null):d&&d.hide("replace-el")}),s.on("show-overlay",function(e,t,n,o,a){d&&d.hide("new-overlay");var i=["trjs!overlays/Overlay"].concat(n);require(i,function(n){var i=a.apply(null,[].slice.apply(arguments,1)),l=new n(t,i);l.domParent=r.find(".global-nav-overlays-container")[0],l.show(),o&&o(l),d=l,e&&(u[e]=l)})}),s.on("run-quick-save-test",function(){l.has(p)||g(function(e){e.data&&(e.data.length<=1||!h(e.data[1].date))&&(l.set(p,!1),b())})}),l.enabled&&("complete"===document.readyState?b():t(window).ready(b))})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_geopill","handlers",["deferred/GeoSearch","handlers"]);n([],function(){})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_links","handlers",["handlers"]);n(["utils/asdf-encoder"],function(e){function n(n,a){window.open(e.asdf(a.getAttribute("data-ahref")).replace(/&amp;/g,"&"),"_self")}return{clickAboutGeoLink:n}})});
require(["ta/p13n/placements"],function(e){var r=e.define.bind(e,"masthead_search","handlers",["deferred/lateHandlers","handlers"]);r(["placement","ta/Core/TA.Store","common/Radio"],function(e,r,a){function n(){if(e.params&&"typeahead_to_store"in e.params){var a=e.params.typeahead_to_store;if(a)for(var n in a)a.hasOwnProperty(n)&&r.store(n,a[n])}}n();var t=r.retrieve("typeahead_dual_search_options");return e.require(["trjs!deferred/lateHandlers"],function(e){a("masthead_search").on("open",function(){e.showSearchOverlay()})}),{getOptions:function(){return t}}})});
define("overlays/styles/flyout",["vanillajs","api-mod"],function(t,e){"use strict";function n(t){this.container=e.createElement("div",{"class":"ui_overlay ui_flyout"+(t?" "+t:"")}),this.contentElement=this.container}var i=function(t,e){return function(){n.call(this,e||this.sourceElement.getAttribute("data-flyout")||""),this.updateContent(t)}};return i});
define("overlays/options/fade",["lib/jquery-amd"],function(t){"use strict";function i(i){t(this.container).addClass(i),t(this.shade).addClass(i)}function n(i){t(this.container).removeClass(i),t(this.shade).removeClass(i)}var l=function(){},s="fade_in",a="fade_out",o=[function(t){i.call(this,t.cl)},function(t){i.call(this,s)},l,function(t){n.call(this,s)},l],c=[l,function(t){i.call(this,t.cl),i.call(this,s)},function(t){n.call(this,t.cl),n.call(this,s)},l,l],e=[l,l,l,function(t){i.call(this,t.out),i.call(this,a)},function(t){n.call(this,t.out),n.call(this,a)}],h=function(t,i,n){return function(){if(t){i=i!==!1,n=n!==!1;var l=this.show,s=this.hide,a=i&&n?o:i?c:e;a[0].call(this,t),i&&(this.show=function(){var i=arguments;l&&l.apply(this,i),a[1].call(this,t),setTimeout(function(){a[2].call(this,t)}.bind(this),t.len)}.bind(this)),n&&(this.hide=function(){var i=arguments;a[3].call(this,t),setTimeout(function(){a[4].call(this,t),s&&s.apply(this,i)}.bind(this),t.len)}.bind(this))}}};return h.NONE={cl:"fade_none",out:"fade_out_none",len:0},h.SHORT={cl:"fade_short",out:"fade_out_short",len:250},h.NORMAL={cl:"fade_normal",out:"fade_out_normal",len:500},h.LONG={cl:"fade_long",out:"fade_out_long",len:1e3},h});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"brand_login_callout","handlers",["handlers"]);o(["placement","lib/jquery-amd","ta/Core/TA.Record","ta/Core/TA.Event","ta/Core/TA.LocalStorage","overlays/Overlay","overlays/styles/flyout","overlays/position","overlays/options/matchWidth","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/options/fade","overlays/options/closeOnScroll","overlays/options/centerArrowOnSrcElement","page-model","overlays/options/repositionOnTaEvent"],function(e,o,n,t,a,r,i,l,s,c,d,u,v,p,g,f){"use strict";var y,_=o(".core-login-button",".global-nav-profile"),m=o(".brand-login-test"),b=o(".brand-text",m),h=o("#brandLoginContainer"),w=g.session.pageServlet,O=g.GEO_ID,C=function(){return o(".ui_notification_container").length||o(".ui_overlay").length},k=function(){m.on("click",".ui_close_x",function(){y&&y.destroy()&&(y=null)}),y=new r(_.parent()[0],new i(m[0],"brand-callout ui_popover"),l.bottomLeft([-10,1]),d,p(_),c,s,v,f("showingCookieConsentBanner"),u(u.LONG,!1,!0)),y.show(),o("#brandLoginPopover").removeClass("hidden")},E=function(e,o){if(!require("page-model").session.loggedIn)return e&&k(),a.set(o,!0),void n.trackEventOnPage(o,"view","servletname_"+w)},S=function(){if(!C()){var e=h.attr("data-tracking-property")||"",o=m.length>0;a.has(e)||E(o,e)}},A=function(e){y&&y.destroy()&&(y=null),n.trackEventOnPage("pcb_campaign_callout_login","click","servletname_"+w,0,window.location.href),require("ta/registration/RegOverlay").show(e,e.target,{flow:"BRAND_SIGNUP_CORE_COMBINED",pid:40197,locationId:O}),e.preventDefault()};o(document).on("regUpdateMember",function(){h.length>0&&n.setEvtCookie("pcb_campaign_callout_Success","view","servletname_"+w,0,window.location.href)}),b.on("click",function(e){A(e)}),a.enabled&&("complete"===document.readyState?S():o(window).ready(S()))})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"back_to_list_responsive","handlers",["handlers"]);t(["placement","ta/Core/TA.Record"],function(e,t){"use strict";function n(e){if(e){var n=e.href,i=e.getAttribute("data-trackingName");i&&n&&t.setEvtCookie(i,"click",null,0,n)}}return{clickLink:n}})});
require(["ta/p13n/placements"],function(e){var i=e.define.bind(e,"breadcrumb_mobile","handlers",["handlers"]);i(["placement","utils/urlDecoder"],function(e,i){"use strict";function n(e,n){i.goToLink(e,n)}function r(e,i){return require.defined("ta/util/Cookie")&&require("ta/util/Cookie").setOneTimeCookie(e,i)}return{goToLink:n,onClick:r}})});
require(["ta/p13n/placements"],function(e){var a=e.define.bind(e,"detail_filter_bar","handlers",["handlers"]);a(["placement","ta/page","ta/Core/TA.FireEvent","common/page-filters"],function(e,a,t,r){function n(e){e&&(o.innerHTML=e.innerHTML)}function i(e,a){var t=a.className;t.match(c)||(a.className=t+" loading",require(["trjs!responsive/collapsibleLayout"],function(e){a.className=t,e.toggle()}))}function l(e,a){var t=a.getAttribute("data-param"),n=a.getAttribute("data-value");return t&&n&&(r.clear(t,n),a.parentNode.removeChild(a)),!1}var o=document.querySelector("#"+e.id+" .filter_bar"),c=/ *\bloading\b/;return t.on("update-"+e.name,n),{removeFilter:l,openFilters:i}})});
define("ta/util/ajaxPreserves",["vanillajs"],function(){function e(e,n,r){if(r&&n&&e){var a=r.querySelectorAll(".ajax_preserve");if(a.length>0){var t={},l=n.querySelectorAll(".ajax_preserve, .ajax_preserve_noreplace");Array.prototype.forEach.call(l,function(e){var n=e.getAttribute("data-ajax-preserve");n&&(t[n]=e)}),Array.prototype.forEach.call(a,function(n){var r=t[n.getAttribute("data-ajax-preserve")];r&&e(r,n)})}}}var n={};return n.copy=e.bind(null,function(e,n){n.parentNode&&n.parentNode.replaceChild(e,n)}),n.innerCopy=e.bind(null,function(e,n){n.innerHTML=e.innerHTML}),n.replaceContent=function(e,r){for(n.copy(r,e),r.innerHTML="";e.childNodes.length>0;)r.appendChild(e.childNodes[0])},n.setContentElement=function(e,r,a){n.copy(e,r),a?e.parentNode&&e.parentNode.replaceChild(r,e):(e.innerHTML="",e.appendChild(r))},n});
define("utils/nodePreserve",["ta/util/ajaxPreserves","utils/to-array"],function(e,r){"use strict";function t(e,r){if(e)for(e.innerHTML="";r.firstChild;)e.appendChild(r.firstChild)}function a(e,r){r&&Array.prototype.forEach.call(r.querySelectorAll(".node-preserve, .ajax_preserve"),function(r){var t=r.getAttribute("data-ajax-preserve");t&&(e[t]=r,r.parentNode&&r.parentNode.removeChild(r))})}function n(e,r){var a=r.getAttribute("data-ajax-preserve"),n=e[a];n&&(r.parentNode&&r.parentNode.replaceChild(n,r),t(n,r),delete e[a])}function i(i,o,l){if(i&&o){var d={};l&&e.innerCopy(i,o),a(d,i),t(i,o),r(i.querySelectorAll("[data-ajax-preserve]")).forEach(n.bind(null,d))}}var o={};return o.nodePreserve=function(e,r){i(e,r,!1)},o.treePreserve=function(e,r){i(e,r,!0)},o});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"detail_filters","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent","ta/prwidgets","utils/nodePreserve"],function(e,n,t,i){function r(n){i.treePreserve(s,n.querySelector("#"+e.id+" .collapsibleContent")),t.initWidgets(s),i.treePreserve(u,n.querySelector("#"+e.id+" .noncollapsible")),t.initWidgets(u)}function o(){require(["trjs!responsive/collapsibleLayout"],function(e){e.toggle()})}function l(){n.on("update-"+e.name,r)}function c(){l()}var s=document.querySelector("#"+e.id+" .collapsibleContent"),u=document.querySelector("#"+e.id+" .noncollapsible");return c(),{done:o}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"enable_cpm_mw_adhesion","handlers",["handlers"]);n(["placement","common/trackingStreams","common/Radio"],function(e,n,o){var t=window.sessionStorage&&!!sessionStorage.setItem,a=function(e){e.preventDefault(),e.stopPropagation();var a=document.querySelector("#taplc_global_footer_0 .foot");a&&a.classList.remove("fixedAd");var r=document.getElementById("FIXED_AD");r.parentNode.innerHTML="",t&&sessionStorage.setItem("ads.fixed.close",!0);var s=require.defined("page-model")?require("page-model").session.pageServlet:void 0;n.trackEvent("FIXED_AD_CLOSE",s,null,null),o("cpm_mw_adhesion").emit("ad_closed")};return{closeFixedAd:a}})});
define("cpm/BannerResizeHandler",["utils/throttle","utils/responsive","common/trackingStreams"],function(e,r,t){"use strict";function n(){a(),s||(window.addEventListener("resize",e(a,300)),s=!0)}function i(e){if(e&&e.getAttribute("data-size"))try{var r=JSON.parse(e.getAttribute("data-size")),n=[].concat.apply([],r);return n.indexOf(o)>-1}catch(e){t.error(e,"Error parsing banner ad size")}return!1}function a(){var e=document.querySelectorAll(".ppr_priv_header_banner_ad, .ppr_priv_footer_banner_ad, .ppr_priv_banner_ad");if(e.length)try{for(var n=r.mobile(),a=0;a<e.length;a++){for(var s=e[a],o=s.querySelectorAll(".gptAd"),d=!1,c=0;c<o.length;c++){var l=o[c];n===!i(l)?(d=!0,l.classList.remove("hidden"),l.classList.remove("inactive")):(l.classList.add("hidden"),l.classList.add("inactive"))}s.classList.toggle("hidden",!d)}}catch(e){t.error(e,"Error handling responsive header/footerbanners")}}var s=!1,o=728,d={};return d.init=n,d});
require(["ta/p13n/placements"],function(n){var e=n.define.bind(n,"footer_banner_ad","handlers",["handlers"]);e(["placement","cpm/BannerResizeHandler"],function(n,e){e.init()})});
define("cpm/ResponsiveBannerResizeHandler",["babel/babel-helpers","utils/throttle","utils/responsive","common/trackingStreams"],function(e,r,t,i){"use strict";function s(){l(),o||(window.addEventListener("resize",r(l,300)),o=!0)}function n(e){e&&e.classList&&e.classList.add("hidden"),e&&e.classList&&e.classList.add("inactive")}function a(e){e&&e.classList&&e.classList.remove("hidden"),e&&e.classList&&e.classList.remove("inactive")}function l(){var e=document.querySelectorAll(".ppr_priv_footer_banner_ad_billboard");if(e.length)try{for(var r=0;r<e.length;r++)for(var s=e[r],l=s.querySelectorAll(".gptAd"),o=0;o<l.length;o++){var c=l[o],d=c.getAttribute("data-breakpoint");if(d){var v=t[d];if(v){var f=v();f?a(c):n(c)}}}}catch(e){i.error(e,"Error handling responsive header/footer banners")}}var o=!1,c={};return c.init=s,c});
define("utils/ResponsiveEvents",["mixins/Events","utils/responsive","utils/throttle","vanillajs"],function(n,e,t){"use strict";function r(n,e,t){var r=n.filter(function(n){return e.indexOf(n)<0}),i=e.filter(function(e){return n.indexOf(e)<0});return t?r.reverse().concat(i.reverse()):r.concat(i)}function i(){var n=document.body.clientWidth;if(n!=o){var t=n>o,i=e.currentBreakpoints(),f=r(u,i,t);f.forEach(function(n){var e=t?"over-":"under-";c.emit(e+n)}),f.length&&c.emit("breakpoint",i[0]),u=i,o=n}}var o=document.documentElement.clientWidth,u=e.currentBreakpoints(),f=["breakpoint"];e.breakpoints.forEach(function(n){f.push("over-"+n,"under-"+n)});var c=n.create(f);return c.onOver=function(n,e){c.on("over-"+n,e)},c.onUnder=function(n,e){c.on("under-"+n,e)},c.offOver=function(n,e){c.off("over-"+n,e)},c.offUnder=function(n,e){c.off("under-"+n,e)},window.addEventListener("resize",t(i,100)),c});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"footer_banner_ad_billboard","handlers",["handlers"]);n(["babel/babel-helpers","placement","cpm/ResponsiveBannerResizeHandler","utils/ResponsiveEvents","ta/Core/TA.Event"],function(e,n,r,o,t){function i(){clearTimeout(u),u=setTimeout(function(){t.fireEvent("responsiveAdSizeChanged")},1e3)}var u=void 0;r.init(),o.offOver("mobile",function(){return i}),o.onOver("mobile",function(){return i}),o.offUnder("mobile",function(){return i}),o.onUnder("mobile",function(){return i}),o.offOver("desktop",function(){return i}),o.onOver("desktop",function(){return i}),o.offUnder("desktop",function(){return i}),o.onUnder("desktop",function(){return i})})});
define("cpm/AdBlockDetect",["lib/jquery-amd","utils/browserutils","ta/Core/TA.Event","ta/Core/TA.Record","ta/util/Error"],function(e,t,n,o,r){"use strict";var i,c,u={},a="ab_chk",d=!1,l=window.CDNHOST||"",f="/img2/x.gif?&ads=1&adsize=2&adslot=3&rnd=",s=function(){var t=Math.floor(1e5*Math.random());return e('<img src="'+l+f+t+'" style="position:absolute" class="ad ad_column" height="0" width="0" />')},v=function(){var e=document.querySelectorAll(".gptAd:not(.inactive)").length;return screen.width<768&&(e+=document.querySelectorAll(".inline_ad_wrapper").length),e},h=function(e,n,r){(!d&&n===a||n&&n!==a)&&((e||r)&&o.trackEventOnPage(n,t.name,e,v(),!1),d=!0)},m=function(e,t,n,o){if(void 0!=typeof o&&(c=o),i){var r=!!c||!i[0].offsetParent;h(r,t,n),r&&e()}};return u.runIfDetected=function(t,o,c){return"function"!=typeof t?void r.record(null,"runIfDetected requires a function"):void n.queueForLoad(function(){d=!1,i?m(t,o,c):(i=s(),i.on("load",function(){m(t,o,c,!1)}),i.on("error",function(){m(t,o,c,!0)}),e("body").append(i))},"AdBlockDetect")},u});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"header_banner_ad","handlers",["handlers"]);t(["placement","page-model","ta","ta/Core/TA.LocalStorage","cpm/AdBlockDetect","cpm/BannerResizeHandler"],function(e,t,n,a,r,s){var i="lastHrVisitTime",d="header_banner_ad_resp",o=55978451,c=6048e5,l=document.getElementById(e.id),p=function(){var e=(new Date).getTime(),t=a.get(i);if(null===t||e-parseInt(t,10)>c){var n=document.getElementById(d);n&&n.parentNode&&n.parentNode.removeChild(n)}a.set(i,e)},m=function(e){if(e&&/970x66/.test(e.id)){var t=l.querySelector(".ldrBackupContent");t&&e.classList&&(e.classList.remove("taEmpty"),e.innerHTML=t.innerHTML,n.trackEventOnPage("brand_fallback","displayed","save_money",0,!0))}},u=function(e){if(e&&!e.offsetTop){var t=document.getElementById(d),n=l.querySelector(".ldrBkUp");t&&n&&n.classList&&(n.classList.add("height66"),t.appendChild(n.cloneNode(!0)))}},f=function(){n.on("onAdRender",function(a){if(a){var r=l.querySelector(".gptAd");if(a.domId===r.id){(a.isEmpty||a.advertiserId===o)&&m(r),r.classList&&(66==r.clientHeight?r.classList.add("height66"):r.classList.remove("height66"));var s=JSON.stringify({testGroup:e.params?e.params.testGroup:"test group unknown",sessionId:t&&t.session&&t.session.sessionId||0,adCreativeId:a.creativeId||0,adWasShown:a.advertiserId!==o});n.trackEventOnPage("inventory_1_5_ad_impression","impression",s,!0)}}})};e.params&&e.params.shouldCheckTime&&p(),s.init(),f(),r.runIfDetected(function(){u(l.querySelector(".gptAd"))},"brand_fallback_ab",!1)})});
define("utils/resize-invalidated-cache",["babel/babel-helpers"],function(e){"use strict";var t="__resize-cache",n=Date.now();return window.addEventListener("resize",function(){return n=Date.now()}),function(e){var a=e[t];return(null==a||a.timestamp<n)&&(a=e[t]={timestamp:n,value:e()}),a.value}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"hotels_loading_box","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent","utils/responsive","utils/resize-invalidated-cache"],function(e,n,i,a){function r(e,n){var r=t.innerHTML.indexOf("smart_deals_responsive")==-1,l=a(i.mobile),o=n<2&&(r||l)&&(e.TRAVEL_INFO||e.FILTERS||e.MAIN_META||e.UNKNOWN||e.REVIEW_LIST||e.SORT_ORDER||e.PAGE_OFFSET);!o!=!s&&t&&(s=o,t.style.display=o?"block":"none")}var t=document.querySelector("#"+e.id),s=!1;return n.on("page-changes-pending",r),{}})});
define("utils/classnameUtils",["vanillajs"],function(){function s(s){return e[s]?e[s].lastIndex=0:e[s]=new RegExp("(\\s|^)"+s+"(\\s|$)","g"),e[s]}var a={},e={};return a.hasClass=function(a,e){return!!a&&(a.classList?a.classList.contains(e):s(e).test(a.className))},a.addClass=function(s,e){s&&e&&(s.classList?s.classList.add(e):a.hasClass(s,e)||(s.className+=" "+e))},a.removeClass=function(a,e){a&&e&&(a.classList?a.classList.remove(e):a.className=a.className.replace(s(e)," "))},a.toggleClass=function(s,e,n){s&&(n||void 0===n&&!a.hasClass(s,e)?a.addClass(s,e):a.removeClass(s,e))},a.getParentByClassname=function(s,e){for(var n=s&&s.parentNode;n;n=n.parentNode)if(a.hasClass(n,e))return n;return null},a});
define("hotels/SpecialMessageUtil",["babel/babel-helpers","ta/util/SessionStorage","utils/responsive","utils/classnameUtils"],function(e,s,t,a){function r(e,s){var t=o();return!!t[e]&&(!s||!!t[e][s])}function i(e,s){a.removeClass(e,d),"BRAND_MESSAGING_DEFAULT"!==s&&"BRAND_MESSAGING_MULTIPLE_SITES"!==s||!t.mobile()||l(s)}function n(e,s,t,r){a.addClass(e,d),t&&!r||l(s,r)}function c(e){var s=e.querySelector("["+S+"]");return s?s.getAttribute(S):""}function u(e){var s=e.querySelector("["+b+"]");return!(!s||!s.getAttribute(b))}function l(e,t){var a=o();a[e]=a[e]||{},t&&(a[e][t]=!0);try{s.setObject(g,a)}catch(e){}}function o(){try{return s.getObject(g)||{}}catch(e){}return{}}var g="dismissedMessages",d="collapsed",S="data-messageType",b="data-persist-once-per-geo";return{displayMessage:i,dismissMessage:n,wasMessageDismissed:r,getMessageType:c,isMessagePersistableOncePerGeo:u}});
require(["ta/p13n/placements"],function(e){var s=e.define.bind(e,"hsx_special_messaging","handlers",["handlers"]);s(["placement","page-model","ta/Core/TA.FireEvent","ta/prwidgets","utils/nodePreserve","hotels/SpecialMessageUtil","common/Radio"],function(e,s,a,t,i,n,r){function l(e){if(e&&!n.wasMessageDismissed(e,p&&g)){var s=m.querySelector(".hsx_special_messaging > .collapsed");n.displayMessage(s,e)}}function c(e){var s=n.getMessageType(e);s&&s!==o&&!n.wasMessageDismissed(s,p&&g)&&(o=s,e&&e.getAttribute("data-targetEvent")!=d&&(e=e.querySelector('[data-targetEvent="'+d+'"]')),e&&m&&(i.treePreserve(m,e),t.initWidgets(m),l(o)))}var d="update-"+e.name,g=s.GEO_ID,m=document.getElementById(e.id),o=n.getMessageType(m),p=n.isMessagePersistableOncePerGeo(m);a.on(d,c),l(o);var u=/ *\bhidden\b/;return r("hsx_special_message").on("temporaryHide",function(e){e?m.className.match(u)||(m.className=m.className+" hidden"):m.className=m.className.replace(u,"")}),{}})});
require(["ta/prwidgets"],function(n){var t=n.define.bind(n,"common_north_star_pagination","handlers",["handlers"]);t(["widget","vanillajs","ta/Core/TA.Event","common/trackingStreams"],function(n,t,i,a){"use strict";function e(n,t){i.fireEvent("paginationChanged",t)}function r(n,t,i,e,r){a.trackEvent(i,"click",e,r)}return{paginate:e,trackClick:r}})});
define("ta/util/ReCaptcha",["vanillajs","ns-exporter","common/trackingStreams"],function(e,t,r){"use strict";var n=!1,a={},c={},o="",i=function(e){if(e<0)return 300;switch(e){case 0:return 0;case 1:return 250;case 2:return 500;case 3:return 1e3;default:return 2e3}},l=function(e,t){require.defined("ta/util/Error")?require("ta/util/Error").record(t+": "+e):ta.merror&&ta.merror.recordError&&"function"==typeof ta.merror.recordError&&ta.merror.recordError(t,null,null,null,e)},u=function(){r.trackEvent("captcha","recaptcha","displayed")},d=function(e,t){var r=document.getElementById(t);return r&&"INPUT"===r.tagName?void(r.value=e||""):void l(null,"The recaptcha input id was not found on the page: "+t)},p={init:function(e,t,r,a){try{if(c[r]=a,n)return;e||l(null,"No language specified for recaptcha."),t&&(o=t);var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.defer=!0,i.src="https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit&hl="+e,document.getElementsByTagName("head")[0].appendChild(i),n=!0}catch(e){l(e,"Could not inject recaptcha script on to page.")}},reset:function(e){if(!e)return void l(null,"No reset key specified.");if(a[e]||0===a[e])try{"undefined"!=typeof grecaptcha&&grecaptcha&&grecaptcha.reset&&"function"==typeof grecaptcha.reset&&grecaptcha.reset(a[e])}catch(t){l(t,"Error resetting recaptcha object: "+e)}},resetAll:function(){for(var e in a)a.hasOwnProperty(e)&&p.reset(e)},clear:function(){a={}},checkGrecaptcha:function(){return!("undefined"==typeof grecaptcha||!grecaptcha||!grecaptcha.render||"function"!=typeof grecaptcha.render)},checkCaptchaRendered:function(e){return!(!a[e]&&0!==a[e])},showSync:function(e,t,r){var n=0,a=window.setInterval(function(){return++n>=40?(window.clearInterval(a),void l(null,"Recaptcha JS was not loaded on the page.")):void("undefined"!=typeof grecaptcha&&(p.show(e,t,r),window.clearInterval(a)))},250)},showAll:function(e){for(var t in c)c.hasOwnProperty(t)&&p.show(e,t,c[t])},waitForElm:function(e,t,r){var n=0,a=function(){if(++n>=5)return window.clearInterval(c),void l(null,"Recaptcha element id was not loaded on the page."+t);var a=document.getElementById(t);a&&(window.clearInterval(c),p.show(e,t,r))},c=window.setInterval(a,250)},execute:function(){return"undefined"==typeof grecaptcha||"function"!=typeof grecaptcha.execute?void l(null,"Calling execute while captcha is not rendered"):void grecaptcha.execute()},show:function(e,t,r,n,c,f,h){try{if("undefined"==typeof grecaptcha||!grecaptcha||!grecaptcha.render||"function"!=typeof grecaptcha.render)return void l(null,"Recaptcha JS was not loaded on the page.");if(!e||!t||!r)return void l(null,"Please pass a site key, element id, and input id.");var s=document.getElementById(t);if(!s)return void p.waitForElm(e,t,r);if(a[t]&&"object"==typeof a[t])return;var g=0,w=i(g),y=document.getElementById("captchaSpinner"),m=function(){if(1==g&&null!==y&&(y.style.display="block"),++g>=5){window.clearTimeout(v),y&&(y.style.display="none"),l(null,"Couldn't load recaptcha"),"function"==typeof h&&h.call();var u=document.getElementById("captchaError");return void(null!==u&&(u.className="captchaError errorMsg warning wrap",u.innerHTML=o))}if("undefined"==typeof a[t]){var s=n?"compact":"normal";c&&(s="invisible"),a[t]=grecaptcha.render(t,{"sitekey":e,"theme":"light","type":"image","tabindex":0,"size":s,"callback":function(e){d(e,r),"function"==typeof f&&f(e,r)},"expired-callback":function(){p.reset(t)}}),w=i(g),v=window.setTimeout(m,w)}else window.clearTimeout(v),y&&(y.style.display="none")},v=window.setTimeout(m,w);u()}catch(e){l(e,"Error loading recaptcha.")}}};return t.exportTo(p,"ta.util.ReCaptcha"),p});
define("ta/util/GeeTest",["ns-exporter","common/trackingStreams"],function(e,t){"use strict";var n=!1,r="float",o={},a={},c="",i=t.error,s=function(){t.trackEvent("captcha","geetest","displayed")},u=function(e){var t=e.getElementsByClassName("gt_guide_tip");t&&t.length>0&&c&&(t[0].innerHTML=c)},l={init:function(e,t){try{if(n||"undefined"!=typeof Geetest&&Geetest)return;r=t?t:r,c=e;var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.defer=!0,o.src="https://api.geetest.com/get.php?callback=ta.util.GeeTest.onloadCallback",document.getElementsByTagName("head")[0].appendChild(o),n=!0}catch(e){i(e,"Could not inject geetest script on to page.")}},reset:function(e){try{o[e]&&"function"==typeof o[e].refresh&&(o[e].refresh(),a[e]=null)}catch(t){i(t,"Error resetting recaptcha object: "+e)}},resetAll:function(){for(var e in o)o.hasOwnProperty(e)&&l.reset(e)},clear:function(){o={},a={}},waitForLoad:function(){return new Promise(function(e,t){var n=0,r=window.setInterval(function(){return++n>=40?(window.clearTimeout(r),i(null,"GeeTest JS was not loaded on the page."),void t()):void("undefined"!=typeof Geetest&&(window.clearTimeout(r),e()))},250)})},showSync:function(e,t,n){return l.waitForLoad().then(function(){return l.show(e,t,n)})},show:function(e,t,n){try{if("undefined"==typeof Geetest||!Geetest)return i(null,"GeeTest JS was not loaded on the page."),Promise.reject();if(!e||!t)return i(null,"Please pass a site key and element id."),Promise.reject();var c=document.getElementById(t);if(!c)return i(null,"The geetest element id was not found on the page: "+t),Promise.reject();("object"!=typeof o[t]||n)&&(o[t]=new Geetest({gt:e,product:r,https:!0}),o[t].onReady(function(){u(c)}).appendTo(c));var l=o[t];return a[t]=new Promise(function(e){l.onSuccess(function(){e({challenge:c.querySelector(".geetest_challenge").value,validate:c.querySelector(".geetest_validate").value,seccode:c.querySelector(".geetest_seccode").value})})}),s(),a[t]}catch(e){return i(e,"Error loading geetest captcha."),Promise.reject()}},onloadCallback:function(){},checkGeeTestRendered:function(e){return!!o[e]}};return e.exportTo(l,"ta.util.GeeTest"),l});
/*
 * hoverIntent v1.8.1 // 2014.08.11 // jQuery v1.9.1+
 * http://briancherne.github.io/jquery-hoverIntent/
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2014 Brian Cherne
 */
define("lib/jquery/jquery.hoverIntent",["lib/jquery-amd"],function(d){var h={interval:100,sensitivity:6,timeout:0};var i=0;var g,f;var b=function(j){g=j.pageX;f=j.pageY};var a=function(m,k,l,j){if(Math.sqrt((l.pX-g)*(l.pX-g)+(l.pY-f)*(l.pY-f))<j.sensitivity){k.off(l.event,b);delete l.timeoutId;l.isActive=true;m.pageX=g;m.pageY=f;delete l.pX;delete l.pY;return j.over.apply(k[0],[m])}else{l.pX=g;l.pY=f;l.timeoutId=setTimeout(function(){a(m,k,l,j)},j.interval)}};var e=function(m,k,l,j){delete k.data("hoverIntent")[l.id];return j.apply(k[0],[m])};return function c(n,o,j){var m=i++;var l=d.extend({},h);if(d.isPlainObject(n)){l=d.extend(l,n);if(!d.isFunction(l.out)){l.out=l.over}}else{if(d.isFunction(o)){l=d.extend(l,{over:n,out:o,selector:j})}else{l=d.extend(l,{over:n,out:n,selector:o})}}var k=function(u){var s=d.extend({},u);var q=d(this);var p=q.data("hoverIntent");if(!p){q.data("hoverIntent",(p={}))}var t=p[m];if(!t){p[m]=t={id:m}}if(t.timeoutId){t.timeoutId=clearTimeout(t.timeoutId)}var r=t.event="mousemove.hoverIntent.hoverIntent"+m;if(u.type==="mouseenter"){if(t.isActive){return}t.pX=s.pageX;t.pY=s.pageY;q.off(r,b).on(r,b);t.timeoutId=setTimeout(function(){a(s,q,t,l)},l.interval)}else{if(!t.isActive){return}q.off(r,b);t.timeoutId=setTimeout(function(){e(s,q,t,l.out)},l.timeout)}};return this.on({"mouseenter.hoverIntent":k,"mouseleave.hoverIntent":k},l.selector)}});
define("ta/util/Element",["lib/jquery-amd","utils/ajax","ta/Core/TA.Record","ns-exporter","ta/Core/TA.Event","lib/jquery/jquery.hoverIntent","utils/throttle"],function(t,e,i,n,o,r,a){function l(e,i){var n=e.style.fontSize||t(e).css("font-size"),o=n.replace(/[\d\.]/g,""),r=c(o,parseFloat(n)*i);e.style.fontSize=r+o}function s(){function e(e,i){var r=n[e],a=t(r.e);if(a.length>0){var l=r.inView;r.inView=!1,a.each(function(){return!r.inView&&void(r.inView=o.inViewport(this,i,r.persistentElmt,r.offset))}),!l&&r.inView&&(r.cb&&r.cb(r.e),r.multiple||n.splice(e,1))}}function i(){var e=t(window),i={};return i.top=e.scrollTop(),i.left=e.scrollLeft(),i.bottom=i.top+e.height(),i.right=i.left+e.width(),i}var n=[],o=this;this.add=function(i){n.push(i),e(n.length-1),n.length>0&&t(window).on("resize scroll",r)},this.inViewport=function(e,n,o,r){if(e=t(e),!e.is(":visible"))return!1;if(r=t.extend({top:0,left:0,right:0,bottom:0},r),o){var a=o.offsetHeight;a&&(0==o.offsetTop?r.bottom-=a:r.top+=a)}var l=e.offset();return n||(n=i()),n.bottom>=Math.max(l.top+r.top,0)&&n.right>=Math.max(l.left+r.left,0)&&n.top<=Math.max(l.top+e.height()+r.bottom,0)&&n.left<=Math.max(l.left+e.width()+r.right,0)};var r=a(function(){if(n.length){for(var o=i(),a=n.length-1;a>=0;a--)e(a,o);0==n.length&&t(window).off("resize scroll",r)}},300);t(window).on("load",r)}var f={};f.replaceContent=function(i,n,o,r){if(n=t(n),!n.find(".progresstab")){var a=o+(o.indexOf("?")==-1?"?":"&")+"xhr=true";n.append('<div class="progresstab"></div>'),e({url:a,success:function(t){n.html(t),window.behavior&&window.behavior.apply(n),r&&r(n.get(0))},evalScripts:!0}).get()}},f.spinner=function(e,i){t(i).parents(".spinnerReplaceable").children().each(function(t,e){e.toggle(e.hasClass("spinner"))})},f.limitLength=function(t,e,i){return!(e.value.length>=i)||(e.value=e.value.substr(0,i),!1)},f.updateValue=function(e,i){if(e=t(e),e.length>0&&e.val()!=i){e.val(i);var n=document.createEvent("HTMLEvents");n.initEvent("change",!1,!1),e[0].dispatchEvent(n)}},f.keepInWindow=function(e,i){function n(t,e){var i=parseInt(t.get(0).style[e]);return i||0===i}if(e){e=t(e),i||(i={top:!0,right:!0,bottom:!0,left:!0});var o=2,r=e.offset();r.right=r.left+e.width(),r.bottom=r.top+e.height();var a=t(window),l=a.width(),s=a.height(),f=a.scrollTop(),c=a.scrollLeft();i.right&&n(e,"right")?r.left<c+o?e.css("right",l+c-e.width()-o):r.right>l-c-o&&e.css("right",o):i.left&&n(e,"left")&&(r.left<c+o?e.css("left",o):r.right>l-c-o&&e.setStyle("left",l+c-r.width-o)),i.bottom&&n(e,"bottom")?r.top<f+o?e.setStyle("bottom",s+f-r.height-o):r.bottom>s-f-o&&e.setStyle("bottom",o):i.top&&n(e,"top")&&(r.top<f+o?e.setStyle("top",o):r.bottom>s-f-o&&e.setStyle("top",s+f-r.height-o))}};var c=function(t,e){var i=e;return"px"==t?i=8:"em"==t?i=.5:"pt"==t?i=6:"%"==t&&(i=50),Math.max(e,i)};f.makeTextFit=function(e,i,n,r,a){a=a||1,r=r||8;var l=!1;if(t(e).each(function(e,o){o=t(o);var a=o.find(i);if(a){var s;if("number"==typeof n)s=n;else if(s=o.find(n).outerHeight(),void 0===s)return;var f=a.height();if(s<f){var c=a.css("font-size");if(c){var u=function(t,e){return"px"==e&&t>=r||"em"==e&&t>=.5||"pt"==e&&t>6||"%"==e&&t>=50},h=c.replace(/[\d\.]/g,""),d=parseFloat(c)*Math.sqrt(s/f);"px"==h&&(d=Math.max(parseInt(d),r)),u(d,h)&&(a.css("font-size",d+h),l=!0)}}}}),l>0&&a<4){o.fireEvent("makeTextFitResizedText");var s=this;setTimeout(function(){s.makeTextFit(e,i,n,r,a+1)},1)}},function(){function e(t){var e=!1;if(!t||t.clientWidth&&t.clientWidth<=0)return!1;for(var i=t.clientWidth,n=(parseFloat(t.style.paddingLeft)||0)+(parseFloat(t.style.paddingRight)||0),o=0;o<a&&t.scrollWidth>i;o++){var r=(i-n)/(t.scrollWidth-n);l(t,r),e=!0}return t.scrollWidth>i&&(l(t,s),e=!0),e}function i(t,e){var i=t.getAttribute("data-sizegroup"),n=parseFloat(t.style.fontSize);i&&(e[i]=Math.min(e[i]||Number.MAX_VALUE,n))}function n(t){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i],o=[];n.forEach(function(t){o.push([t.scrollWidth,t])}),o.sort(function(t,e){return e[0]-t[0]});for(var r=0;r<o.length&&e(o[r][1]);r++);}}function r(t){var i;for(var n in t)t.hasOwnProperty(n)&&(i={},t[n].forEach(function(t){var n=t.innerHTML,o=i[n];void 0!==o?0!=o&&(t.style.fontSize=o):e(t)?i[n]=t.style.fontSize||0:i[n]=0}))}var a=4,s=.9;f.makeTextFitOneLine=function(i,n){var o=t(i);if(o.each(function(t,i){e(i)}),n){var r;o.each(function(e,i){var n=t(i).css("font-size");(!r||parseFloat(n)<parseFloat(r))&&(r=n)}),r&&o.css("font-size",r)}},f.autoResizeTextInNode=function(o){o=t(o);var a=t(".autoResize",o),l={},s={width:{},text:{}};a.filter(":visible").removeClass("autoResize").each(function(t,n){var o,r,a=n.getAttribute("data-resizeWidthGroup"),f=n.getAttribute("data-resizeTextGroup");a?(o=s.width,r=a):f&&(o=s.text,r=f),o?(o[r]||(o[r]=[]),o[r].push(n)):(e(n),i(n,l))}),n(s.width),r(s.text),a.each(function(t,e){var i=e.getAttribute("data-sizegroup");i&&(e.style.fontSize=l[i]+"px")})},o.queueForLoad(function(){require.defined("ta/Core/TA.Store")&&require("ta/Core/TA.Store").retrieve("no-old-resize")||(o.on("refreshedDOMContent",function(t){f.autoResizeTextInNode(t)}),document.body&&f.autoResizeTextInNode(document.body))},"autoResize all targets on load")}(),f.makeSameWidth=function(e){var i=0;t(e).each(function(t,e){var n=Math.round(parseFloat(e.style.width));n&&n>i&&(i=n)}).css("width",i)},f.fitToContentsHorizontally=function(e,i,n,o){if(o=o||1,!(o<=0||i>n)){var r=function(t){return t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight};t(e).each(function(t,e){e.style.width=i;for(var a=i;a<n&&r(e);a+=o)e.style.width=a;r(e)&&(e.style.width=n)})}},f.scrollIntoView=function(e,i,n,o){if(e){e=t(e);var r=e.offset().top+(i||0);if(n){for(var a=t("html, body"),l=e.parent(),s=function(t){return("auto"===t.css("overflow-y")||"scroll"===t.css("overflow-y"))&&t[0].scrollHeight>t[0].clientHeight};l.length&&!l.is(a)&&!s(l);)l=l.parent();l.length&&!l.is(a)&&s(l)?r=l.offset().top+l.scrollTop()+(i||0):l=a,l.animate({scrollTop:r},{duration:300,complete:function(){o&&o()}})}else window.scrollTo(0,r),o&&o()}};var u=f.scrollTrackers=new s;return f.isScrolledIntoView=function(t,e,i){return u.inViewport(t,null,e,i)},f.doIfElementIsVisible=function(t,e,i,n){t&&u.add({e:t,cb:function(){return e.apply(null,i),!0},offset:n})},f.trackWhenScrolledIntoView=function(t,e,n){if(t&&e){var o=function(){i.trackEventOnPage.apply(i,e)};u.add({e:t,cb:o,multiple:n})}},f.getTotalWidth=function(e){return t(e).outerWidth(!0)||0},f.getTotalHeight=function(e){return t(e).outerHeight(!0)||0},f.hoverIntent=function(e,i){r.bind(t(e),i)()},n.exportTo(f,"ta.util.element"),f});
define("overlays/styles/default",["lib/jquery-amd"],function(t){"use strict";function e(e,a,i,s){this.container=t("<"+(s||"div")+"/>").addClass("ui_overlay").addClass(e||"").get(0),a&&(this.header=t("<div/>",{"class":"header_text"}).html(a).appendTo(this.container).get(0)),i&&(this.subheader=t("<div/>").addClass("subheader_text").html(i).appendTo(this.container).get(0)),this.contentElement=t("<div/>").addClass("body_text").appendTo(this.container).get(0),this.close=t("<div/>").addClass("ui_close_x").appendTo(this.container).get(0)}var a=function(a,i,s,n,d,o){return i=(i||"")+(a&&" "+a.getAttribute("data-overlay")||""),s=s||a&&a.getAttribute("data-header")||"",n=n||a&&a.getAttribute("data-subheader")||"",function(){e.call(this,i,s,n,o),this.updateContent(d),t(this.close).on("click",function(){this.hide.apply(this,arguments.length?arguments:["close-button"])}.bind(this))}};return a});
define("overlays/position/conditional",["overlays/position/base"],function(o){"use strict";return function(i,n,t){var s=o();s.label="conditional";var f;return s.onPosition=function(){var o=i()?n:t;f&&o!==f&&f.offPosition&&f.offPosition.apply(this),(f=o).onPosition&&f.onPosition.apply(this)},s.offPosition=function(){f=null;var o=i()?n:t;o.offPosition&&o.offPosition.apply(this)},s}});
define("overlays/position/fullscreen",["lib/jquery-amd","overlays/position/base","overlays/options/disableBodyScroll"],function(o,i,t){"use strict";return function(n){function s(){e.call(this),l.call(this)}var e=i(),l=t(n);return s.onPosition=e.onPosition=function(){o(this.container).css({position:"fixed",top:0,left:0,bottom:0,right:0,height:"auto",width:"auto"}).addClass("fullscreen")},s.offPosition=e.offPosition=function(){o(this.container).removeClass("fullscreen")},s}});
define("overlays/options/closeOnBackButton",[],function(){"use strict";return function(n){if(!window.history||!window.history.pushState)return function(){};var t=function(t){return function(){location.hash!==n&&t&&t.isOpen()&&t.hide()}};return function(){var o=this,i=t(o);o.on("show",function(){history.pushState({showOverlayHash:n},"",location.href.replace(/#.*|$/,"#"+n)),window.addEventListener("popstate",i,!1)}).on("hide",function(){window.removeEventListener("popstate",i,!1),location.hash==="#"+n&&history.back()})}}});
define("pages/inappropriate_vote_stub",["ta","ta/util/Element","ta/Core/TA.Store","vanillajs","overlays/Overlay","overlays/styles/default","overlays/position/conditional","utils/responsive","overlays/position/fullscreen","overlays/position/center","overlays/options/closeOnEscape","overlays/position/autosize","overlays/options/autoReposition","overlays/options/closeOnWindowshadeClick","overlays/options/closeOnBackButton","overlays/styles/windowshade","overlays/options/ajax"],function(e,o,t,n,i,s,r,a,l,p,d,u,c,w,v,y,m){"use strict";function _(e){o.isScrolledIntoView(e.elmt)||o.scrollIntoView(e.elmt),window.JS_SECURITY_TOKEN=e.token||window.JS_SECURITY_TOKEN,!window.JS_SECURITY_TOKEN&&window.ta.m&&window.ta.m.secureToken&&(window.JS_SECURITY_TOKEN=window.ta.m.secureToken);var n="/ReportIAP?token="+window.JS_SECURITY_TOKEN+"&step=START&voteContentType="+e.voteContentType;n+=e.owner?"&action=explain&reason=21&reviewid="+e.reviewid+"&isGeo="+e.isGeo+"&locationid="+e.locationid:"&action=reportIAP&contentId="+e.contentId,E?(E.updateContent(n),E.sourceElement=e.elmt,require("pages/inappropriate_vote").updateContentId(e.contentId),E.show()):require(["trjs!inappropriate_vote_dlg"],function(){E=new i(e.elmt,[s(e.elmt,"iapFlyout ui_modal"),r(a.mobile,l(),p()),d,u(0),c,y("light"),w,v("ReportProblem"),m(n,{})]),E.on("contentLoaded",function(){E.sourceElement.getAttribute("data-owner")||require("pages/inappropriate_vote").initUI(E,E.sourceElement)}),E.show(),t.store("iapFlyout",E)})}var E,T={};return T.open=function(e,o,t){t.elmt=t.elmt||o;var n={flow:"CORE_COMBINED",pid:t.reg_pid||39841,userRequestedForce:!0,loggedInBypass:!0,onSuccess:_.bind(null,t)};require(["trjs!ta/registration/RegOverlay"],function(e){e.show({type:"dummy"},t.elmt,n)})},T});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"common_location_topic_resp","handlers",["handlers"]);r(["widget","overlays/loading-spinner","ta/prwidgets","ajax-request","common/trackingStreams","ta/util/ReCaptcha","ta/util/GeeTest","pages/inappropriate_vote_stub","ta/Core/TA.FireEvent","utils/classnameUtils"],function(e,r,t,n,a,l,i,o,s,c){"use strict";function d(){var e=O.querySelector(".answerForm");c.removeClass(e,"hidden"),O.querySelector(".answerText").focus(),a.trackEvent(I,"click","answer")}function u(n,l,i){var o=O.querySelector(".answerList");o&&(o.innerHTML=r(),e.require(["trhtml!LOCATION_TOPIC_WIDGETS/HSX_RESP?t="+i+"&o=0&limit=20"],function(e){o.innerHTML=e.innerHTML,t.initWidgets(o),c.addClass(O.querySelector(".showAll"),"hidden"),c.removeClass(O.querySelector(".hideAll"),"hidden");var r=O.querySelectorAll(".answerList > *");Array.prototype.forEach.call(r,function(e){c.removeClass(e,"hidden")})}),a.trackEvent(I,"click","show_all_answers"))}function h(){c.addClass(O.querySelector(".hideAll"),"hidden"),c.removeClass(O.querySelector(".showAll"),"hidden");var e=O.querySelectorAll(".answerList > *");Array.prototype.forEach.call(e,function(e){c.addClass(e,"hidden")}),c.removeClass(O.querySelector(".answerList > *"),"hidden")}function v(){c.addClass(O.querySelector(".delete"),"hidden"),c.removeClass(O.querySelector(".confirmDelete"),"hidden"),c.removeClass(O.querySelector(".cancelDelete"),"hidden"),c.removeClass(O.querySelector(".confirmDeleteExplanation"),"hidden")}function f(r,t,l,i){c.addClass(O.querySelector(".confirmDelete"),"hidden"),c.addClass(O.querySelector(".cancelDelete"),"hidden"),c.addClass(O.querySelector(".confirmDeleteExplanation"),"hidden"),c.removeClass(O.querySelector(".delete"),"hidden"),s.fireEvent("qaQuestionDeleted");var o=function(){var r=O.parentElement;r.removeChild(O),r.querySelector("[data-prwidget-name="+e.name+"]")||s.fireEvent("qaLastQuestionDeleted")},d=function(e){a.error(I,"Failed to delete answer (location_topic_resp/handlers)",e)};n("/AnswersAjax",{method:"POST",dataType:"html",data:{"act":"dt","tpcid":l,"token":i},trackEvent:{module:"answers_faq_answer_crud",action:"answers_faq_delete_answer",context:l,value:0,noninteraction:!1}}).then(o,d)}function m(){c.addClass(O.querySelector(".confirmDelete"),"hidden"),c.addClass(O.querySelector(".cancelDelete"),"hidden"),c.addClass(O.querySelector(".confirmDeleteExplanation"),"hidden"),c.removeClass(O.querySelector(".delete"),"hidden")}function y(){var e=O.querySelector(".answerText");if(!e.value.length)return void e.focus();var r={username:!0};return require(["trjs!ta/registration/AuthCheck"],function(e){if(e.isAuthorized(r))S();else{var t={flow:"CONTENT_SUBMISSION",pid:-1,userRequestedForce:!0,onSuccess:function(){S()}};require(["trjs!ta/registration/RegOverlay","utils/responsive"],function(e,r){e.showRegOverlay(null,null,r.mobile(),t)})}}),!1}function p(){c.addClass(O.querySelector(".answerForm"),"hidden")}function q(e){return e?e.value:""}function S(){var r=O.querySelector(".answerForm"),a=r.querySelector(".answerText"),o={act:"ap",psttxt:q(a),tpcid:r.topicid.value,pid:-1,altsessid:r.altsessid.value,token:r.token.value,lcid:r.lcid.value,"g-recaptcha-response":q(r.querySelector(".recaptcha_input")),geetest_challenge:q(r.geetest_challenge),geetest_validate:q(r.geetest_validate),geetest_seccode:q(r.geetest_seccode),useJson:!0},s=r.querySelector(".formSubmit");c.addClass(s,"loading");var d=function(n){l.resetAll(),i.resetAll(),w(n),c.removeClass(s,"loading"),c.addClass(r,"hidden");var o=JSON.parse(n);o.postingId&&e.require(["trhtml!LOCATION_POSTING_WIDGETS/HSX_RESP?lp="+o.postingId],function(e){var r=O.querySelector(".answerList");r.insertBefore(e,r.firstChild),t.initWidgets(r),a.value="",C()})},u=function(e){l.resetAll(),i.resetAll(),null!==e&&w(e),c.removeClass(s,"loading")};n("/AnswersAjax",{method:"POST",dataType:"html",data:o,trackEvent:{module:"answers_faq_answer_crud",action:"answers_faq_create_answer",context:o.tpcid,value:0,noninteraction:!1}}).then(d,u)}function C(){O.querySelector(".errors").innerHTML=""}function w(e){try{var r=JSON.parse(e)}catch(e){return}if(r.ALERT&&(r.errors=[r.ALERT]),r.errors&&r.errors.length>0){var t=O.querySelector(".errors",O);t.innerHTML="";for(var n=0;n<r.errors.length;n++){var a=document.createElement("li");a.innerHTML=r.errors[n],t.appendChild(a)}c.removeClass(t,"hidden")}}function _(e,r,t){o.open(e,r,{voteContentType:"LOCATION_TOPIC",contentId:t})}function g(e,r,t){a.trackEvent(I,"click","answers_faq_answer_form",t)}function A(){require(["trjs!ta/util/CaptchaHandler"],function(){var e=O.querySelector(".captcha_here");e&&null==e.querySelector("#sharedCaptcha")&&e.appendChild(document.getElementById("sharedCaptcha"))})}function E(e,r){return require(["trjs!members/memberOverlay"],function(t){t.initMemberOverlay(e,r,r.getAttribute("data-overlay-id"),"Answers","user_name_photo"),a.trackEvent(I,"click","show_reviewer_info_window")}),!1}function T(e){require(["trjs!overlays/widgetoverlays"],function(r){r.showLightbox("QA_GET_VERIFIED",{locationId:e},{})})}function k(e,r,t){require(["trjs!overlays/widgetoverlays"],function(e){e.showLightbox("QA_POSTING_GUIDELINES",{locationId:t},{})})}var O=e.element,I="faq";return{answerButtonClick:d,showAllClick:u,hideAllClick:h,deleteClick:v,confirmDeleteClick:f,cancelDeleteClick:m,clearErrors:C,submitAnswer:y,cancelAnswer:p,moveCaptchaHere:A,iapVote:_,trackAnswerFormClick:g,initMemberOverlay:E,initGetVerifiedOverlay:T,initPostingGuidelinesOverlay:k}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"common_location_posting_resp","handlers",["handlers"]);t(["widget","vanillajs","ta/prwidgets","common/trackingStreams","pages/inappropriate_vote_stub","ajax-request","utils/classnameUtils"],function(e,t,n,r,a,o,i){"use strict";function l(e,t,n,a,o){d(n,a,o,1),r.trackEvent(y,"click","upvote")}function s(e,t,n,a,o){d(n,a,o,-1),r.trackEvent(y,"click","downvote")}function c(e,t,n,a){var i=function(e){var t=JSON.parse(e),n=q.querySelector(".score");n&&(n.innerHTML=t.votes);var r=q.querySelector(".voteCount");r&&(r.dataset.content=t.message,r.innerHTML=t.text),require(["trjs!overlays/uiOverlay"],function(e){e(null,r)})},l=function(e){r.error(y,"Failed to vote on Q&A location_posting_resp",e)};o("/AnswersAjax",{method:"POST",dataType:"json",trackEvent:{module:"answers_faq_vote",action:"answers_faq_vote_add",context:e,value:a,noninteraction:!1},data:{altsessid:n,act:"av",pstid:e,vs:a,pid:-1,token:t,useJson:!0}}).then(i,l)}function d(e,t,n,r){require(["trjs!ta/registration/AuthCheck"],function(a){if(a.isAuthorized())c(e,t,n,r);else{var o={flow:"CORE_COMBINED",pid:-1,userRequestedForce:!0,onSuccess:function(){c(e,t,n,r)}};require(["trjs!ta/registration/RegOverlay"],function(e){e.show(null,null,o)})}})}function u(){i.addClass(q.querySelector(".delete"),"hidden"),i.removeClass(q.querySelector(".confirmDelete"),"hidden"),i.removeClass(q.querySelector(".cancelDelete"),"hidden"),i.removeClass(q.querySelector(".confirmDeleteExplanation"),"hidden")}function v(e,t,n,a){i.addClass(q.querySelector(".confirmDelete"),"hidden"),i.addClass(q.querySelector(".cancelDelete"),"hidden"),i.addClass(q.querySelector(".confirmDeleteExplanation"),"hidden"),i.removeClass(q.querySelector(".delete"),"hidden");var l=function(e){q.parentElement.removeChild(q)},s=function(e){r.error(y,"Failed to delete posting from Q&A",e)};o("/AnswersAjax",{method:"POST",dataType:"html",data:{"act":"dp","pstid":n,"token":a},trackEvent:{module:"answers_faq_answer_crud",action:"answers_faq_delete_answer",context:n,value:0,noninteraction:!1}}).then(l,s)}function f(){i.addClass(q.querySelector(".confirmDelete"),"hidden"),i.addClass(q.querySelector(".cancelDelete"),"hidden"),i.addClass(q.querySelector(".confirmDeleteExplanation"),"hidden"),i.removeClass(q.querySelector(".delete"),"hidden")}function m(e,t,n){a.open(e,t,{voteContentType:"LOCATION_POSTING",contentId:n}),r.trackEvent(y,"click","flag")}function p(){var e=q.querySelector(".abbreviated");i.addClass(e,"hidden");var t=q.querySelector(".unabbreviated");i.removeClass(t,"hidden")}function h(e,t){return require(["trjs!members/memberOverlay"],function(n){n.initMemberOverlay(e,t,t.getAttribute("data-overlay-id"),"Answers","user_name_photo"),r.trackEvent(y,"click","show_reviewer_info_window")}),!1}var q=e.element,y="faq";return{voteUp:l,voteDown:s,deleteClick:u,confirmDeleteClick:v,cancelDeleteClick:f,iapVote:m,unabbreviateContent:p,initMemberOverlay:h}})});
define("hotels/HRContentBlockUtils",["ta/prwidgets","utils/classnameUtils","utils/objutils"],function(e,t,i){function n(e,i){var n=!t.hasClass(e,u)||i,o=e&&e.querySelector(".block_body_bottom"),d=o&&o.querySelector(".inner");o&&d&&(o.style.height=n?d.offsetHeight+"px":0,t.toggleClass(e,u,n))}function o(e){delete c[e]}function d(t,d,r){var l=t&&document.getElementById(t.id);if(l)if(c[t.id])(r||n)(l);else{if(c[t.id]===!1)return;c[t.id]=!1,t.requestAJAXPlacement(function(i){var d=l.querySelector(".block_body_bottom .inner");d&&i?(c[t.id]=!0,d.innerHTML=i,e.initWidgets(d),require.defined("mobile/lite/image-loader")&&require("mobile/lite/image-loader").init(200,d),setTimeout(r||n,0,l)):o(t.id)},function(){o(t.id)},i.extend({"more_content_request":!0},d))}}function r(t,i,n){var d=t&&document.getElementById(t.id);d&&(i.updateContentRequest=!0,c[t.id]!==!1&&(c[t.id]=!1,t.requestAJAXPlacement(function(i){var r=d.querySelector(".block_body_top");r&&i?(c[t.id]=!0,r.innerHTML=i,e.initWidgets(r),n&&n(!0)):(o(t.id),n&&n(!1))},function(){o(t.id),n&&n(!1)},i)))}function l(d,r){var l=d&&document.getElementById(d.id);if(l)if(c[d.id])n(l,!0);else{if(c[d.id]===!1)return;c[d.id]=!1,d.requestAJAXPlacement(function(i){var r=l.querySelector(".block_body_bottom .inner");if(r&&i){delete c[d.id];var u=document.createElement("div");if(u.innerHTML=i,u=u.firstElementChild,r.appendChild(u),t.hasClass(u,"last_batch")){var s=l.querySelector(".block_footer");s&&(s.style.display="none")}e.initWidgets(r),setTimeout(n,0,l,!0)}else o(d.id)},function(){o(d.id)},i.extend({"more_content_request":!0},r))}}var u="expanded",c={};return{expandContent:d,updateContent:r,expandContentNoToggle:l,toggleSection:n}});
define("overlays/options/pinnable",["vanillajs","api-mod","ta/Core/TA.Event"],function(i,n,e){"use strict";return function(){function i(){if(c.pinned&&n.inDocument(c.container)&&!o){var i=c.invisibleBackdrop?"ui_backdrop":"ui_backdrop dark";o=n.createElement("div",{"class":i}),o.setAttribute("style","z-index:499"),n.addEvent(o,"click",function(){c.hide()}),c.domParent.appendChild(o)}}function t(n){c.pinned=!0,c.invisibleBackdrop=n,i()}var o,c=this;this.pinned=!1,this.invisibleBackdrop=!1,this.pin=t,this.on("show",function(){i(),e.on(c.sourceElement,"click",t)}),this.on("hide",function(){o&&(c.domParent.removeChild(o),o=void 0,e.off(c.sourceElement,"click",t))})}});
define("overlays/ux/elementToggle",["lib/jquery-amd"],function(n){"use strict";return function(t,e){e&&(e["on"+t.type]=null);var i=t.type||"click";return function(){n(this.sourceElement).on(i,function(n){n.stopPropagation(),this.isOpen()?"click"==i&&this.hide():this.show()}.bind(this))}}});
define("overlays/support/radio",["common/Radio"],function(n){"use strict";return{hide:function(o,i){return o||(o="overlays"),i||(i="shown"),function(){var t=this,u=n(o),e=function(n){n!=t&&t.hide()};this.on("show",function(){u.on(i,e)}).on("hide",function(){u.off(i,e)})}},announce:function(o,i,t){return i||(i="overlays"),t||(t="shown"),function(){var u=this,e=n(i);this.on("show",function(){e.emit(t,u,o)})}}}});
define("styleguide/overlays/Modal",["lib/jquery-amd","utils/responsive","overlays/Overlay","overlays/styles/default","overlays/styles/windowshade","overlays/position/autosize","overlays/position/conditional","overlays/position/center","overlays/position/fullscreen","overlays/options/repositionOnEvent","overlays/ux/elementToggle","overlays/options/closeOnWindowshadeClick","overlays/options/closeOnDocClick","overlays/support/radio"],function(e,o,s,i,l,r,n,a,t,y,u,v,d,p){"use strict";return function(e,c){var h=[i(c,"ui_modal"),n(o.mobile,t(),a()),r(0),y(window,"resize"),p.hide(),p.announce(),Array.prototype.slice.call(arguments,2)];e&&h.push(u(e,c));var w=c&&c.getAttribute("data-sg-overlay")||"";return w.indexOf("nobackdrop")<0?h.push(l(),v):h.push(d),new s(c,h).show()}});
define("overlays/widgetoverlays",["ta","api-mod","overlays/Overlay","overlays/styles/popover","overlays/styles/modal","overlays/styles/dropdown","overlays/styles/windowshade","overlays/position","overlays/options/ajax","overlays/options/pinnable","overlays/options/closeOnWindowshadeClick","overlays/options/repositionOnEvent","styleguide/overlays/Modal"],function(e,i,n,r,t,o,a,s,l,v,d,m,u){"use strict";function p(e,i){var n=e.prwidget_ovl||(e.prwidget_ovl={key:i});return n.key!==i&&(n.showtimer&&(clearTimeout(n.showtimer),delete n.showtimer),n.overlay&&(n.overlay.destroy(),delete n.overlay),n.key=i),n}function c(){var n=this,r=n.prwidget_ovl;if(r&&(r.showtimer&&(clearTimeout(r.showtimer),delete r.showtimer),!(e.page&&e.page.usingUnifiedDates&&i.find(".ui_modal.date_picker_modal",document.body)))){var t=r.overlay;!t||t.pinned||t.prw_leaveTimer||(t.prw_leaveTimer=setTimeout(function(){t.pinned||t.hide()},250))}}function y(){var e=this;e&&(e.prw_entered=!0,e.prw_leaveTimer&&(clearTimeout(e.prw_leaveTimer),delete e.prw_leaveTimer))}function w(){if(!(e.page&&e.page.usingUnifiedDates&&i.find(".ui_modal.date_picker_modal",document.body))){var n=this;!n||n.pinned||n.prw_leaveTimer||(n.prw_leaveTimer=setTimeout(function(){n.pinned||n.hide()},250))}}function h(e,n){var r=!e.pinned&&y.bind(e),t=!e.pinned&&w.bind(e),o=function(){r&&i.removeEvent(e.container,"mouseenter",r),t&&i.removeEvent(e.container,"mouseleave",t),e.off("hide",o),delete n.overlay};r&&i.addEvent(e.container,"mouseenter",r),t&&i.addEvent(e.container,"mouseleave",t),e.on("hide",o)}function f(e,i){var n=i.url||"/OverlayWidgetAjax?Mode="+encodeURIComponent(e);return"string"==typeof crPageServlet&&(n+="&metaReferer="+encodeURIComponent(crPageServlet)),n}function g(e,t,o,a,d){var m=p(e,o);if(m.showtimer&&(clearTimeout(m.showtimer),delete m.showtimer),!m.overlay){var u=(d.position||"wideside").split(" ").filter(function(e){return!!e.length}),c=u.shift();if("wideside"===c)try{var y=i.getPosition(e).left,w=i.getSize(e).x,g=i.getSize(document.body).x;c=y>g-y-w?"leftEvenInRtl":"rightEvenInRtl"}catch(e){c="right"}var T=""|d.classes,_=f(o,d);d.reqParams=a,d.inlineResourceId=o,d.isWidget=!0;var x=[r(e,c,T,""),l(_,d),s[c](u,!1),v];d.mixins&&d.mixins.length>0&&x.push.apply(x,d.mixins);var E=new n(e,x);"click"===t&&E.pin(d.invisibleBackdrop),E.show(),m.overlay=E,h(E,m),d.onLoad&&E.on("contentsUpdated",d.onLoad)}}function T(e,i,r){r=r||{};var o=(r.position||"center").trim().split(" ")[0],v=f(e,r);r.reqParams=i,r.inlineResourceId=e,r.isWidget=!0;var u=[t(null,null,r.classes),l(v,r),s[o](void 0,!0),a(),d,m(window,"resize")];r.mixins&&r.mixins.length>0&&u.push.apply(u,r.mixins);var p=null;r.sourceElement&&(p=r.sourceElement);var c=new n(p,u);return c.show(),c}function _(e,i,n){n=n||{};var r=f(e,n);n.reqParams=i,n.inlineResourceId=e,n.isWidget=!0;var t=[l(r,n)];return n.mixins&&n.mixins.length>0&&t.push.apply(t,n.mixins),u(null,n.sourceElement||null,t)}function x(e,n,r,t,o){e=e||window.event,n=n||e.currentTarget;var a=e&&e.type||"click";e&&i.stopEvent(e);var s=p(n,r);if("click"===a)s.overlay||g(n,a,r,t,o);else{if(s.overlay)return s.overlay.prw_leaveTimer&&(clearTimeout(s.overlay.prw_leaveTimer),delete s.overlay.prw_leaveTimer),!1;if(s.showtimer)return!1;s.hasLeaveHandler||(i.removeEvent(n,"mouseleave",c),i.addEvent(n,"mouseleave",c),s.hasLeaveHandler=!0),s.showtimer=setTimeout(function(){g(n,a,r,t,o)},o.delay||300)}return!1}function E(e,r,t,a,v){e=e||window.event,r=r||e.currentTarget,e&&i.stopEvent(e),v=v||{};var d=(v.position||"below").trim().split(" ")[0],m=f(t,v);v.reqParams=a,v.inlineResourceId=t,v.isWidget=!0;var u=[o(r,d,v.classes,null,v.containerStyles,v.elementType||"div"),l(m,v),s[d](void 0,!0)];v.mixins&&v.mixins.length>0&&u.push.apply(u,v.mixins);var p=new n(r,u);return p.show(),p}return{triggerFlyout:x,showLightbox:T,showDropdown:E,showStyleguideModal:_}});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"location_qa_resp","handlers",["handlers"]);t(["placement","vanillajs","hotels/HRContentBlockUtils","ta/util/ReCaptcha","ta/util/GeeTest","common/trackingStreams","ajax-request","overlays/widgetoverlays","ta/Core/TA.Event","utils/classnameUtils","ta/util/Element"],function(e,t,n,r,a,o,i,s,l,u,c){function d(){var e=S.querySelector(".askQuestionForm");u.removeClass(e,"hidden");var t=S.querySelector(".topicText");t&&t.focus(),o.trackEvent(_,"click","ask_a_question"),o.trackEvent("content_submission|question","start_submission","POI|Hotel")}function v(){var e=S.querySelector(".askQuestionForm");u.addClass(e,"hidden")}function f(){var e=S.querySelector(".topicText");if(!e.value.length)return void e.focus();var t={username:!0};return require(["trjs!ta/registration/AuthCheck"],function(e){if(e.isAuthorized(t))m();else{var n={flow:"CONTENT_SUBMISSION",pid:-1,userRequestedForce:!0,onSuccess:m};require(["trjs!ta/registration/RegOverlay","utils/responsive"],function(e,t){e.showRegOverlay(null,null,t.mobile(),n)})}}),!1}function h(e){return e?e.value:""}function m(){var e=S.querySelector(".askQuestionForm");if(e){var t=e.querySelector(".topicText").value,n=!!e.querySelector("[name=optin]:checked"),s={act:n?"ats":"at",topicText:t,detail:e.detail.value,pid:-1,optIn:n,altsessid:e.altsessid.value,token:e.token.value,"g-recaptcha-response":h(e.querySelector(".recaptcha_input")),geetest_challenge:h(e.geetest_challenge),geetest_validate:h(e.geetest_validate),geetest_seccode:h(e.geetest_seccode),redirect:!0},l=e.querySelector(".formSubmit");u.addClass(l,"loading");var c=function(e){r.resetAll(),a.resetAll(),p(e)||(S.querySelector(".topicText").value="",window.location=e),u.removeClass(l,"loading")},d=function(e){if(r.resetAll(),a.resetAll(),null!==e){var t=p(e);t||o.error("Unexpected Error submitting question",e)}u.removeClass(l,"loading")};i("/AnswersAjax",{method:"POST",url:"MetaPlacementAjax",dataType:"html",data:s,evalScripts:!0,trackEvent:{module:"answers_faq_question_crud",action:"answers_faq_create_question",context:s.detail,value:0,noninteraction:!1}}).then(c,d)}}function p(e){var t=null;try{t=JSON.parse(e)}catch(e){return!1}if(t&&t.ALERT&&(t.errors=[t.ALERT]),t&&t.errors&&t.errors.length>0){var n=S.querySelector(".errors");n.innerHTML="";for(var r=0;r<t.errors.length;r++){var a=document.createElement("li");a.innerHTML=t.errors[r],n.appendChild(a)}u.removeClass(n,"hidden")}return!0}function q(){require(["trjs!ta/util/CaptchaHandler"],function(){var e=S.querySelector(".captcha_here");e&&null==e.querySelector("#sharedCaptcha")&&e.appendChild(document.getElementById("sharedCaptcha"))})}function g(e){s.showLightbox("QA_POSTING_GUIDELINES",{locationId:e},{})}var S=document.getElementById(e.id),_="faq";return l.on("paginationChanged",function(t){document.getElementById(e.id).contains(t)&&(l.fireEvent("TabHeader_clickTab",document.getElementById("TABS_ANSWERS")),n.updateContent(e,{"offset":t.getAttribute("data-offset")},function(){l.fireEvent("qaListUpdated")}))}),l.on("qaQuestionDeleted",q),l.on("qaLastQuestionDeleted",d),l.queueForLoad(function(){var t=S.querySelector(".shouldUpdateOnLoad");t&&t.getAttribute("data-should-update")&&n.updateContent(e,{"offset":"0"})}),c.trackWhenScrolledIntoView("#"+e.id,["faq","in_view"]),{moreClick:function(){n.expandContent(e)},askQuestionClick:d,submitAskQuestion:f,cancelAskQuestion:v,moveCaptchaHere:q,initPostingGuidelinesOverlay:g}})});
define("common/metric-recorder",["babel/babel-helpers","ajax-request"],function(e,r){return function(e){return r({method:"POST",url:"/MetricsAjax","x-requested-by":require("page-model").JS_SECURITY_TOKEN,data:"metricsData="+encodeURIComponent(JSON.stringify(e))})}});
define("utils/uuid",["babel/babel-helpers"],function(x){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var n=16*Math.random()|0,e="x"===x?n:3&n|8;return e.toString(16)})}});
define("hotels/tracking/timing",["babel/babel-helpers","common/metric-recorder","utils/uuid","ta/Core/TA.PageVisibility"],function(e,r,n,t){function i(){a||(a=!0,t.addBlurListener(function(){return o={}}))}function u(e,t){if(!a)return function(){return Promise.resolve()};var i=n();o[i]=!0;var u=Date.now();return function(){if(!o[i])return Promise.resolve();delete o[i];var n=Date.now()-u;return r([{name:e,value:n,labels:[t]}])}}var a=!1,o={};return{enable:i,start:u}});
define("members/memberOverlay",["utils/stopevent","overlays/widgetoverlays","common/trackingStreams","utils/responsive","amdloaders","hotels/tracking/timing","common/Radio"],function(e,r,t,i,n,o,a){function m(a,m,s,d,c){if(a&&("click"===a.type||"mouseenter"===a.type||"mouseover"===a.type)){var l=i.mobile();if(l&&"click"!==a.type)return!1;"click"===a.type&&e(a);for(var v="",u="",f="",p=!1,w=!1,b=s.split("-"),y=0;y<b.length;y++){var g=b[y];g.match(/\bUID_([0-9A-F]+)\b/)?v=RegExp.$1:g.match(/\bSRC_(\d+)\b/)?u=RegExp.$1:g.match(/\bCATID_(\d+)\b/)?f=RegExp.$1:g.match("FUS")?p=!0:g.match("PATT")&&(w=!0)}var h="";if("undefined"!=typeof window.footprintGet&&(h=window.footprintGet()),l){var _=p?"https://www.tripadvisor.com":"";return window.location.href=_+"/MemberProfile-a_uid."+v,!1}var E="/MemberOverlay?Mode=owa&uid="+v+"&c="+f+"&src="+u+"&fus="+p+"&partner="+w+"&LsoId="+h,k=o.start("member_load",require("page-model").LOC_ID);return r.triggerFlyout(a,m,"MEMBER_OVERLAY",n.getLoadedFilesParams(),{url:E,mixins:[function(){d&&c&&t.trackEvent(d,"show_reviewer_info_window",c)}],invisibleBackdrop:!0,onLoad:k}),!1}}function s(e,r,t,i,n){return!r[d]&&(r[d]=!0,r.addEventListener("click",function(e){m(e||window.event,this,t,i,n)}),r.addEventListener("mouseenter",function(e){m(e||window.event,this,t,i,n)}),e&&m(e,r,t,i,n),!1)}var d="members_memberOverlay_init";return a("memberOverlay").on("initMemberOverlay",s),{initMemberOverlay:s}});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"reviews_member_info_resp","handlers",["handlers"]);r(["widget","members/memberOverlay","common/trackingStreams"],function(e,r,n){function i(e,n){return r.initMemberOverlay(e,n,n.id,"Reviews","user_name_photo"),!1}function t(){n.trackEvent("Reviews","click","user_name_name_click")}return{initMemberOverlay:i,usernameClick:t}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"reviews_text_summary_hsx","handlers",["handlers"]);t(["widget","lib/jquery-amd","common/Radio"],function(e,t,i){function r(){t(e.element).trigger("review:expand",[e.element,o])}function n(){t(e.element).trigger("review:collapse",[e.element,o])}function a(){i("member_growth_interstitial").emit("fire",function(){r()})}var l=t(e.element).closest(".reviewSelector"),o=Number(l.attr("data-reviewId"));return{clickExpand:r,clickCollapse:n,fireRegistrationInterstitial:a}})});
define("overlays/options/disablePageScroll",["vanillajs"],function(o){"use strict";return function(){function o(){e=document.body.style.position,document.body.style.position="absolute",document.body.style.overflow="hidden",document.body.style.width="100%"}function t(){document.body.style.position=e,document.body.style.overflow="auto",document.body.style.width="auto"}var e;this.on("show",o),this.on("hide",t)}});
require(["ta/prwidgets"],function(e){var o=e.define.bind(e,"reviews_google_translate_button_hsx","handlers",["handlers"]);o(["widget","overlays/Overlay","overlays/styles/modal","overlays/position","overlays/options/closeOnEscape","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/styles/windowshade","overlays/options/ajax","overlays/options/disablePageScroll"],function(e,o,r,t,a,n,l,s,i,y){function v(v){var d=v.getAttribute("data-url");ta.util.cookie.setPIDCookie(16009),e.require(["trcss!src/build/common/translation_overlay"],function(){c.overlay&&c.overlay.hide(),c.overlay=new o(v,[r(v,"center",""),t.center([0,0]),l,y,a,n,s(),i(d)]),c.overlay.container.style.maxWidth="90%",c.overlay.container.style.width="800px",c.overlay.container.style.maxHeight=.8*window.innerHeight+"500px",c.overlay.container.style.overflowY="scroll",c.overlay.show()})}var c=this;return{open:v}}.bind({}))});
require(["ta/prwidgets"],function(e){var i=e.define.bind(e,"reviews_mt_header_hsx","handlers",["handlers"]);i(["widget","ta/util/Cookie"],function(e,i){function t(e,t){return"true"===t.value?i.setPIDCookie(25173):"false"===t.value&&i.setPIDCookie(25172),t.form.elements[0].value=window.location.href,t.form.submit(),!1}return{clickSubmit:t}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"reviews_mt_footer_hsx","handlers",["deferred/mtReview","handlers"]);t(["widget","api-mod","overlays/uiOverlay","overlays/Overlay","overlays/styles/default","overlays/position/conditional","utils/responsive","overlays/position/fullscreen","overlays/position/center","overlays/options/autoReposition","overlays/options/closeOnEscape","overlays/options/ajax","utils/ajax","overlays/styles/windowshade","ta/Core/TA.Store","common/trackingStreams"],function(e,t,r,i,a,n,o,l,s,d,v,y,c,u,f,m){function p(e){g.editOverlay?g.editOverlay.updateContent("/MachineTranslationEdit?r="+e):(g.editOverlay=new i(null,[a(null,"ui_modal mtedit_overlay"),n(o.mobile,l(),s()),d,v,u(),y("/MachineTranslationEdit?r="+e)]),f.store("translationEditOverlay",g.editOverlay),g.editOverlay.on("contentLoaded",function(){try{var e=document.getElementById("mtedit_mt"),t=document.getElementById("mtedit_english");if(e&&t){var r=e.querySelector(".mtedit_text");r.style.height=t.clientHeight+e.offsetTop-r.offsetTop+"px"}g.editOverlay.reposition()}catch(e){m.error(e,"openMTEdit:onLoad")}})),g.editOverlay.show()}function h(r,i,a){t.stopEvent(r),ta.servlet||(ta.servlet={}),ta.servlet.Reviews?p(a):e.require(["trjs!deferred/mtReview"],function(e){ta.servlet.Reviews=e,p(a)})}function O(i,a){t.stopEvent(i),g.rateOverlay&&g.rateOverlay.hide();var n=t.find(".ratingList",a);n&&e.markMine(n),a.overlay=null,r(i,a),g.rateOverlay=t.retrieve(a,"overlay")}function w(r,i,a,n,o){if(n){var l=t.find(".mtRatingButton",e.element);l&&t.addClass(l,"hidden");var s=t.find(".thanksText",e.element);s&&t.removeClass(s,"hidden"),c("/RateUserReviewSlider?at=true&rateValue="+a+","+n+","+o,{})}g.rateOverlay&&g.rateOverlay.hide()}var g=this;return{clickEdit:h,clickRate:O,rateReview:w}}.bind({}))});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"reviews_vote_line_hsx","handlers",["deferred/clicks","handlers"]);t(["widget","overlays/uiOverlay","vanillajs"],function(e,t){function r(e,r){t(e,r)}function i(e,r){r.getAttribute("data-first")||(ta.trackEventOnPage("Reviews","respond_to_review","hover"),r.setAttribute("data-first",1)),t(e,r)}return{hoverReport:r,respondLinkMouseover:i}})});
define("overlays/options/closeOnEmit",["babel/babel-helpers"],function(n){"use strict";return function(n,e,o){return function(){var t=this,i=function(){o&&!o.apply(void 0,arguments)||t.hide("on-event")};this.on("show",function(){return n.on(e,i)}).on("hide",function(){return n.off(e,i)})}}});
define("photoviewer/tracking",["babel/babel-helpers","common/trackingStreams","ta/Core/TA.FireEvent","lib/jquery-amd","utils/responsive","utils/throttle","page-model"],function(i,e,t,o,n,r,c){"use strict";function l(i,t,o){e.trackEvent(i,t,o,Q)}function a(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";_(i)&&e.trackEvent(S,i,t,Q)}function d(i){e.trackEvent(S,i,"",Q)}function _(i){var e=void 0;if(i.includes("grid_view"))e=M;else{if(!i.includes("detail_view"))return!1;e=K}return o(U).hasClass(e)}function v(){Y=o(window).height(),X=o(window).width(),o(window).off("resize",Z).on("resize",Z)}function u(){o(window).off("resize",Z)}function w(){n.desktop()&&t.fireEvent("galNavClick"),l(S,D,null)}function k(){l(S,P,null,Q)}function s(){l(S,H,null,Q)}function h(i){var e=i?"detail_view_show_nav_click":"detail_view_hide_nav_click";l(S,e,null,Q)}function f(i){l(S,i,B,Q)}function p(i){l(S,i,B,Q)}function g(){l(S,R,null,Q)}function m(){l(S,F,null,Q)}function C(){n.desktop()&&l(S,G,null,Q)}function b(){l(S,I,null)}function T(){n.mobile()&&t.fireEvent("galThumbClick")}function A(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";l(S,V,i+"|"+e+"|"+t+"|"+o)}function E(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";l(S,x,i+"|"+e+"|"+o+"|"+r),n.desktop()&&t.fireEvent("galThumbClick")}function y(i,e,t){var n=o(e).closest(U).hasClass(K),r=o(e).hasClass(J),c=n?"detail":"grid",a=r?"dropdown_open":"dropdown_select";l(S,""+c+L[t],a+"_"+i)}function z(i,e,t,o){l(S,N,i+"|"+e+"|"+t+"|"+o)}var S="photoviewer",D="detail_view_image_arrow_click",P="detail_view_gallery_click",R="detail_view_caption_review_click",F="detail_view_caption_attribution_url_click",G="detail_view_desktop_image_click",H="detail_view_photostrip_arrow_click",I="detail_view_image_swipe_click",V="grid_view_thumbnail_click",x="detail_view_photostrip_tile_click",N="helpful_vote_click",O="_view_album_click",j="_view_type_click",q="_view_category_click",B="dropdown_abandoned",L={album:O,type:j,category:q},U=".photoviewerContainer",J="tabs_item",K="hero",M="grid",Q=c.LOC_ID,W=1e3,X=void 0,Y=void 0,Z=r(function(){setTimeout(function(){var i=o(window).width(),t=o(window).height();i===X&&t===Y||(e.trackEvent("screenSizeRecord","resize","s"+X+"x"+Y+"b"+i+"x"+t,""),X=i,Y=t)},W)},W);return{attachResizeTracker:v,detachResizeTracker:u,trackPhotoViewerEvent:l,trackPhotoViewerImpression:a,trackSimpleAction:d,recordBackToGalleryClick:k,recordCaptionReviewClick:g,recordCaptionAttributionUrlClick:m,recordPhotoStripArrowClick:s,recordGridDropdownAbandonment:f,recordAlbumDropdownAbandonment:p,recordHeroClickOnDesktop:C,recordNavArrowVisibilityChange:h,recordArrowClick:w,recordPhotoSwipe:b,recordFilmstripThumbClick:T,recordGridTileClick:A,recordHeroThumbClick:E,recordFilterItemClick:y,recordHelpfulClick:z}});
define("utils/HistoryManager",[],function(){"use strict";function t(){function t(){return(new Date).getTime()+""+Math.random()}function i(t){var i=t.state;if(!a&&i&&i.id){var e=i.id,s=n[e];s&&s(i.data)}}var n={},e={},a=!1;this.pushState=function(i,e,a,s){var r=t();n[r]=s,i.id=r,history.pushState(i,e,a)},this.replaceState=function(i,e,a,s){var r=t();n[r]=s,i.id=r,history.replaceState(i,e,a)},this.addCallback=function(t,i){e[t]||(e[t]=[]),e[t].push(i)},this.removeCallback=function(t,i){if(e[t]){var n=e[t].indexOf(i);n>=0&&e[t].splice(n,1)}},this.doCallbacks=function(t){e[t]&&e[t].each(function(t){t()})},this.isSupported=function(){return"undefined"!=typeof history&&"pushState"in history},this.disableCallbacks=function(t){a=t},window.addEventListener("popstate",i)}return t});
define("commerce/offerclickEvents",["mixins/Events","vanillajs"],function(e){"use strict";return new e("beforeClick","afterClick")});
define("photoviewer/loader",["babel/babel-helpers","lib/jquery-amd","page-model","overlays/Overlay","overlays/styles/modal","overlays/position/fullscreen","overlays/options/closeOnEmit","overlays/options/ajax","overlays/support/radio","overlays/options/closeOnEscape","common/trackingStreams","common/Radio","ta/Core/TA.FireEvent","ta/Core/TA.Store","photoviewer/tracking","utils/responsive","utils/HistoryManager","utils/urlutils","mixins/page-dates/pop-calendar","commerce/offerclickEvents"],function(e,o,t,n,i,r,a,d,l,s,c,p,u,v,h,f,w,g,m,b){"use strict";function y(e){var n=e,i=f.mobile()?2:f.desktop()?5:3;return n.heroMinWidth=o(window).width()-2*x,n.heroMinHeight=o(window).height()-2*x,n.gridItemMinWidth=n.heroMinWidth/i,n.updateType=n.updateType||"partial",n.placementRollUps="responsive-photo-viewer",n.albumid=e.albumid||e.albumId,n.puid=t.session.uid,n.geo=n.geo||t.GEO_ID,n.detail=n.detail||t.LOC_ID,n.geo&&n.detail?(e.albumViewMode||(n.albumid=n.albumid||P,n.filter=n.filter||T,e.ff||e.imageId?(n.albumViewMode="hero",n.ff=e.ff||e.imageId):e.panoId?n.albumViewMode="hero":n.albumViewMode="grid"),n.area="QC_Meta_Mini|Photo_Lightbox",window.pageServlet&&(n.metaReferer=window.pageServlet),n):(c.error(null,"photoviewer/loader.js:load missing required arguments"),!1)}function E(e){return"/DynamicPlacementAjax?"+o.param(y(e))}function I(){return A.contentElement?A.contentElement.id:""}function C(){if(A.contentElement){var e=A.contentElement.querySelector(".photoviewerContainer");e&&e.parentNode&&(A.contentElement=e.parentNode),A.contentElement.id||(A.contentElement.id="photo_viewer_default_id");var o=k();o&&o.clear(),p("responsive-photoviewer").trigger("content-loaded",A.contentElement.id)}}function k(){if(A){var e=A.contentElement.id;if(e)return p(e)}return null}function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f="no_padding";if(e.currentHeroId=e.ff,A){var w=void 0,g=k();g&&(w=g.request("currentHeroId")),w&&(e.currentHeroId=w),A.updateContent(E(e),!0)}else A=new n(document.body,i(null,"",f),r(),s,a(b,"beforeClick",function(e){return e.isBooking}),d(E(e),{resources:[],noCache:!0,skipInvalidate:!0}),l.hide("responsive-photoviewer","close")),_(t,e),A.on("contentLoaded",C),A.on("contentsUnchanged",function(){p("responsive-photoviewer").trigger("contents-unchanged")}),A.on("data-targetEvent",u.fireEvent),A.on("hide",function(){p("responsive-photoviewer").trigger("overlay-hide"),h.trackSimpleAction("photoviewer_close_click"),h.detachResizeTracker(),j&&v.remove("suppressCalendarPop");var e=o("[data-datetype='CHECKIN']").get(0);m.shouldPop(e)&&m.popCalendar(e)}),A.on("show",function(){p("responsive-photoviewer").trigger("overlay-shown")});c||t||O(e),A.show()}function O(e){var t=e.aggregationId,n=e.albumid,i=e.ff,r=e.filter,a=e.panoId,d={aggregationId:t,albumid:n,filter:r};i&&(d.ff=i),a&&(d.panoId=a);var l=H+o.param(d);p("responsive-photoviewer").trigger("addHistory",{data:d},document.title,l,function(){return M(d,!1,!0)})}function _(e,o){var t=new w;if(t.isSupported()){if(e){var n=window.location.href;window.setTimeout(function(){if(n===window.location.href){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search;window.history.replaceState(null,"",e),O(o)}},0)}p("responsive-photoviewer").on("addHistory",t.pushState);var i=!1;A.on("hide",function(){window.location.hash.indexOf(S)>=0&&(i=!0,t.disableCallbacks(!0),history.back())}),window.addEventListener("popstate",function(){window.location.hash.indexOf(S)>=0?i?history.back():A.show():(i=!1,t.disableCallbacks(!1),A.hide())})}}var x=20,S="#photos",H=S+";",T=7,P=101,A=void 0,j=!1;return o(function(){var e=window.location.hash;if(e.indexOf(S)>=0){v.retrieve("suppressCalendarPop")||(j=!0,v.store("suppressCalendarPop","true"));var o=void 0,t=e.indexOf(H)>=0&&e.substring(e.indexOf(H)+H.length,e.length);o=t&&t.length>0?g.getUrlQueryArgs("?"+t):y({}),o.updateType="full",M(o,!0)}}),p("responsive-photoviewer").on("load",M),{load:M,buildUrl:E,getOverlayId:I}});
define("actions/openRespPhotoViewer",["common/trackingStreams","ta/util/Cookie","photoviewer/loader"],function(e,o,t){function i(i,n,a,r,l,p){e.trackEvent("photoviewer","click","btf_userphotos"),o.setPIDCookie(5042);var c={detail:a,geo:r,imageId:l,filter:p};l>0&&(c.ff=l),c.albumViewMode="hero",c.updateType="full",t.load(c)}function n(e){t.load(e)}return{open:i,openWithOptions:n}});
require(["ta/prwidgets"],function(e){var i=e.define.bind(e,"reviews_review_resp","handlers",["handlers"]);i(["widget","lib/jquery-amd","ta/util/Cookie","common/trackingStreams","common/Radio"],function(e,i,t,n,r){function o(){i(e.element).trigger("review:expand",[e.element,m])}function l(){i(e.element).trigger("review:collapse",[e.element,m])}function c(r,o,l){n.trackEvent("Reviews","click","title",0,o.href),t.setPIDCookie(l),i(e.element).trigger("review:toggle",[e.element,m])}function a(){t.setPIDCookie(24687),n.trackEvent("Reviews","click","via_mobile_itunes"),window.open("/apps")}function s(e,i){n.setEvtCookie("Reviews","click","title",0,e),t.setPIDCookie(i)}function v(e,i){s(e,i),r("member_growth_interstitial").emit("fire",function(){window.location.href=e})}var w=i(".reviewSelector",e.element),m=Number(w.attr("data-reviewId"));return{clickExpand:o,clickCollapse:l,toggleReviewInline:c,viaMobileClick:a,reviewClick:s,fireRegistrationInterstitial:v}})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"common_responsive_pagination","handlers",["handlers"]);t(["widget","ta/page","common/trackingStreams"],function(e,t,n){"use strict";function a(e,a){var i=a.getAttribute("href")||a.getAttribute("data-href");return i?void t.applyPaginationOffset(i,!0):void n.error("No href, data-href or data-page found in pagination element.","responsive_pagination paginate")}function i(e,t,a,i){n.trackEvent("Reviews","click",a,i)}return{paginate:a,trackClick:i}})});
define("mixins/attraction-traveler-info/PaxMix",["ta/Core/TA.Event"],function(i){"use strict";var n="attractionPaxPicker.missingAges",e=9,t=function(i,n){return n.some(function(n){return i[n]>0})},r=function(i,n){return n.indexOf(i)!==-1},s=function(s){var a=0,u={},h=[],o=!1,c=!1,f=!1,d=!1,g=[],A=[];!function(){if(s){for(var n in s)A.push(n),s[n]&&h.indexOf(n)===-1&&h.push(n),u[n]=0;i.on("requestTourGrades",function(){d=!1})}}(),this.getNumTravelers=function(){return a},this.getAgeBandVal=function(i){return u[i]?u[i]:0},this.hasAdultTravelers=function(){return o},this.isPaxMixValid=function(){return this.hasAdultTravelers()&&!this.hasUnspecifiedChildAges()&&!this.hasUnspecifiedSeniorAges()},this.displayPaxMixErrors=function(e,t,r,s){this.hasAdultTravelers()||e(),this.hasUnspecifiedChildAges()&&this.hasUnspecifiedSeniorAges()?(t(),i.fireEvent(n)):this.hasUnspecifiedChildAges()?(r(),i.fireEvent(n)):this.hasUnspecifiedSeniorAges()&&(s(),i.fireEvent(n))},this.hasUnspecifiedChildAges=function(){return c},this.hasUnspecifiedSeniorAges=function(){return f},this.hasUpdatedPaxSinceLastAvailCheck=function(){return d},this.incrementAgeBand=function(i){this.incrementAgeBandByCount(i,1)},this.incrementAgeBandByCount=function(i,n){void 0!==u[i]&&a<e&&(u[i]=u[i]+n,a+=n,o=o||r(i,h),d=!0)},this.decrementAgeBand=function(i){void 0!==u[i]&&a>0&&u[i]>0&&(u[i]=u[i]-1,a-=1,0===u[i]&&r(i,h)&&(o=t(u,h)),d=!0)},this.clearTravelerData=function(){g=[],a=0,o=!1,c=!1,f=!1,A.forEach(function(i){u[i]=0})},this.addTravelerAge=function(i){g.push(i)},this.addChildWithUnspecifiedAge=function(){c=!0},this.addSeniorWithUnspecifiedAge=function(){f=!0},this.getFormattedPaxMix=function(){var i=[];for(var n in u)i.push(n+":"+u[n]);return i.join()},this.getFormattedPaxAges=function(){return g.join()},this.getTrackingPaxMix=function(){var i=[];for(var n in u)i.push("ab"+n+":["+u[n]+"]");return i.join(",")}};return s});
define("mixins/Decoder",["utils/urlDecoder"],function(t){"use strict";function e(){function n(e){return t.decodeUrl(e)}function o(e){return t.getUrl(e)}function r(e,n,o,r){return t.goToLink(e,n,o,r)}e.prototype.decodeString=n,e.prototype.getUrl=o,e.prototype.goToLink=r}return e});
define("servlets/mobileattractionproductdetail",["mixins/mixin","mixins/attraction-traveler-info/PaxMix","mobile/lite/image-loader","mixins/ReviewPagination","mixins/Decoder","common/trackingStreams","common/pixels-loader","lib/jquery-amd"],function(e,i,a,t,n,s,l,o){"use strict";function r(e){if(e){var i=e.addClass("hidden").closest(".product_overview");o(i).find(".collapsed_display").removeClass("collapsed_display");var a=e.parentNode.className.contains("panel")?e.parentNode:void 0;a&&(a.style.maxHeight=a.scrollHeight+"px")}}function c(e){var i="ui_icon single-chevron-up",a="ui_icon single-chevron-down",t=e.getElementsByClassName("ui_icon")[0];t&&t.className===i?t.className=a:t&&t.className===a&&(t.className=i);var n=e.nextElementSibling;if(n.className.contains("preview")){var l=n.getElementsByClassName("read_more")[0];r(l),n.removeClass("preview")}n.style.maxHeight?(n.style.maxHeight=null,n.style.paddingTop="0px",s.trackEvent("AttractionProductDetail","header_section_collapse",n.id)):(n.style.maxHeight=n.scrollHeight+"px",n.style.paddingTop="12px",s.trackEvent("AttractionProductDetail","header_section_open",n.id))}function d(e){var i=e.getElementsByClassName("collapsed_display")[0];if(i)r(i.nextElementSibling);else{var a=e.previousElementSibling;c(a)}}function m(s){if(!p){var o=this;e(o,new i(s.productAgeBands)),l.init(s.remarketingOptions),e(o,new t({oneTimeParams:{crate:"mobile_bauhaus_attraction_attraction_responsive_reviews"},scrollToSelector:v})),e(o,new n),a.init(200),p=!0}return this}var p=!1,v="#REVIEWS";return{init:m,expandDisplay:r,handleAccordionClick:c,handleContentClick:d}});
define("attractions/ApdPlacementSectionUtil",["lib/jquery-amd","utils/urlDecoder","servlets/mobileattractionproductdetail"],function(e,t,a){"use strict";var n=function(n){function i(e){var a,n=e.attr("data-language"),i=t.decodeUrl(e.attr("data-partner")),r=t.decodeProductCode(e.attr("data-product-code")),o=e.attr("data-section-key");return n&&i&&r?(a="?language="+n+"&partner="+i+"&productCode="+r,o&&(a+="&sectionKey="+o),a):null}function r(){var t=o.find(".readMore");t.each(function(){var t=e(this).siblings(".subsection.content");t.length>0&&t[0].clientHeight<t[0].scrollHeight&&(e(t[0]).addClass("hasReadMore"),e(this).removeClass("hidden"))})}var o=e("#"+n.id);this.ajaxLoadPlacementContent=function(e,t){var a=o.find(e),d=i(a);return d?new Promise(function(i){n.require(["trhtml!placement"+d],function(n){var o=n.querySelector(e);o&&(a.html(o.innerHTML),t&&r(),i())})}):Promise.reject()},this.ajaxLoadDustTemplate=function(e,t){var a=o.find(e),r=i(a);return r?new Promise(function(e){n.require(["trhtml!"+t+r],function(t){t&&(a.html(t.innerHTML),e())})}):Promise.reject()},this.displayReadMoreIfNecessary=r,this.handleReadMoreClickDT=function(t,a){a=a||window.event,a.stopPropagation();var n=e(t),i=n.siblings(".subsection.content.collapse");if(i.length>0){var r=i[0];r.style.maxHeight=r.scrollHeight+"px",e(r).removeClass("hasReadMore"),e(r).removeClass("collapse"),n.hide()}},this.handleReadMoreClickMW=function(t){var a=e(t).addClass("hidden").closest(".product_overview");a.find(".collapsed_display").addClass("hidden"),a.find(".expanded_display").removeClass("hidden")},this.handleAccordionClick=function(e){a.handleAccordionClick(e)},this.handleContentClick=function(e){a.handleContentClick(e)},this.ajaxSeeMoreReviewButton=function(){var e=o.find(".seeMoreTAPReviewsButton");if(null!=e){var t=e.attr("data-lastPage"),a=e.attr("data-prod");t&&"isLastPage"===t&&a&&"isProduct"===a&&this.ajaxLoadDustTemplate(".seeMoreTAPReviewsButton","deferred/more_tap_reviews_button")}}};return n});
define("sponsoredlisting/utils",["vanillajs"],function(t){"use strict";var n={};return n.isInViewport=function(t){var n=t.getBoundingClientRect(),i=document.documentElement;return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||i.clientHeight)&&n.right<=(window.innerWidth||i.clientWidth)},n});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"location_reviews_list_resp","handlers",["handlers"]);t(["placement","lib/jquery-amd","overlays/ajaxUtil","ta/Core/TA.FireEvent","ta/prwidgets","ta/registration/RegOverlay","ta/util/ajaxPreserves","common/trackingStreams","utils/urlDecoder","page-model","attractions/ApdPlacementSectionUtil","ta/util/Element","sponsoredlisting/utils","ta/Core/TA.Record"],function(e,t,n,i,a,o,r,d,c,s,l,u,v,p){function f(e){var t=e.currentTarget||this;if(v.isInViewport(t)){var n="owners_favorite_review_displayed",i=s.LOC_ID;p.trackEventOnPage(s.session.pageServlet,n,i),A.removeEventListener("pageScroll",f),A.removeEventListener("ownerFavReviewLoadComplete",f)}}function g(){T=[],O={},I.find(".review-container[data-reviewId]").each(function(e,t){var n="true"===t.getAttribute("data-collapsed"),i="true"===t.getAttribute("data-deferred"),a=Number(t.getAttribute("data-reviewId")),o="true"===t.getAttribute("data-showMt"),r={elem:t,id:a,deferred:i,saved:!1,frozen:!n&&!i,expanded:!n&&!i,showMt:o};T.push(r),O[a]=r}),I.off("review:expand",S),I.on("review:expand",S),I.off("review:collapse",h),I.on("review:collapse",h),I.off("review:toggle",x),I.on("review:toggle",x),L();var t=new l(e);t.ajaxSeeMoreReviewButton()}function w(e){var n=O[e];if(n&&n.source&&!n.frozen){var i=n.source,o=n.elem;i.isLoading?t(o).addClass("listingLoading"):i[e]?(t(o).removeClass("listingLoading"),o.innerHTML=i[e],a.initWidgets(o)):(t(o).removeClass("listingLoading"),o.expandedSource===i&&(o.expandedSource=void 0,o.expanded=!1),o.collapsedSource===i&&(o.collapsedSource=void 0))}}function E(e,t){var n=O[e];n&&!n.frozen&&(!!n.expanded!=!!t||!t&&n.deferred)&&(n.expanded&&!n.expandedSource&&(n.expandedSource={},n.expandedSource[e]=n.elem.innerHTML),n.expanded||n.collapsedSource||n.defered||(n.collapsedSource={},n.collapsedSource[e]=n.elem.innerHTML),n.expanded=t,n.source=t?n.expandedSource:n.collapsedSource,t&&(n.wasExpanded=!0),w(e))}function m(e,n){if(!n.isBusy()&&e.isLoading){var i=document.createElement("div");t(i).html(n.data).children("[data-reviewListingId]").each(function(t,n){e[Number(n.getAttribute("data-reviewListingId"))]=n.innerHTML}),e.isLoading=!1,t.each(T,function(t,n){n.source===e&&w(n.id)})}}function S(e,a,r){var d=[],c=[],s=!1,l={},u=!1;if(t.each(T,function(e,t){s=s||t.id===r,!s||t.expanded||t.frozen||t.id!==r&&t.wasExpanded||(d.push(t.id),t.expandedSource||(t.expandedSource=l,c.push(t.id),0===e&&(u=!0)))}),c.length>0){var v=n.loadOverlayWidget("EXPANDED_HOTEL_REVIEWS_RESP",{loadingContent:"",noCache:!0,reqParams:{reviews:String(c),contextChoice:I.attr("data-contextChoice"),loadMtHeader:u}});l.isLoading=!0,v.on("update",m.bind({},l,v)),m(l,v)}return t.each(d,function(e,t){E(t,!0)}),y&&(y=!1,o.show({type:"dummy"},e.target||a,{flow:"CORE_COMBINED",pid:39415,onSuccess:function(){}})),i.fireEvent("ReviewExpanded"),!1}function h(e,t,n){E(n,!1)}function x(e,t,n){var i=O[n];i&&i.expanded?h(e,t,n):S(e,t,n)}function C(){return"true"===I.attr("data-loadDeferredExpanded")?"EXPANDED_HOTEL_REVIEWS_RESP":"true"===I.attr("data-socialReviewMemberInfo")?"COLLAPSED_SOCIAL_REVIEWS_RESP":"COLLAPSED_HOTEL_REVIEWS_RESP"}function L(){var e=[],i=[],a={},o=I.attr("data-contextChoice"),r="true"===I.attr("data-forceReviewExpansion")?"true":"false",d=!1;if(t.each(T,function(t,n){n.deferred&&!n.frozen&&(n.collapsedSource=a,e.push(n.id),0===t&&(d=!0)),n.showMt&&i.push(n.id)}),e.length>0){var c=n.loadOverlayWidget(C(),{loadingContent:"",reqParams:{reviews:String(e),idxMtReviews:String(i),forceReviewExpansion:r,contextChoice:o,loadMtHeader:d}},s.session.pageServlet);a.isLoading=!0,c.on("update",m.bind({},a,c)),m(a,c)}t.each(e,function(e,t){E(t,!1)})}function _(e,t,n,i){n=c.decodeProductCode(n),d.trackEvent("tac_product_detail_reviews_click_offsite",n,"1"),c.goToCommerceLinkWithProductCode(i)}function R(n){r.setContentElement(M,n,!0),M=n,I=t("#"+e.id+" .listContainer"),a.initWidgets(M),W&&P(),g()}function P(e,t){W=!0,I.removeClass("hide-more-mobile")}var b=document.querySelectorAll(".ownerFavLabel");if(b){var A=b[0];A&&(window.addEventListener("scroll",function(e){var t;"function"==typeof window.CustomEvent?t=new CustomEvent("pageScroll"):(t=document.createEvent("CustomEvent"),t.initCustomEvent("pageScroll",!0,!0,null)),A.dispatchEvent(t)}),window.setTimeout(function(){A.addEventListener("pageScroll",f),A.addEventListener("ownerFavReviewLoadComplete",f)},0))}var I=t("#"+e.id+" .listContainer"),M=I[0],T=[],O={},y=!!I.children(".info[data-expansionSoftGate=true]")[0],W=!1;return g(),i.on("update-"+e.name,R),u.trackWhenScrolledIntoView("#"+e.id,["reviews","in_view"]),{trackExtraReviews:_,viewMore:P,goToCommerceLink:c.goToCommerceLinkWithProductCode}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"location_reviews_newer_reviews","handlers",["handlers"]);n(["placement","ta/util/Cookie"],function(e,n){function i(){n.setPIDCookie(3978)}return{setPid:i}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"masthead_h1","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent"],function(e,n){"use strict";function t(n){var t=document.getElementById(e.id);t&&(t.innerHTML=n.innerHTML)}var r="true"===e.params.trackInView;return r&&require(["trjs!ta/util/Element"],function(n){n.trackWhenScrolledIntoView("#"+e.id,["masthead","in_view"])}),n.on("update-"+e.name,t),{}})});
define("utils/VisibilityCheckFunction",function(){function t(){return Element.prototype.getBoundingClientRect?Promise.resolve(function(t){if(!t)return!1;var n;try{n=t.getBoundingClientRect()}catch(t){return!1}return e(n,{top:0,left:0,bottom:Math.max(document.documentElement.clientHeight,window.innerHeight||0),right:Math.max(document.documentElement.clientWidth,window.innerWidth||0)})}):new Promise(function(t){require(["trjs!api-mod"],function(n){t(function(t){if(!t)return!1;var i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=n.scrollTop(),u=r+o,h=n.scrollLeft(),c=h+i,f=n.getPosition(t);return e({width:t.offsetWidth,height:t.offsetHeight,top:f.top,left:f.left,bottom:f.top+t.offsetHeight,right:f.left+t.offsetWidth},{top:r,left:h,bottom:u,right:c})})})})}function e(t,e){return 0!==t.width&&0!==t.height&&(!(t.bottom<=e.top||t.top>=e.bottom)&&!(t.left>=e.right||t.right<=e.left))}function n(){return i}var i=t();return{getPromise:n}});
define("utils/VisibilityChecker",["utils/to-array","utils/is-element","utils/VisibilityCheckFunction"],function(e,t,r){function i(r,i,n){return null==n?i:t(n)?i.concat(n):"string"==typeof n?i.concat(e(r.querySelectorAll(n))):i}function n(e){var t=e.elements,r=e.context||document,n=e.callback,c=!1;if(!Array.isArray(t))throw new TypeError("VisibilityChecker must have an elements array");return function(){c||(c=!0,l.then(function(e){c=!1;var l=t.reduce(i.bind(null,r),[]).filter(e);if(l.length>0&&"function"==typeof n){var u=n(l);Array.isArray(u)&&(t=u)}}))}}var l=r.getPromise();return n});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_hr_nearby","handlers",["handlers"]);t(["babel/babel-helpers","placement","ta/prwidgets","mobile/lite/image-loader","ta/Core/TA.FireEvent","utils/VisibilityChecker","utils/throttle","utils/responsive","common/Radio","common/trackingStreams"],function(e,t,n,r,i,a,l,o,c,d){function s(){t.servletName.includes("Restaurant_Review")&&(d.trackEvent("Restaurant_Review","map_click_staticimage_nearby",t.location_id),p.trigger("open-trigger-clicked")),d.trackEvent("nearby","click","open_float_map"),u.trigger("open-trigger-clicked")}function m(){require(["babel/babel-helpers","trjs!ta/p13n/placements-ajax"],function(e,i){return i.enableAutoRefresh(t,{allowUndated:t.params.allow_undated,customUpdater:function(e){var i=document.getElementById(t.id),a=document.createElement("div");a.innerHTML=e;var l=a.querySelector(".grids"),o=i.querySelector(".grids");l instanceof Element&&o instanceof Element&&(o.parentNode.replaceChild(l,o),n.initWidgets(l),r.init(20,l))}})})}var u=c("hr-map"),p=c("restaurant-detail-map"),g=a({elements:["#"+t.id],callback:function(){window.removeEventListener("scroll",_),d.trackEvent("nearby_hr","in_view"),m()}}),v=t.params.loadOnScrollThreshold||0,b=function(){var e=document.getElementById(t.id);window.innerHeight+v>=e.getBoundingClientRect().top&&(window.removeEventListener("scroll",_),d.trackEvent("nearby_hr","within_scroll_threshold"),m())},h=v>0?b:g,_=l(function(){return o.tablet()&&h()},20);return window.addEventListener("scroll",_),_(),r.init(20,document.getElementById(t.id)),{mapClick:s}})});
define("utils/ScrollInContainer",["lib/jquery-amd","ta/Core/TA.Event","utils/throttle"],function(t,e,o){function i(i){function n(){var e=t(i.bottomAnchor);e.length||(y=!0)}function f(e,o){if(!y&&"undefined"!=typeof d){e=e||window.event;var n,f=i.topMargin+(t(i.topDodgeFixed).outerHeight()||0);n=i.topAnchor?t(i.topAnchor).offset().top+t(i.topAnchor).height():l.offset().top;var r,g=t(window).scrollTop()+f,u=0,v=0;if(g>n){var b=t(i.bottomAnchor);if(b.length){if(u=b.offset().top,u-n<=h.height())return void h.css({position:"static",width:l.width()})}else u=n+l.height();u-=s(),g+h.height()>=u?(r="absolute",v=i.bottomMargin,v+=c?n+l.height()-u:a.height()+a.offset().top-(b.length?b.offset().top:0)):r="fixed"}else r="static";if(r!==m||o||!e||"resize"===e.type){if(e&&"resize"===e.type&&"right"===i.stickySide){var A=a.width();w+=A-p,p=A}if(m=r,"fixed"===r)h.css({bottom:"auto",top:f,left:l.offset().left+d});else if("absolute"===r){var S=h.offset().left,x=l.offset().left;w=c?S-x:S-a.offset().left,h.css({bottom:v,top:"auto",left:w})}if(h.css({position:m,width:l.width()}),"center"===i.stickySide){var z=l.innerWidth()/2-h.width()/2;"fixed"===r&&(z+=l.offset().left),h.css("left",z)}}}}function s(){var e=t(S),o=i.bottomMargin;return"Restaurant_Review"===window.pageServlet&&e.length>0&&(o+=750),o}function r(e){var i=Date.now();f(e);var n=Date.now()-i;n>u&&(b++,b>=v&&(t(window).off("scroll resize",r),t(window).on("scroll resize",o(f,300))))}var l,h,a,c,d,w,g,p,u=50,v=5,b=0,m="static",y=!1,A=!0,S=".belowScrolingAd";i=t.extend({bottomMargin:0,topMargin:0,stickySide:"left"},i),this.init=function(s,u){var v=t(i.bottomAnchor);if(v.length){t(window).on("scroll",o(n,500)),l=t(s),h&&h.is(u)||(h=t(u),a=h.offsetParent()),m="",p=a.width();var b=h.width();if(A){A=!1;var y=h.offset().left,S=l.offset().left;d=y-S,c=a.is(l),w=c?y-S:y-a.offset().left,t(window).on("scroll resize",r),e.on("page-changes-pending",this.test.bind(this))}else{var x=g-b;x&&(d+=x,"right"===i.stickySide&&(w+=x))}g=b,f()}},this.test=function(){f(null,!0)}}return i});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_rail_ad_wrapper","handlers",["handlers"]);t(["placement","ta/Core/TA.FireEvent","utils/ScrollInContainer"],function(e,t,n){function o(e){var t=document.getElementById(e.domId);t&&a.contains(t)&&i&&i.contains(t)&&c.offsetTop>d.offsetTop+d.offsetHeight&&s.init(i,d)}function r(){t.on("onAdRender",o),e.params.contentUpdatedEvent&&t.on(e.params.contentUpdatedEvent,s.test.bind(s))}var a=document.getElementById(e.id),i=a.querySelector(".ad_column_sticky"),d=i&&i.querySelector(".stickyAds"),c=a.querySelector(".bottom_anchor"),s=new n({topMargin:24,bottomMargin:18,stickySide:"center",topDodgeFixed:".persistent_tabs_header.fixed",topAnchor:a.querySelector(".top_anchor"),bottomAnchor:c}),l=a.querySelector(".hide-ad");if(l){var p=l.querySelector(".gptAd");p&&p.classList.add("inactive")}r()})});
require(["ta/p13n/placements"],function(e){var a=e.define.bind(e,"resp_rr_photo_mosaic","handlers",["handlers"]);a(["placement","lib/jquery-amd","photoviewer/loader","ta/Core/TA.Record"],function(e,a,t,i){"use strict";function r(e){var a={detail:c,geo:l,updateType:"full",albumId:101,filter:7};e>0?(a.ff=e,a.baseMediaId=e,a.albumViewMode="hero",i.trackEventOnPage("Restaurant_Review","photo_click_hero",c,0,!1)):(a.albumViewMode="images",i.trackEventOnPage("Restaurant_Review","photo_click_see_all",c,0,!1)),t.load(a)}function n(){var e=a("img",".large_photo_wrapper").attr("data-mediaId");r(e)}function o(e){i.trackEventOnPage("Restaurant_Review",e,c,0,!1)}var d=a(".photo_mosaic_info",e.element),c=parseInt(d.attr("data-location-id"))||-1,l=parseInt(d.attr("data-geo-id"))||-1;return a("[data-mediaid]",e.element).each(function(e,t){a(t).click(function(){r(a(this).attr("data-mediaid"))})}),{openPhotoViewer:r,openPhotoViewerEntry:n,trackClick:o}})});
define("t4b/tracking/b2bClickTracking",["babel/babel-helpers","page-model","ajax-request"],function(e,t,n){var r=function(r,c){var i=c.context,a=void 0===i?t.session.pageServlet:i,o=e.objectWithoutProperties(c,["context"]);return n("/B2BClickTracking/"+a+"/"+r,{method:"POST",data:JSON.stringify(e.extends({puid:t.session.uid},o)),"content-type":"application/json","x-requested-by":t.JS_SECURITY_TOKEN})},c=function(e){return e&&n(e,{method:"GET"})};return{trackContactClick:function(e){return r("contact",e)},trackSpecialOfferClick:function(e){return r("specialOffer",e)},trackOfferlessCommerceClick:c}});
define("retargeting/util",["ta/Core/TA.Store","mixins/page-dates/Utils"],function(e,t){function r(e){e.hasOwnProperty("drs")||(e.drs=ta.retrieve("retargeting.drs")),e.hasOwnProperty("uvm")||(e.uvm=ta.retrieve("retargeting.uvm")),e.hasOwnProperty("dbi")||(e.dbi=ta.retrieve("retargeting.dbi")),e.hasOwnProperty("geoId")&&void 0!==e.geoId||(e.geoid=ta.retrieve("retargeting.geoId"))}function a(t,a){t&&a&&taq&&(r(a),taq("init",g),e.has("retargeting.rtURL")&&taq("override",e.retrieve("retargeting.rtURL")),window.pageServlet?a.servlet_name=window.pageServlet:require.defined("page-model")&&(a.servlet_name=require("page-model").session.pageServlet),taq("track",t,a))}function i(e){if(ta.page&&ta.page.hasDates("STAYDATES")){var r=ta.page.getDates("CHECKIN")[0],a=ta.page.getDates("CHECKOUT")[0];e.travel_start_date=t.dateToIso(r),e.travel_end_date=t.dateToIso(a)}}var g=481409672;return{send:a,getDates:i}});
define("retargeting/providers/mobile-bl-click",["retargeting/util"],function(e){return function(r,t,d){if(t){var i=!1,a="";require.defined("page-model")&&(i=require("page-model").session.loggedIn,a=require("page-model").DUST_GLOBAL.DEVICE);var n={};n.locationId=t.locationId,n.geoId=t.geoId,n.brand=t.brand,n.sub_brand=t.sub_brand,n.ip=t.ip,n.is_member=i,n.device_type=a,n.travel_start_date=t.travel_start_date,n.travel_end_date=t.travel_end_date,d&&/_/.test(d)&&(n.click_type=d.substring(0,d.indexOf("_"))),e.send(r,n)}}});
define("retargeting/listeners/mobile-bl-click",["ta/Core/TA.Event","retargeting/providers/mobile-bl-click"],function(e,i){return function(e,n){require(["trjs!taevents"],function(){e&&e.enableHolisticTracking&&"function"==typeof i&&i("BL_CLICK",e,n)})}});
require(["ta/prwidgets"],function(c){var t=c.define.bind(c,"hotels_hotel_contacts_resp","handlers",["handlers"]);t(["babel/babel-helpers","widget","page-model","t4b/tracking/b2bClickTracking","retargeting/listeners/mobile-bl-click","utils/asdf-encoder"],function(c,t,n,e,o,i){function a(c){o(c,"website_")}function l(c,t){e.trackContactClick({locationId:d,contactType:"PHONE",contactColumn:c}),t&&e.trackOfferlessCommerceClick(i.asdf(t))}function r(c,t,n,o,a,l){e.trackContactClick({locationId:d,contactType:"EMAIL",contactColumn:c}),t&&e.trackOfferlessCommerceClick(i.asdf(t));var r="mailto:"+n+o+a+"?subject="+l;window.location=r}function s(c,t,n,o){e.trackContactClick({locationId:d,contactType:n,contactColumn:c,isCommerce:o});var a=i.asdf(t);window.open(a,"_blank")}var d=n.LOC_ID;return{holisticTracking:a,onPhoneClicked:l,onEmailClicked:r,onWebLinkClicked:s}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"resp_rr_top_info","handlers",["handlers"]);n(["placement","ta/Core/TA.Record"],function(e,n){function r(e,r,t){n.trackEventOnPage("Restaurant_Review",r,t)}return{trackClick:r}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"restaurants_top_three_reasons_resp","handlers",["handlers"]);t(["placement","lib/jquery-amd","ta/Core/TA.Event","ta/Core/TA.Record","page-model","sponsoredlisting/utils"],function(e,t,n,o,a,r){function i(e){var t=e.currentTarget||this;if(r.isInViewport(t)){var n="top_3_reasons_displayed",s=a.LOC_ID;o.trackEventOnPage(a.session.pageServlet,n,s),d.removeEventListener("pageScroll",i),d.removeEventListener("top3ReasonsLoadComplete",i)}}function s(r,i){r.preventDefault&&r.preventDefault();var s=t(r.target),l=t(s.closest(".reason")),c=t(l.find(".teaser")),d=c.attr("data-keyword"),v=c.attr("data-reviewid")||"none";n.fireEvent("reasons-keywordClick",d),o.trackEventOnPage(a.session.pageServlet,"top_three_reasons_click",d+"|"+v,e.location_id),o.trackEventOnPage(a.session.pageServlet,"top_three_reasons_"+i+"_click",d+"|"+v,e.location_id)}function l(n){var r=t(n.target),i=r.attr("data-mediaid");o.trackEventOnPage(a.session.pageServlet,"top_three_reasons_photo_click",i,e.location_id)}var c=t("#"+e.id);if(c){var d=c[0];return c.find(".content").length>0&&d&&(window.addEventListener("scroll",function(e){var t;"function"==typeof window.CustomEvent?t=new CustomEvent("pageScroll"):(t=document.createEvent("CustomEvent"),t.initCustomEvent("pageScroll",!0,!0,null)),d.dispatchEvent(t)}),window.setTimeout(function(){d.addEventListener("pageScroll",i),d.addEventListener("top3ReasonsLoadComplete",i)},0)),c.find(".top_aligned .highlight").on("click",function(e){s(e,"keyword")}),c.find(".bottom_aligned .highlight").on("click",function(e){s(e,"review")}),{trackPhotoClick:l}}})});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"restaurants_xsell_resp","handlers",["handlers"]);e(["placement","lib/jquery-amd","ta/prwidgets","ta/Core/TA.Event","ta/util/Element","ta/util/Error"],function(t,e,r,n,a,i){function u(){var e=document.getElementById("RR_XSELL_WRAPPER");e&&t.requestAJAXPlacement(function(t){e.innerHTML=t,r.initWidgets(),c(),n.on("track_shelf_see_all_click_event",d)},function(){})}function c(){try{e(document.querySelectorAll(".shelf_container")).each(function(t,e){var r=["CrossSell","shelf_in_view",e.getAttribute("data-rownumber"),e.getAttribute("data-shelf-id")];a.trackWhenScrolledIntoView(e,r)})}catch(t){i.record(t,"Restaurant_Review setupScrollTracking error")}}function l(t){return t&&t.hasAttribute("data-tpp")}function o(t){return l(t)?{"property":t.getAttribute("data-tpp"),"action":t.getAttribute("data-tpact"),"attrib":t.getAttribute("data-tpatt"),"pid":t.getAttribute("data-tpid")}:null}ta.queueForReady(u);var d=function(t,e){var r=o(e);r&&ta.trackEventOnPage(r.property,r.action,r.attrib,r.pid)};return{}})});
define("photoviewer/models/eventTypes",["babel/babel-helpers","utils/objutils"],function(e,E){"use strict";var C={GRID_SCROLLED:"gridViewScrolled",HERO_THUMBS_REQUESTED:"heroThumbsRequested",ADVANCE_HERO_CLICKED:"advanceHeroClicked",HERO_FOCUS_CHANGED:"heroFocusChanged",HERO_UPDATED:"heroUpdated",HERO_CLICKED:"heroClicked",HELPFUL_VOTE_CHANGE:"updateHelpfulVote",CATEGORY_CHANGE:"categoryChange",MEDIA_FILTER_CHANGE:"mediaFilterChange",HERO_PHOTO_CHANGE:"heroPhotoChange",ALBUM_CHANGE:"albumChange",TYPE_CHANGE:"typeChange",BACK_TO_GALLERY:"backToGallery",AUTOPLAY_TOGGLE:"autoPlayToggle",RHR_CLICKED:"rhrClicked",CANCEL_AUTO_PLAY:"cancelAutoPlay",AUTO_PLAY_NEXT:"autoPlayNext",NAV_KEY_PRESSED:"navKeyPressed"},_=C;return E.deepFreezeCopy(_)});
define("photoviewer/radioHelper",["babel/babel-helpers","lib/jquery-amd","common/Radio"],function(e,o,n){"use strict";function t(e,t,i,r){function u(t){return!!o(e).closest("#"+t)&&(f=n(t),!0)}function c(){n("responsive-photoviewer").off("content-loaded",d),"function"==typeof r&&r()}function d(n){return i&&!o.contains(document,o(e).get(0))?void setTimeout(c,0):void(u(n)&&"function"==typeof t&&t(n))}var f=void 0;return n("responsive-photoviewer").on("content-loaded",d),{getRadio:function(){return f},getOrInitRadio:function(e){return f||d(e),f}}}return t});
require(["ta/p13n/placements"],function(a){var e=a.define.bind(a,"pv_resp_content_grid","handlers",["handlers"]);e(["babel/babel-helpers","placement","lib/jquery-amd","photoviewer/models/eventTypes","photoviewer/radioHelper","photoviewer/tracking","mobile/lite/image-loader","utils/throttle"],function(a,e,t,r,i,o,d,n){"use strict";function l(a,e){var r=t(a),i=r.attr("data-updateComponent"),o=r.find(".albumGridItem"),d=_.find("[data-updateComponent="+i+"]");if(e===G){var n=t(".albumGridItem",_).first(),l=t(".photoGridWrapper",_),p=n.offset().top;n.before(o);var f=n.offset().top,g=Math.abs(p-f)>1;if(g){var m=f-p;l.scrollTop(m)}O=!1}else t(".albumGridItem",_).last().after(o),T=!1;d.replaceWith(r),s()}function p(a,e){var i=t(e),o=t(".photoGridBox",_);x=i.data("mediaid"),B=i.data("mediatype"),y=o.data("albumid");var d=o.data("aggregationid");M=o.data("filter");var n=i.attr("data-panoid");R.getRadio().trigger(r.HERO_PHOTO_CHANGE,{albumViewMode:"hero",aggregationId:d,albumid:y,ff:x,filter:M,panoId:n})}function f(a,e){p(a,e),a&&"click"===a.type&&o.recordGridTileClick(x,y,M,B)}function g(a){var i=t(".loadMore"+a,_);if(!i.length)return!1;var o=t(".photoGridBox",_);y=o.data("albumid");var d=o.data("aggregationid");M=o.data("filter");var n=i.data("offset"),l={albumViewMode:"imageThumbs",aggregationId:d,albumid:y,filter:M,albumPartialsToUpdate:"partial",offset:n,loadDirection:a};return a===G?(O=!0,l.cnt=parseInt(i.attr("data-firstOffset"))-n):T=!0,R.getRadio().trigger(r.GRID_SCROLLED,l,"update-"+e.name+"-more"+a,a),!0}function s(){d.demandLoadImages(_.get(0))}function m(a,e,r){var i=t(e),o=t(r);if(o.length){o.find(".ui_spinner").remove();var d=t(".fillSquare",o);if(d&&d.length){var n=i.width()/i.height()>d.width()/d.height();d.toggleClass("landscape",n)}t(".videoOverlay",o).removeClass("hidden"),t(".panoOverlay",o).removeClass("hidden")}}function h(){var a=t(".photoGridWrapper",_),e=a.scrollTop();e+a.height()+b>=t(".photoGridBox",_)[0].scrollHeight&&!T&&g(w)&&R.getRadio().trigger("force-ad-refresh"),e<b&&!O&&g(G)&&R.getRadio().trigger("force-ad-refresh")}function u(){v(),_=t("#"+e.id),C=R.getRadio(),C.on(I,l);var a=t(".loadMoreUpward",_);if(a.length){var r=parseInt(a.attr("data-initialMediaId"));if(!isNaN(r)){var i=t("[data-mediaid="+r+"]",_),o=i.length&&i.get(0);o.scrollIntoView&&o.scrollIntoView()}}t(".photoGridWrapper, .photoGridBox",_).on("scroll",n(function(){s(),h()},100)),s(),h(),c()}function v(){C&&C.off(I,l),_&&t(".photoGridWrapper, .photoGridBox",_).off("scroll")}function c(){var a=_.find(".photoGridBox"),e=a.attr("data-aggregationid"),t=a.attr("data-albumid"),r=a.attr("data-filter"),i=a.find(".albumGridItem").length;o.trackPhotoViewerImpression("grid_view",t+"|"+e+"|"+r),i&&o.trackPhotoViewerImpression("grid_view_photos_seen",i)}var b=200,w="Downward",G="Upward",I="update-"+e.name+"-moreDownward update-"+e.name+"-moreUpward",_=void 0,C=void 0,R=i("#"+e.id,u),O=!1,T=!1,x=void 0,y=void 0,B=void 0,M=void 0;return{afterImgLoad:m,onGridItemSelected:f}})});
require(["ta/p13n/placements"],function(e){var a=e.define.bind(e,"pv_resp_content_grid_zepto","handlers",["handlers"]);a(["babel/babel-helpers","placement","lib/jquery-amd","photoviewer/models/eventTypes","photoviewer/radioHelper","photoviewer/tracking","mobile/lite/image-loader","utils/throttle"],function(e,a,t,r,i,o,d,n){"use strict";function l(e,a){var r=t(e),i=r.attr("data-updateComponent"),o=r.find(".albumGridItem"),d=G.find("[data-updateComponent="+i+"]");if(a===w){var n=t(".albumGridItem",G).first(),l=t(".photoGridWrapper",G),p=n.offset().top-l.scrollTop();n.before(o),n.offset().top!==p&&l.scrollTop(n.offset().top-p),T=!1}else t(".albumGridItem",G).last().after(o),R=!1;d.replaceWith(r),s()}function p(e,a){var i=t(a),o=t(".photoGridBox",G);C=i.data("mediaid"),k=i.data("mediatype"),V=o.data("albumid");var d=o.data("aggregationid");D=o.data("filter");var n=i.attr("data-panoid");_.getRadio().trigger(r.HERO_PHOTO_CHANGE,{albumViewMode:"hero",aggregationId:d,albumid:V,ff:C,filter:D,panoId:n})}function f(e,a){p(e,a),e&&"click"===e.type&&o.recordGridTileClick(C,V,D,k)}function g(e){var i=t(".loadMore"+e,G);if(i.length){var o=t(".photoGridBox",G);V=o.data("albumid");var d=o.data("aggregationid");D=o.data("filter");var n=i.data("offset"),l={albumViewMode:"imageThumbs",aggregationId:d,albumid:V,filter:D,albumPartialsToUpdate:"partial",offset:n,loadDirection:e};e===w?(T=!0,l.cnt=parseInt(i.attr("data-firstOffset"))-n):R=!0,_.getRadio().trigger(r.GRID_SCROLLED,l,"update-"+a.name+"-more"+e,e)}}function s(){d.demandLoadImages(G.get(0))}function m(e,a,r){var i=t(a),o=t(r);if(o.length){o.find(".ui_spinner").remove();var d=i.width()/i.height()>o.width()/o.height();o.toggleClass("landscape",d)}}function c(){var e=t(".photoGridWrapper",G);e.scrollTop()+e.height()+v>=e.get(0).scrollHeight&&!R&&(g(b),_.getRadio().trigger("force-ad-refresh")),e.scrollTop()<v&&!T&&(g(w),_.getRadio().trigger("force-ad-refresh"))}function h(){_.getRadio().off(I,l).on(I,l),G=t("#"+a.id);var e=t(".loadMoreUpward",G);if(e.length){var r=parseInt(e.attr("data-initialMediaId"));if(!isNaN(r)){var i=t("[data-mediaid="+r+"]",G),o=i.length&&i.get(0);o.scrollIntoView&&o.scrollIntoView()}}t(".photoGridWrapper, .photoGridBox",G).off("scroll").on("scroll",n(function(){s(),c()},100)),s(),u()}function u(){var e=G.find(".photoGridBox"),a=e.attr("data-aggregationid"),t=e.attr("data-albumid"),r=e.attr("data-filter"),i=e.find(".albumGridItem").length;o.trackPhotoViewerImpression("grid_view",t+"|"+a+"|"+r),i&&o.trackPhotoViewerImpression("grid_view_photos_seen",i)}var v=200,b="Downward",w="Upward",I="update-"+a.name+"-moreDownward update-"+a.name+"-moreUpward",G=void 0,_=i("#"+a.id,h),T=!1,R=!1,C=void 0,V=void 0,k=void 0,D=void 0;return{afterImgLoad:m,onGridItemSelected:f}})});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"pv_resp_content_hero","thumbsScroller",["handlers","preloader","thumbsScroller"]);e(["babel/babel-helpers","lib/jquery-amd","api-mod","ta/util/I18N","common/trackingStreams"],function(t,e,a,i,r){function s(t,s){function h(){var t=e(".heroPhoto",s).attr("data-mediaid");return o.children.filter("[data-mediaid="+t+"]").first()}function l(t){t=e(t),e(".tinyThumb.current",s).removeClass("current"),t.addClass("current");var a=e(".heroNav.right",s),i=e(".heroNav.left",s);i.toggleClass("disabled",0===parseInt(t.attr("data-offset"))),t.next(".tinyThumb").length>0?a.removeClass("disabled"):a.addClass("disabled")}function n(){var t=e(".heroThumbnails",e(s)),a=t.width();e("img[data-lazyurl]",t).each(function(t,i){var r=e(i);r.position().left<=a&&r.attr("src",r.attr("data-lazyurl")).removeAttr("data-lazyurl")})}function d(){var t=e(".heroThumbnails .thumbNav.left",s),a=e(".heroThumbnails .thumbNav.right",s);t.length&&a.length&&(u?(t.toggleClass("disabled",!f.hasMore.loaded.right&&!f.hasMore.unloaded.right),a.toggleClass("disabled",!f.hasMore.loaded.left&&!f.hasMore.unloaded.left)):(t.toggleClass("disabled",!f.hasMore.loaded.left&&!f.hasMore.unloaded.left),a.toggleClass("disabled",!f.hasMore.loaded.right&&!f.hasMore.unloaded.right)))}var o={},f={},u=i.isRtl();s=e(s),this.init=function(){if(o={thumbs:e(".photos.inHeroList",s),thumbsParent:e(".heroThumbnails",s),children:e(".photos.inHeroList > div",s)},!o.thumbsParent.length||!o.children.length)return!1;o.lastThumb=o.children.last(),o.firstThumb=o.children.first(),f={firstOffset:parseInt(o.firstThumb.attr("data-offset")),lastOffset:parseInt(o.lastThumb.attr("data-offset")),maxOffset:parseInt(o.thumbsParent.attr("data-totalThumbs"))-parseInt(o.thumbsParent.attr("data-panoCount"))-1,navWidth:e(".thumbNav.left",s).outerWidth(),oneThumbWidth:o.lastThumb.outerWidth()},f.visibleWidth=o.thumbsParent.width()-2*f.navWidth;var t=o.thumbsParent.offset().left+f.navWidth,i=t+o.thumbsParent.outerWidth()-f.navWidth,r=o.thumbs.offset().left,h=r+o.thumbs.outerWidth();return f.curLeft=parseInt(o.thumbs.css("left"))||0,f.curRight=parseInt(o.thumbs.css("right"))||0,f.maxLeft=a.getPosition(o.lastThumb,o.thumbs).left+f.oneThumbWidth-f.visibleWidth,f.maxRight=o.thumbs.width()-f.visibleWidth,f.hasMore={unloaded:u?{right:f.firstOffset>0,left:f.lastOffset<f.maxOffset}:{right:f.lastOffset<f.maxOffset,left:f.firstOffset>0},loaded:{right:h>i,left:r<t},loadedNextPage:{right:h-f.visibleWidth>i,left:r+f.visibleWidth<t}},n(),d(),!0},this.loadMore=function(a,i){try{var s=parseInt(o.thumbsParent.attr("data-pageSize"));if(f.hasMore.unloaded[i]){var h=function(){"left"!==i||u?"right"===i&&u&&o.thumbs.css({left:"auto",right:window.getComputedStyle(o.thumbs.get(0)).right}):o.thumbs.css({right:"auto",left:window.getComputedStyle(o.thumbs.get(0)).left}),m.init(),a&&a()},l="left"===i?u:!u,n={albumViewMode:"heroThumbs",albumid:o.thumbsParent.attr("data-albumid"),aggregationId:o.thumbsParent.attr("data-aggregationId"),filter:o.thumbsParent.attr("data-filter")};l?n.offset=Math.min(f.lastOffset+1,f.maxOffset):(n.offset=Math.max(f.firstOffset-s,0),s>f.firstOffset&&(n.cnt=f.firstOffset));var d="?"+e.param(n),m=this,b=u?"right":"left";return t(d,h,{prepend:i===b}),"left"!==i||u?"right"===i&&u&&o.thumbs.css({right:"auto",left:f.visibleWidth-f.curRight-o.thumbs.width()-4}):o.thumbs.css({left:"auto",right:f.visibleWidth-f.curLeft-o.thumbs.width()-4}),!0}}catch(t){r.error(t,"ResponsivePhotoViewer hero thumbs loadMore failed")}return!1};var m=function(t){var e=h();if(e.length>0){var i=o.thumbsParent[0].getBoundingClientRect(),r=e[0].getBoundingClientRect(),s=i.left+f.navWidth,n=i.right-f.navWidth,d=n-s,m=r.right-r.left,b=r.right>n,c=r.left<s,v=!1,p=a.getPosition(e,o.thumbs).left;u&&(p=o.thumbs.width()-p-m),b?(f.hasMore.loadedNextPage.right||t||(v=this.loadMore(g.bind(this,"current",!0),u?"left":"right")),v||(u?o.thumbs.css("right",Math.min(-p+d-m,0)+"px"):o.thumbs.css("left",Math.max(-p,-f.maxLeft)+"px"))):c&&(f.hasMore.loadedNextPage.left||t||(v=this.loadMore(g.bind(this,"current",!0),u?"right":"left")),v||(u?o.thumbs.css("right",Math.max(-p,-f.maxRight)+"px"):o.thumbs.css("left",Math.min(-p+d-m,0)+"px"))),l(e)}}.bind(this),b=function(t,e){var a=!1;if(f.hasMore.loadedNextPage[t]||e||(a=this.loadMore(g.bind(this,t,!0),t)),!a&&f.hasMore.loaded[t]){var i=void 0,r=u?"right":"left";i="right"===t?u?Math.min(f.curRight+f.visibleWidth,0):Math.max(f.curLeft-f.visibleWidth,-f.maxLeft):u?Math.max(f.curRight-f.visibleWidth,-f.maxRight):Math.min(f.curLeft+f.visibleWidth,0),o.thumbs.css(r,i+"px")}}.bind(this);this.scroll=function(t,e){"left"===t||"right"===t?b(t,e):"current"===t&&m(e);var a=this;o.thumbs.off("transitionend").on("transitionend",a.init)};var g=function(t,e){this.init()&&this.scroll(t,e)}.bind(this)}return s})});
require(["ta/p13n/placements"],function(t){var a=t.define.bind(t,"pv_resp_content_hero","preloader",["handlers","preloader","thumbsScroller"]);a(["babel/babel-helpers","lib/jquery-amd","hotels/tracking/timing"],function(t,a,e){function r(){function t(){i=null,a()}function a(){if(!i){var a=r.shift();a&&(i=new Image,e[a]=i,i.onload=t,i.onerror=t,i.src=a,i.complete&&t())}}var e={},r=[],i=null;this.clear=function(){r=[],e={}},this.clearQueue=function(){r=[]},this.getImageByUrl=function(t){return e[t]},this.addToQueue=function(t){t&&!e[t]&&r.indexOf(t)<0&&(r.push(t),setTimeout(a,1))}}function i(t,i,d){var l=this,u=new r;t=a(t),this.clear=function(t){t?u.clear():u.clearQueue()},this.preloadPhoto=function(r,n){var o=e.start("pv_change_photo",require("page-model").LOC_ID);r=a(r);var h=a(".heroPhoto",t),p=a(".mainImg img",h),c=r.attr("data-heroheight"),s=r.attr("data-herowidth"),f=a(u.getImageByUrl(n)||"<img/>"),g=function(){i(),d()===n&&p.parent().length&&(p.replaceWith(f),l.beginPreload(),f.off("load"),o())};f.on("load",g),c&&f.prop("height",parseInt(c)),s&&f.prop("width",parseInt(s)),f.prop("src")||f.prop("src",n),f.prop("complete")&&g.call(f)},this.preloadVideo=function(e){e=a(e);var r=a(".heroPhoto",t),i=e.attr("data-bigurl"),n=e.attr("data-icaption"),o=e.attr("data-srcurl"),d=e.attr("data-videoformats");a(".mainImg img",r).remove();var l=a(".mainImg",r);return!!l.length&&(l.append(a("<div></div>").addClass("videoPlayer").attr({"data-videoFormats":d,"data-src":o,"data-preview":i,"data-icaption":n}).append(a("<div></div>").addClass("jwPlayer").prop("id","JWPLAYER"))),!0)},this.beginPreload=function(){var e=a(".tinyThumb",t),r=e.filter(".current"),i=r.index();if(r.length){var d=Math.max(i-n,0),l=Math.min(i+1+o,e.length),h=void 0;for(h=i+1;h<l;h++)u.addToQueue(a(e[h]).attr("data-bigUrl"));for(h=i-1;h>=d;h--)u.addToQueue(a(e[h]).attr("data-bigUrl"))}}}var n=1,o=3;return i})});
define("ta/common/Swipe",["vanillajs"],function(e){"use strict";return{resetImageBehavior:function(e,t){for(var n,o=document.querySelectorAll(e),i=function(e){e.preventDefault()},r=0;r<o.length;r++)n=o[r],n.onmousedown=i,t&&n.removeAttribute("onclick")},addSwipeListener:function(e,t,n){function o(){e.removeEventListener("touchmove",i),e.removeEventListener("touchend",r),window.removeEventListener("MSPointerMove",i,!1),window.removeEventListener("MSPointerUp",r,!1),c=null,a=null,v=null}function i(e){if(e.touches.length>1)o();else{s=e.touches[0].pageX-c;var t=e.touches[0].pageY-a;null===v?(v=s,n||e.preventDefault(),e.stopPropagation()):(v<0&&s>0||v>0&&s<0||Math.abs(t)>l)&&o()}}function r(n){o(),t&&Math.abs(s)>d&&t({target:e,direction:s>0?"right":"left",event:n}),s=0}function u(t){1==t.touches.length&&(c=t.touches[0].pageX,a=t.touches[0].pageY,e.addEventListener("touchmove",i,!1),e.addEventListener("touchend",r,!1),window.addEventListener("MSPointerMove",i,!1),window.addEventListener("MSPointerUp",r,!1))}var c,a,s,v,d=40,l=30;return"function"==typeof t&&e.addEventListener("touchstart",u,!1),{cancel:function(){"function"==typeof t&&e.removeEventListener("touchstart",u,!1)}}}}});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"pv_resp_content_hero","handlers",["handlers","preloader","thumbsScroller"]);e(["babel/babel-helpers","placement","lib/jquery-amd","photoviewer/models/eventTypes","photoviewer/tracking","photoviewer/radioHelper","utils/ajax","ta/prwidgets","thumbsScroller","utils/urlutils","ta/util/I18N","preloader","common/trackingStreams","utils/responsive","ta/common/Swipe","common/Radio","photoviewer/loader","utils/throttle","utils/browserutils"],function(t,e,a,r,o,n,i,d,l,u,s,p,m,c,h,f,g,v,b){"use strict";function w(){ot.getRadio().reply("currentHeroId",T),ot.getRadio().on("update-"+e.name+"-hero-thumbnails",S),rt=a("#"+e.id),pt=new l(M,rt),pt.init(),ot.getRadio().off(r.ADVANCE_HERO_CLICKED).on(r.ADVANCE_HERO_CLICKED,function(t){H(1===t)}),ot.getRadio().off("autoPlayNext",Y).on("autoPlayNext",Y),ot.getRadio().off("cancelAutoPlay",E).on("cancelAutoPlay",E),ot.getRadio().off(r.RHR_CLICKED,_).on(r.RHR_CLICKED,_),ot.getRadio().reply("nextVideoTitle",et),f("responsive-photoviewer").off("overlay-hide",y).on("overlay-hide",y),nt=new p(rt,R,function(){return it}),nt.beginPreload();var t=a(".tinyThumb.current",rt).attr("data-panorama");t&&O(t);var n=a(".heroWrapper",rt);n.off("mouseover").on("mouseover",function(){ot.getRadio().trigger(r.HERO_FOCUS_CHANGED,{hasFocus:!0})}),n.off("mouseout").on("mouseout",function(){ot.getRadio().trigger(r.HERO_FOCUS_CHANGED,{hasFocus:!1})});var i=a(".photoviewerContainer.hero .pvContent");i.length&&(ut&&ut.cancel(),ut=h.addSwipeListener(i.get(0),function(t){if(!n.hasClass("panorama")){if(a(t.event.target).closest(".heroThumbnails").length)return;H("left"===t.direction),o.recordPhotoSwipe()}})),a(".mainImg",n).off("click",I).on("click",I),a(".inHeroList",rt).length&&(st&&st.cancel(),st=h.addSwipeListener(a(".inHeroList",rt).get(0),function(t){t.event.stopPropagation(),U("left"===t.direction?"right":"left")})),setTimeout(function(){var t=a(".tinyThumb.current",rt);X(t),J(t)},0),Z(),q(C()),"ios"===b.Platform.name&&(mt(),a(window).off("resize",mt).on("resize",mt))}function y(){nt&&nt.clear(!0),"ios"===b.Platform.name&&a(window).off("resize",mt)}function T(){if(rt.length>0){var t=a(".tinyThumb.current",rt);return t.attr("data-mediaid")}return null}function C(){return a(".heroPhoto",rt).hasClass("playableVideo")}function P(){lt=setTimeout(function(){a(".heroPhoto .ui_spinner",rt).show()},500)}function R(){clearTimeout(lt),a(".heroPhoto .ui_spinner",rt).hide()}function I(){if(!a(".heroWrapper",rt).hasClass("panorama")){if(o.recordHeroClickOnDesktop(),c.desktop()){var t=a(".pano.tinyThumb.current",rt);if(t.length||C())return;H(!at)}_(),ot.getRadio().trigger(r.HERO_CLICKED)}}function _(){a(".heroThumbnails, .actions",rt).toggleClass("anchor")}function H(t){var e=void 0,r=void 0,o=a(".tinyThumb.current",rt);if(t?(r=o.next(".tinyThumb"),!r.length&&parseInt(o.attr("data-offset"))>0&&(e=at?"left":"right")):(r=o.prev(".tinyThumb"),!r.length&&parseInt(o.attr("data-offset"))>0&&(e=at?"right":"left")),f("photo_pagination_event").emit("pagination"),e)return void pt.loadMore(H.bind(self,t),e);var n=V(r)?D(r):L(r);n&&M(n)}function E(){H(!1)}function k(t){var e=V(t);return e?D(t):L(t)}function V(t){var e=a(t);return e.hasClass("pano")}function A(){var t=a(".heroThumbnails",rt);return{albumViewMode:"hero",aggregationId:t.attr("data-aggregationId"),albumid:t.attr("data-albumid"),filter:t.attr("data-filter")}}function D(t){if(!t)return{};var e=a(t),r=e.attr("data-mediaid"),o=e.attr("data-panorama"),n=A();return n.panoId=r,n.panoPath=o,n}function L(t){if(!t)return{};var e=a(t),r=e.attr("data-mediaid"),o=A();return o.ff=r,o}function O(t){R();var r=e.params.krpanoNew?"trjs!krpano":"trjs!krpano-old";require(["babel/babel-helpers",r],function(e){a("#PANO_HOLDER",rt).empty().removeProp("onclick");var r={html5:"only",wmode:"transparent",xml:"/PanoramaXml?pano="+encodeURIComponent(t),target:"PANO_HOLDER",id:"albumViewerPano"};a(".heroWrapper",rt).addClass("panorama"),a(rt).closest(".pvMain").addClass("fullHeight"),window.embedpano&&window.embedpano(r)})}function S(t,e){var r=a(t),o=r.attr("data-updateComponent"),n=rt.find('[data-updateComponent="'+o+'"]'),i=a(".photos.inHeroList",n),d=a(".tinyThumb",r);e&&e.options&&e.options.prepend?(i.prepend(d),U("current",!0)):i.append(d),dt=!1,e&&e.callback&&"function"==typeof e.callback&&e.callback()}function x(t,e,r){a(e).hasClass("disabled")||(at&&("left"===r?r="right":"right"===r&&(r="left")),o.recordPhotoStripArrowClick(),U(r))}function U(t,e){try{pt.scroll(t,e)}catch(e){m.error(e,"albumViewer:scrollThumbs failed",null,{direction:t})}}function N(t,e){if(f("photo_pagination_event").emit("pagination"),M(k(e)),t&&"click"===t.type){var r=a(e).data(),n=r.mediaid,i=r.albumid,d=r.mediaFilter,l=r.mediaType;o.recordHeroThumbClick(n,i,d,l),ot.getRadio().trigger("check-ad-refresh")}}function M(t,e,a){if(!dt&&(R(),nt?nt.clear(!1):m.error(null,"m_heroPreloader is null in responsive photo viewer:update()"),"string"==typeof t&&(t=u.getUrlQueryArgs(t)),t&&t.albumViewMode))if("hero"===t.albumViewMode){var r=t.panoId||t.ff;j(t,function(){null==T()?g.load(t,!1,!0):K(r,t.panoPath)}),K(r,t.panoPath)}else"heroThumbs"===t.albumViewMode&&F(t,e,a)}function F(t,a,o){dt=!0,ot.getRadio().trigger(r.HERO_THUMBS_REQUESTED,t,"update-"+e.name+"-hero-thumbnails",{callback:a,options:o})}function K(t,e){P();var r=e&&e.length>0,o=a(".mainImg .videoPlayer",rt);o.length&&o.remove(),a(".mainImg img",rt).length||a("<img>").appendTo(a(".mainImg",rt)),a(".heroWrapper",rt).removeClass("panorama"),a(rt).closest(".pvMain").removeClass("fullHeight"),window.removepano&&window.removepano("albumViewerPano");var n=a(".heroPhoto",rt);n.attr("data-mediaid",t),W(!1);var i=a(".tinyThumb.current",rt),d=i.attr("data-bigurl"),l=i.attr("data-dmoGeo");l?n.attr("data-dmogeo",l):n.removeAttr("data-dmogeo"),it=d;var u=!i.attr("data-videoformats");if(q(!(r||u)),r)O(e);else if(u)nt.preloadPhoto(i,d);else{R();var s=i.attr("data-srcurl"),p=i.attr("data-videoautoplay");z(d,s,p)}X(i),J(i)}function j(t,e){var r=t.aggregationId,o=t.albumid,n=t.ff,i=t.filter,d=t.panoId,l={aggregationId:r,albumid:o,filter:i};n&&(l.ff=n),d&&(l.panoId=d);var u="#photos;"+a.param(l);f("responsive-photoviewer").trigger("addHistory",{data:l},document.title,u,e)}function q(t){a(".heroPhoto",rt).toggleClass("playableVideo",t);var e=a("#heroVideo",rt).get(0);t||null==e||e.paused||e.pause()}function W(t){t&&G();var e=a(".heroPhoto",rt);e.length&&U("current",t)}function z(t,e,r){a(".videoContainer",rt).show();var o=a("#heroVideo",rt);o.length&&(o.attr("poster",t),o.attr("src",e),r&&(o.get(0).play(),o.prop("muted",!1)))}function G(){if(rt.parent("body").length){var t=a(".heroPhoto .mainImg img",rt);if(t.length){var e=a("img",t);e.length&&B(e,t)}}}function Q(t,e,r){a(r).find(".ui_spinner").remove()}function B(){setTimeout(function(){R()},1)}function X(t){var e=t.attr("data-captionText")||t.attr("data-icaption")||"";e=e.replace(/[\r\n]/g,"");var o=a(".heroThumbnails",rt),n={albumid:parseInt(o.attr("data-albumid")),isPano:t.hasClass("pano"),avatarUrl:t.attr("data-avatarurl"),captionText:e,captionProvider:t.attr("data-captionprovider"),helpfulvotes:parseInt(t.attr("data-helpfulVotes")),mediaFilter:parseInt(t.attr("data-image-media-filter")),mediaType:t.attr("data-media-type")||"",mediaid:t.attr("data-mediaid"),rating:parseInt(t.attr("data-rating")),reviewUrl:t.attr("data-reviewurl"),mediaAttributionUrl:t.attr("data-mediaAttributionUrl")};ot.getRadio().trigger(r.HERO_UPDATED,n)}function J(t){var e=t.attr("data-mediaid");if(e){var r=a(".heroThumbnails",rt),n=parseInt(r.attr("data-albumid")),i=parseInt(t.attr("data-image-media-filter")),d=t.attr("data-media-type")||"";o.trackPhotoViewerImpression("detail_view",e+"|"+n+"|"+i+"|"+d)}}function Y(){var t=a("#heroVideo",rt).get(0);null!=t&&t.play()}function Z(){var t=a("#heroVideo",rt).get(0);null!=t&&t.addEventListener("ended",$)}function $(){ot.getRadio().request("isAutoPlayEnabled")&&tt()&&(ot.getRadio().trigger("showAutoPlayOverlay"),H(!0))}function tt(){var t=a(".tinyThumb.current",rt),e=t.next(".tinyThumb");return!!e.length}function et(){var t=a(".tinyThumb.current",rt),e=t.next(".tinyThumb"),r=e.attr("data-captionText")||e.attr("data-icaption")||"";return r=r.replace(/[\r\n]/g,"")}var at=s.isRtl(),rt=void 0,ot=n("#"+e.id,w),nt=void 0,it=void 0,dt=!1,lt=void 0,ut=void 0,st=void 0,pt=void 0,mt=v(function(){var t=window.innerHeight,e=window.document.documentElement.clientHeight;if(t&&e&&t!==e){var r=e-t;a(".heroThumbnails",rt).css("bottom",r+"px")}},20);return{onThumbSelected:N,moveThumbs:x,heroClicked:I,afterThumbnailLoad:Q,afterImgLoad:B,playVideo:Y}})});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"pv_resp_content_hero_zepto","thumbsScroller",["handlers","preloader","thumbsScroller"]);e(["babel/babel-helpers","lib/jquery-amd","api-mod","ta/util/I18N","common/trackingStreams"],function(t,e,a,i,s){function r(t,r){function h(){var t=e(".heroPhoto",r).attr("data-mediaid");return o.children.filter(function(){return e(this).data("mediaid")===parseInt(t)}).first()}function n(t){t=e(t),e(".tinyThumb.current",r).removeClass("current"),t.addClass("current");var a=e(".heroNav.right",r),i=e(".heroNav.left",r);i.toggleClass("disabled",0===parseInt(t.attr("data-offset"))),t.next(".tinyThumb").length>0?a.removeClass("disabled"):a.addClass("disabled")}function l(){var t=e(".heroThumbnails",e(r)),a=t.width();e("img[data-lazyurl]",t).each(function(t,i){var s=e(i);s.position().left<=a&&s.attr("src",s.attr("data-lazyurl")).removeAttr("data-lazyurl")})}function d(){var t=e(".heroThumbnails .thumbNav.left",r),a=e(".heroThumbnails .thumbNav.right",r);t.length&&a.length&&(u?(t.toggleClass("disabled",!f.hasMore.loaded.right&&!f.hasMore.unloaded.right),a.toggleClass("disabled",!f.hasMore.loaded.left&&!f.hasMore.unloaded.left)):(t.toggleClass("disabled",!f.hasMore.loaded.left&&!f.hasMore.unloaded.left),a.toggleClass("disabled",!f.hasMore.loaded.right&&!f.hasMore.unloaded.right)))}var o={},f={},u=i.isRtl();r=e(r),this.init=function(){if(o={thumbs:e(".photos.inHeroList",r),thumbsParent:e(".heroThumbnails",r),children:e(".photos.inHeroList > div",r)},!o.thumbsParent.length||!o.children.length)return!1;o.lastThumb=o.children.last(),o.firstThumb=o.children.first(),f={firstOffset:parseInt(o.firstThumb.attr("data-offset")),lastOffset:parseInt(o.lastThumb.attr("data-offset")),maxOffset:parseInt(o.thumbsParent.attr("data-totalThumbs"))-parseInt(o.thumbsParent.attr("data-panoCount"))-1,navWidth:e(".thumbNav.left",r)[0].offsetWidth,oneThumbWidth:o.lastThumb[0].offsetWidth},f.visibleWidth=o.thumbsParent.width()-2*f.navWidth;var t=o.thumbsParent.offset().left+f.navWidth,i=t+o.thumbsParent[0].offsetWidth-f.navWidth,s=o.thumbs.offset().left,h=s+o.thumbs[0].offsetWidth;return f.curLeft=parseInt(o.thumbs.css("left"))||0,f.curRight=parseInt(o.thumbs.css("right"))||0,f.maxLeft=a.getPosition(o.lastThumb,o.thumbs).left+f.oneThumbWidth-f.visibleWidth,f.maxRight=o.thumbs.width()-f.visibleWidth,f.hasMore={unloaded:u?{right:f.firstOffset>0,left:f.lastOffset<f.maxOffset}:{right:f.lastOffset<f.maxOffset,left:f.firstOffset>0},loaded:{right:h>i,left:s<t},loadedNextPage:{right:h-f.visibleWidth>i,left:s+f.visibleWidth<t}},l(),d(),!0},this.loadMore=function(a,i){try{var r=parseInt(o.thumbsParent.attr("data-pageSize"));if(f.hasMore.unloaded[i]){var h=function(){"left"!==i||u?"right"===i&&u&&o.thumbs.css({left:"auto",right:window.getComputedStyle(o.thumbs.get(0)).right}):o.thumbs.css({right:"auto",left:window.getComputedStyle(o.thumbs.get(0)).left}),m.init(),a&&a()},n="left"===i?u:!u,l={albumViewMode:"heroThumbs",albumid:o.thumbsParent.attr("data-albumid"),aggregationId:o.thumbsParent.attr("data-aggregationId"),filter:o.thumbsParent.attr("data-filter")};n?l.offset=Math.min(f.lastOffset+1,f.maxOffset):(l.offset=Math.max(f.firstOffset-r,0),r>f.firstOffset&&(l.cnt=f.firstOffset));var d="?"+e.param(l),m=this,b=u?"right":"left";return t(d,h,{prepend:i===b}),"left"!==i||u?"right"===i&&u&&o.thumbs.css({right:"auto",left:f.visibleWidth-f.curRight-o.thumbs.width()-4}):o.thumbs.css({left:"auto",right:f.visibleWidth-f.curLeft-o.thumbs.width()-4}),!0}}catch(t){s.error(t,"ResponsivePhotoViewer hero thumbs loadMore failed")}return!1};var m=function(t){var e=h();if(e.length>0){var i=o.thumbsParent[0].getBoundingClientRect(),s=e[0].getBoundingClientRect(),r=i.left+f.navWidth,l=i.right-f.navWidth,d=l-r,m=s.right-s.left,b=s.right>l,c=s.left<r,v=!1,p=a.getPosition(e,o.thumbs).left;u&&(p=o.thumbs.width()-p-m),b?(f.hasMore.loadedNextPage.right||t||(v=this.loadMore(g.bind(this,"current",!0),u?"left":"right")),v||(u?o.thumbs.css("right",Math.min(-p+d-m,0)+"px"):o.thumbs.css("left",Math.max(-p,-f.maxLeft)+"px"))):c&&(f.hasMore.loadedNextPage.left||t||(v=this.loadMore(g.bind(this,"current",!0),u?"right":"left")),v||(u?o.thumbs.css("right",Math.max(-p,-f.maxRight)+"px"):o.thumbs.css("left",Math.min(-p+d-m,0)+"px"))),n(e)}}.bind(this),b=function(t,e){var a=!1;if(f.hasMore.loadedNextPage[t]||e||(a=this.loadMore(g.bind(this,t,!0),t)),!a&&f.hasMore.loaded[t]){var i=void 0,s=u?"right":"left";i="right"===t?u?Math.min(f.curRight+f.visibleWidth,0):Math.max(f.curLeft-f.visibleWidth,-f.maxLeft):u?Math.max(f.curRight-f.visibleWidth,-f.maxRight):Math.min(f.curLeft+f.visibleWidth,0),o.thumbs.css(s,i+"px")}}.bind(this);this.scroll=function(t,e){"left"===t||"right"===t?b(t,e):"current"===t&&m(e);var a=this;o.thumbs.off("transitionend").on("transitionend",a.init)};var g=function(t,e){this.init()&&this.scroll(t,e)}.bind(this)}return r})});
require(["ta/p13n/placements"],function(t){var a=t.define.bind(t,"pv_resp_content_hero_zepto","preloader",["handlers","preloader","thumbsScroller"]);a(["babel/babel-helpers","lib/jquery-amd"],function(t,a){function e(){function t(){i=null,a()}function a(){if(!i){var a=r.shift();a&&(i=new Image,e[a]=i,i.onload=t,i.onerror=t,i.src=a,i.complete&&t())}}var e={},r=[],i=null;this.clear=function(){r=[],e={}},this.clearQueue=function(){r=[]},this.getImageByUrl=function(t){return e[t]},this.addToQueue=function(t){t&&!e[t]&&r.indexOf(t)<0&&(r.push(t),setTimeout(a,1))}}function r(t,r,o){var d=this,l=new e;t=a(t),this.clear=function(t){t?l.clear():l.clearQueue()},this.preloadPhoto=function(e,i){e=a(e);var n=a(".heroPhoto",t),u=a(".mainImg img",n),h=e.attr("data-heroheight"),p=e.attr("data-herowidth"),c=a(l.getImageByUrl(i)||"<img/>"),s=function(){r(),o()===i&&u.parent().length&&u[0]!==c[0]&&(u.replaceWith(c),d.beginPreload(),c.off("load"))};c.on("load",s),h&&c.prop("height",parseInt(h)),p&&c.prop("width",parseInt(p)),c.prop("src")||c.prop("src",i),c.prop("complete")&&s.call(c)},this.preloadVideo=function(e){e=a(e);var r=a(".heroPhoto",t),i=e.attr("data-bigurl"),n=e.attr("data-icaption"),o=e.attr("data-srcurl"),d=e.attr("data-videoformats");a(".mainImg img",r).remove();var l=a(".mainImg",r);return!!l.length&&(l.append(a("<div></div>").addClass("videoPlayer").attr({"data-videoFormats":d,"data-src":o,"data-preview":i,"data-icaption":n}).append(a("<div></div>").addClass("jwPlayer").prop("id","JWPLAYER"))),!0)},this.beginPreload=function(){var e=a(".tinyThumb",t),r=e.filter(".current"),o=r.index();if(r.length){var d=Math.max(o-i,0),u=Math.min(o+1+n,e.length),h=void 0;for(h=o+1;h<u;h++)l.addToQueue(a(e[h]).attr("data-bigUrl"));for(h=o-1;h>=d;h--)l.addToQueue(a(e[h]).attr("data-bigUrl"))}}}var i=1,n=3;return r})});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"pv_resp_content_hero_zepto","handlers",["handlers","preloader","thumbsScroller"]);e(["babel/babel-helpers","placement","lib/jquery-amd","photoviewer/models/eventTypes","photoviewer/tracking","photoviewer/radioHelper","utils/ajax","ta/prwidgets","thumbsScroller","utils/urlutils","ta/util/I18N","preloader","common/trackingStreams","utils/responsive","ta/common/Swipe","common/Radio"],function(t,e,a,r,o,n,i,d,l,u,s,c,m,p,h,f){"use strict";function g(){tt.getRadio().reply("currentHeroId",v),tt.getRadio().on("update-"+e.name+"-hero-thumbnails",A),$=a("#"+e.id),dt=new l(S,$),dt.init(),tt.getRadio().off(r.ADVANCE_HERO_CLICKED).on(r.ADVANCE_HERO_CLICKED,function(t){P(1===t)}),tt.getRadio().off("autoPlayNext",z).on("autoPlayNext",z),tt.getRadio().off("cancelAutoPlay",R).on("cancelAutoPlay",R),tt.getRadio().off(r.RHR_CLICKED,C).on(r.RHR_CLICKED,C),tt.getRadio().reply("nextVideoTitle",Y),et=new c($,T,function(){return at}),et.beginPreload();var t=a(".tinyThumb.current",$).attr("data-panorama");t&&k(t);var n=a(".heroWrapper",$);n.off("mouseover").on("mouseover",function(){tt.getRadio().trigger(r.HERO_FOCUS_CHANGED,{hasFocus:!0})}),n.off("mouseout").on("mouseout",function(){tt.getRadio().trigger(r.HERO_FOCUS_CHANGED,{hasFocus:!1})});var i=a(".photoviewerContainer.hero .pvContent");i.length&&(nt&&nt.cancel(),nt=h.addSwipeListener(i.get(0),function(t){if(!n.hasClass("panorama")){if(a(t.event.target).closest(".heroThumbnails").length)return;P("left"===t.direction),o.recordPhotoSwipe()}})),a(".mainImg",n).off("click",w).on("click",w),a(".inHeroList",$).length&&(it&&it.cancel(),it=h.addSwipeListener(a(".inHeroList",$).get(0),function(t){t.event.stopPropagation(),D("left"===t.direction?"right":"left")})),setTimeout(function(){var t=a(".tinyThumb.current",$);G(t),Q(t)},0),B(),M(b())}function v(){if($.length>0){var t=a(".tinyThumb.current",$);return t.attr("data-mediaid")}return null}function b(){return a(".heroPhoto",$).hasClass("playableVideo")}function y(){ot=setTimeout(function(){a(".heroPhoto .ui_spinner",$).show()},500)}function T(){clearTimeout(ot),a(".heroPhoto .ui_spinner",$).hide()}function w(){if(!a(".heroWrapper",$).hasClass("panorama")){if(p.desktop()){var t=a(".pano.tinyThumb.current",$);if(t.length||b())return;P(!Z)}C(),tt.getRadio().trigger(r.HERO_CLICKED)}}function C(){a(".heroThumbnails, .actions",$).toggleClass("anchor")}function P(t){var e=void 0,r=void 0,o=a(".tinyThumb.current",$);if(t?(r=o.next(".tinyThumb"),!r.length&&parseInt(o.attr("data-offset"))>0&&(e=Z?"left":"right")):(r=o.prev(".tinyThumb"),!r.length&&parseInt(o.attr("data-offset"))>0&&(e=Z?"right":"left")),e)return void dt.loadMore(P.bind(self,t),e);var n=_(r)?H(r):V(r);n&&S(n)}function R(){P(!1)}function I(t){var e=_(t);return e?H(t):V(t)}function _(t){var e=a(t);return e.hasClass("pano")}function E(){var t=a(".heroThumbnails",$);return{albumViewMode:"hero",aggregationId:t.attr("data-aggregationId"),albumid:t.attr("data-albumid"),filter:t.attr("data-filter")}}function H(t){if(!t)return{};var e=a(t),r=e.attr("data-mediaid"),o=e.attr("data-panorama"),n=E();return n.panoId=r,n.panoPath=o,n}function V(t){if(!t)return{};var e=a(t),r=e.attr("data-mediaid"),o=E();return o.ff=r,o}function k(t){T(),require(["babel/babel-helpers","trjs!krpano"],function(e){a("#PANO_HOLDER",$).empty().removeProp("onclick");var r={html5:"only",wmode:"transparent",xml:"/PanoramaXml?pano="+encodeURIComponent(t),target:"PANO_HOLDER",id:"albumViewerPano"};a(".heroWrapper",$).addClass("panorama"),a($).closest(".pvMain").addClass("fullHeight"),window.embedpano&&window.embedpano(r)})}function A(t,e){var r=a(t),o=r.attr("data-updateComponent"),n=$.find('[data-updateComponent="'+o+'"]'),i=a(".photos.inHeroList",n),d=a(".tinyThumb",r);e&&e.options&&e.options.prepend?(i.prepend(d),D("current",!0)):i.append(d),rt=!1,r.length>0&&e&&e.callback&&"function"==typeof e.callback&&e.callback()}function L(t,e,r){a(e).hasClass("disabled")||(Z&&("left"===r?r="right":"right"===r&&(r="left")),D(r))}function D(t,e){try{dt.scroll(t,e)}catch(e){m.error(e,"albumViewer:scrollThumbs failed",null,{direction:t})}}function O(t,e){if(S(I(e)),t&&"click"===t.type){var r=a(e),n=r.data("mediaid"),i=r.data("albumid"),d=r.data("mediaFilter"),l=r.data("mediaType");o.recordHeroThumbClick(n,i,d,l),tt.getRadio().trigger("check-ad-refresh")}}function S(t,e,a){if(!rt&&(T(),et?et.clear(!1):m.error(null,"m_heroPreloader is null in responsive photo viewer:update()"),"string"==typeof t&&(t=u.getUrlQueryArgs(t)),t&&t.albumViewMode))if("hero"===t.albumViewMode){var r=t.panoId||t.ff;U(t,function(){return N(r,t.panoPath)}),N(r,t.panoPath)}else"heroThumbs"===t.albumViewMode&&x(t,e,a)}function x(t,a,o){rt=!0,tt.getRadio().trigger(r.HERO_THUMBS_REQUESTED,t,"update-"+e.name+"-hero-thumbnails",{callback:a,options:o})}function N(t,e){y();var r=e&&e.length>0,o=a(".mainImg .videoPlayer",$);o.length&&o.remove(),a(".mainImg img",$).length||a("<img>").appendTo(a(".mainImg",$)),a(".heroWrapper",$).removeClass("panorama"),a($).closest(".pvMain").removeClass("fullHeight"),window.removepano&&window.removepano("albumViewerPano");var n=a(".heroPhoto",$);n.attr("data-mediaid",t),F(!1);var i=a(".tinyThumb.current",$),d=i.attr("data-bigurl"),l=i.attr("data-dmoGeo");l?n.attr("data-dmogeo",l):n.removeAttr("data-dmogeo"),at=d;var u=!i.attr("data-videoformats");if(M(!(r||u)),r)k(e);else if(u)et.preloadPhoto(i,d);else{T();var s=i.attr("data-srcurl");K(d,s)}G(i),Q(i)}function U(t,e){var r=t.aggregationId,o=t.albumid,n=t.ff,i=t.filter,d=t.panoId,l={aggregationId:r,albumid:o,filter:i};n&&(l.ff=n),d&&(l.panoId=d);var u="#photos;"+a.param(l);f("responsive-photoviewer").trigger("addHistory",{data:l},document.title,u,e)}function M(t){a(".heroPhoto",$).toggleClass("playableVideo",t);var e=a("#heroVideo",$).get(0);t||null==e||e.paused||e.pause()}function F(t){t&&q();var e=a(".heroPhoto",$);e.length&&D("current",t)}function K(t,e){a(".videoContainer",$).show();var r=a("#heroVideo",$);r.length&&(r.attr("poster",t),r.attr("src",e))}function q(){if($.parent("body").length){var t=a(".heroPhoto .mainImg img",$);if(t.length){var e=a("img",t);e.length&&j(e,t)}}}function W(t,e,r){a(r).find(".ui_spinner").remove()}function j(){setTimeout(function(){T()},1)}function G(t){var e=t.attr("data-captionText")||t.attr("data-icaption")||"";e=e.replace(/[\r\n]/g,"");var o=a(".heroThumbnails",$),n={albumid:parseInt(o.attr("data-albumid")),isPano:t.hasClass("pano"),avatarUrl:t.attr("data-avatarurl"),captionText:e,captionProvider:t.attr("data-captionprovider"),helpfulvotes:parseInt(t.attr("data-helpfulVotes")),mediaFilter:parseInt(t.attr("data-image-media-filter")),mediaType:t.attr("data-media-type")||"",mediaid:t.attr("data-mediaid"),rating:parseInt(t.attr("data-rating")),reviewUrl:t.attr("data-reviewurl")};tt.getRadio().trigger(r.HERO_UPDATED,n)}function Q(t){var e=t.attr("data-mediaid");if(e){var r=a(".heroThumbnails",$),n=parseInt(r.attr("data-albumid")),i=parseInt(t.attr("data-image-media-filter")),d=t.attr("data-media-type")||"";o.trackPhotoViewerImpression("detail_view",e+"|"+n+"|"+i+"|"+d)}}function z(){var t=a("#heroVideo",$).get(0);null!=t&&t.play()}function B(){var t=a("#heroVideo",$).get(0);null!=t&&t.addEventListener("ended",X)}function X(){tt.getRadio().request("isAutoPlayEnabled")&&J()&&(tt.getRadio().trigger("showAutoPlayOverlay"),P(!0))}function J(){var t=a(".tinyThumb.current",$),e=t.next(".tinyThumb");return!!e.length}function Y(){var t=a(".tinyThumb.current",$),e=t.next(".tinyThumb"),r=e.attr("data-captionText")||e.attr("data-icaption")||"";return r=r.replace(/[\r\n]/g,"")}var Z=s.isRtl(),$=void 0,tt=n("#"+e.id,g),et=void 0,at=void 0,rt=!1,ot=void 0,nt=void 0,it=void 0,dt=void 0;return{onThumbSelected:O,moveThumbs:L,heroClicked:w,afterThumbnailLoad:W,afterImgLoad:j,playVideo:z}})});
define("responsive/text-resizer",["babel/babel-helpers","utils/to-array","utils/classnameUtils","utils/throttle","utils/ResponsiveEvents","vanillajs"],function(t,e,i,r,n){function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return!t===document&&(t=document.body),e(t.querySelectorAll("."+p)).filter(function(t){return!!t[v]})}function u(e){e.style.fontSize=null;var i=(getComputedStyle(e)||{}).fontSize;if(!i)return{};var r=i.match(b),n=t.slicedToArray(r,3),l=(n[0],n[1]),u=n[2],o=parseFloat(l);return o&&o>.001&&z[u]?{originalSize:o,units:u,multiplier:1,minMult:Math.max(y,z[u]/o)}:{}}function o(t){if(t[v])return t[v];var e=u(t);return e.originalSize?(t[v]=Object.assign(e,{group:t.getAttribute(h),multApplied:1}),t[v]):null}function a(t){for(var e=0;e<g&&t.length;e++)t.forEach(c),t=t.filter(function(t){if(!(t.clientWidth>0)||t.scrollWidth<=t.clientWidth)return!1;var e=t[v],i=(parseFloat(t.style.paddingLeft)||0)+(parseFloat(t.style.paddingRight)||0),r=t.scrollWidth-i;if(r<1)return!1;var n=(t.clientWidth-i-2)/r;return n=Math.min(n,.95)*e.multiplier,n<=e.minMult?(e.multiplier=e.minMult,!1):(e.multiplier=n,!0)});t.length&&(t.forEach(c),t.forEach(function(t){t.scrollWidth>t.clientWidth&&(t[v].multiplier=t[v].minMult)}))}function c(t){var e=t[v];if(!(e&&e.multApplied!=e.multiplier&&e.multiplier>0))return!1;var i=Math.max(z[e.units],e.originalSize*e.multiplier);return t.style.fontSize=""+i+e.units,e.multApplied=e.multiplier,!0}function s(t){if(t&&t.length){var e={};t.forEach(function(t){var i=t[v];i.group?e[i.group]=1:c(t)}),Object.keys(e).length&&(t=l(document.body).filter(function(t){var i=t[v],r=i.group;return!!(i&&r&&e[r]&&i.multiplier>0)&&(e[r]>i.multiplier&&(e[r]=i.multiplier),!0)}),t.forEach(function(t){var i=t[v];i.multiplier=e[i.group],c(t)}))}}function f(t){if(t&&(E||(E=!0,f(document.body),t!==document&&t!==document.body))){var c=e(t.querySelectorAll("."+m));if(c.length){c.forEach(function(t){i.removeClass(t,m),i.addClass(t,p)});var h=[];c=c.filter(function(t){var e=o(t);return!!e||(h.push(t),!1)}),a(c),h.forEach(function(t){i.removeClass(t,p),i.addClass(t,m)}),s(c),S||(window.addEventListener("resize",r(function(){d(document.body)},50)),n.on("breakpoint",function(){l(document.body).forEach(function(t){return Object.assign(t[v],u(t))})}),S=!0)}}}function d(t){var e=l(t);a(e),s(e)}var m="autoResize",p="__resizeWatch",h="data-sizegroup",v="__resizerContext",g=4,y=.5,b=/^(\d+(?:\.\d+)?)(.*)$/,z={px:8.5,em:.5,pt:6,"%":50},E=!1,S=!1;return{init:f,refresh:d}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"pv_resp_navbar","handlers",["handlers"]);n(["babel/babel-helpers","placement","lib/jquery-amd","photoviewer/models/eventTypes","photoviewer/loader","photoviewer/tracking","utils/responsive","utils/ResponsiveEvents","common/Radio","photoviewer/radioHelper","ta/prwidgets","responsive/text-resizer","ta/Core/TA.Event","ta/common/Repoll"],function(e,n,o,l,t,r,i,a,s,d,v,u,p,m){"use strict";function c(){_=o("#"+n.id),u.init(_.get(0)),w(),s("responsive-photoviewer").off("overlay-shown",g).on("overlay-shown",g)}function f(){i.tablet()||require(["babel/babel-helpers","overlays/Overlay","overlays/position/fullside","overlays/styles/windowshade","overlays/options/keepInDom","overlays/styles/modal","overlays/options/closeOnWindowshadeClick","overlays/options/slideInOut"],function(e,n,o,l,t,i,a,s){if(!O){var d=_.find(".albums_flyout");O=new n(_.get(0),o.right(),new i(null,null,"second-layer",null,null,d.get(0)),l("dark second-layer"),s("from_right"),a),O.on("hide",function(){if(!N){var e=b();if(e){var n="hero"===e?"detail_view_album_click":"grid_view_album_click";r.recordAlbumDropdownAbandonment(n)}}N=!1})}O.show()})}function b(){var e=o(".small_picker");return e.length?e.attr("data-viewType"):null}function h(e,n,o){O&&(O.destroy(),O=null,N=!0),A.getOrInitRadio(t.getOverlayId()).trigger(l.ALBUM_CHANGE,{albumid:o}),r.recordFilterItemClick(o,n,"album")}function y(e){if(_&&e){var n=_.find(".meta_wrapper");n&&n.remove(),_.append(e),v.initWidgets(_[0]),w()}}function w(){_&&_.find(".poll-in-progress").length&&g()}function g(){k||(k=m({placement:n.name}),k.setPageUrl("/MetaPlacementAjax"),k.setAjaxParamsNoPoll({placementName:n.name,detail:n.location_id,servlet:n.servletName,metaReferer:n.servletName})),k&&k.setNotDone()}var _=void 0,k=void 0,A=d("#"+n.id,c),O=null,N=!1;return a.onOver("tablet",function(){O&&O.hide()}),p.on("update-meta-"+n.name,y),{showAlbumsOverlay:f,albumClicked:h}})});
require(["ta/p13n/placements"],function(e){var l=e.define.bind(e,"pv_resp_navbar_zepto","handlers",["handlers"]);l(["babel/babel-helpers","placement","lib/jquery-amd","photoviewer/models/eventTypes","photoviewer/tracking","utils/responsive","utils/ResponsiveEvents","photoviewer/radioHelper","ta/prwidgets","responsive/text-resizer"],function(e,l,i,n,o,r,t,s,a,d){"use strict";function u(){b=i("#"+l.id),d.init(b.get(0))}function v(){r.tablet()||require(["babel/babel-helpers","overlays/Overlay","overlays/position/fullside","overlays/styles/windowshade","overlays/options/keepInDom","overlays/styles/modal","overlays/options/closeOnWindowshadeClick","overlays/options/slideInOut"],function(e,l,i,n,o,r,t,s){if(!y){var a=b.find(".albums_flyout");y=new l(b.get(0),i.right(),new r(null,null,"second-layer",null,null,a.get(0)),n("dark second-layer"),s("from_right"),t)}y.show()})}function p(e,l,i){y&&(y.destroy(),y=null),c.getRadio().trigger(n.ALBUM_CHANGE,{albumid:i}),o.recordFilterItemClick(i,l,"album")}var b=void 0,c=s("#"+l.id,u),y=null;return t.onOver("tablet",function(){y&&y.hide()}),{showAlbumsOverlay:v,albumClicked:p}})});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"common_ad_resp_breakpoint","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/Core/TA.FireEvent","utils/throttle"],function(e,n,i,t){function a(){var t=n(".ad",e.element),a="none"!==t.css("display");if(r!==a){var d=t.find(".gptAd");d.toggleClass("inactive",!a),void 0!==r&&i.fireEvent("adSizeChanged"),r=a}}function d(){window.addEventListener("resize",t(a,100)),a()}var r;d()})});
define("cpm/DblClickAPI",["lib/jquery-amd","ta/Core/TA.Store","ta/util/Error","utils/responsive"],function(e,t,a,o){"use strict";function r(){var t=e(window).width(),a=e(window).height(),o=100,r=Math.floor(t/o)*o,i=Math.floor(a/o)*o;return r=r>2e3?9999:r,i=i>1500?9999:i,"w"+r+"_h"+i}function i(e){try{var i;if(i=l?{}:t.retrieve("ads.pageTargeting")||{},e||(i.win_size=r()),i.resp&&"yes"===i.resp){var n="";n=o.widescreen()?"dt_w":o.desktop()?"dt_n":o.tablet()?"tablet":"mobile",i.layout=n}for(var g in i)googletag.pubads().setTargeting(g,i[g])}catch(e){a.record(e,"DblClickAPI init: unable to add page targeting")}}function n(){var e=t.retrieve("ads.ppid");e&&googletag.pubads().setPublisherProvidedId(e)}function g(){var e=window.navigator.userAgent,t=!e||e.indexOf("Edge")===-1;return{allowOverlayExpansion:!0,allowPushExpansion:!0,sandbox:t}}var s={},d=!1,l=!1;return s.init=function(e){if(window.googletag=window.googletag||{cmd:[]},l=!!t.retrieve("ads.earlyAPILoad"),!l&&!googletag.apiReady){var a=document.createElement("script");a.async=!0,a.type="text/javascript",a.src="//www.googletagservices.com/tag/js/gpt.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o)}d||(d=!0,googletag.cmd.push(function(){n(),i(e),l||googletag.pubads().setSafeFrameConfig(g()),t.has("jwplayerHelper.adUrl")&&googletag.pubads().enableVideoAds(),googletag.enableServices()}))},s});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"pv_resp_right_hand_rail","handlers",["handlers"]);o(["babel/babel-helpers","placement","lib/jquery-amd","cpm/DblClickAPI","ta/Core/TA.FireEvent","common/Radio","photoviewer/radioHelper","photoviewer/models/eventTypes","ta/Core/TA.Store","utils/throttle"],function(e,o,t,a,r,i,n,d,s,f){function c(){a.init(),googletag.cmd.push(function(){var e={selector:"#gpt-ad-300x250-locationphotoalbum",isNewContext:!0,servlet:"locationphotoalbum"};r.fireEvent("ads.injectAjaxAds",e)})}function l(){++u,u%v===0&&c()}function h(){var e=t(".pv_rhr").data(),o=e.gptadstubsjson,a=e.gptpagetargetingjson;s.store("ads.locationphotoalbum.adStubs",o.adTypes),s.store("ads.locationphotoalbum.pageTargeting",a)}function p(){m.getRadio().trigger(d.RHR_CLICKED)}function g(){if(!R){h(),c();var e=t("#"+o.id);t(".pv_rhr",e).off("click",p).on("click",p),m.getRadio().off("check-ad-refresh"),m.getRadio().off("force-ad-refresh"),m.getRadio().off("re-initialize-ads"),i("responsive-photoviewer").off("overlay-shown",c),m.getRadio().on("check-ad-refresh",l),o.params.throttleAdRefresh?m.getRadio().on("force-ad-refresh",f(c,5e3)):m.getRadio().on("force-ad-refresh",c),m.getRadio().on("re-initialize-ads",function(){R=!1}),i("responsive-photoviewer").on("overlay-shown",c),r.off("mediaViewerCheckAdRefresh"),r.on("mediaViewerCheckAdRefresh",c),R=!0}}var v=6,u=0,m=n("#"+o.id,g),R=!1})});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"pv_resp_right_hand_rail_zepto","handlers",["handlers"]);o(["babel/babel-helpers","placement","lib/jquery-amd","cpm/DblClickAPI","ta/Core/TA.Event","common/Radio","photoviewer/radioHelper","photoviewer/models/eventTypes","ta/Core/TA.Store"],function(e,o,a,t,i,r,n,d,s){function c(){t.init(),googletag.cmd.push(function(){var e={selector:"#gpt-ad-300x250-locationphotoalbum",isNewContext:!0,servlet:"locationphotoalbum"};i.fireEvent("ads.injectAjaxAds",e)})}function f(){++v,v%g===0&&c()}function l(){var e=a(".pv_rhr");s.store("ads.locationphotoalbum.adStubs",e.data("gptadstubsjson").adTypes),s.store("ads.locationphotoalbum.pageTargeting",e.data("gptpagetargetingjson"))}function p(){u.getRadio().trigger(d.RHR_CLICKED)}function h(){if(!m){l(),c();var e=a("#"+o.id);a(".pv_rhr",e).off("click",p).on("click",p),u.getRadio().off("check-ad-refresh"),u.getRadio().off("force-ad-refresh"),u.getRadio().off("re-initialize-ads"),r("responsive-photoviewer").off("overlay-shown",c),u.getRadio().on("check-ad-refresh",f),u.getRadio().on("force-ad-refresh",c),u.getRadio().on("re-initialize-ads",function(){m=!1}),r("responsive-photoviewer").on("overlay-shown",c),i.off("mediaViewerCheckAdRefresh"),i.on("mediaViewerCheckAdRefresh",c),m=!0}}var g=6,v=0,u=n("#"+o.id,h),m=!1})});
define("utils/safeCall",["babel/babel-helpers","vanillajs"],function(n,e){function l(n){if("string"==typeof n){var e=n.split(".");if(e&&e.length>0){for(var l=e.reduce(function(n,e){var l=n?n[e]:null;return l instanceof Function?l.bind(n):l},window),i=arguments.length,r=Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return l&&l.apply(void 0,r)}}}return{call:l}});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"responsive_photoviewer","handlers",["handlers"]);o(["babel/babel-helpers","placement","lib/jquery-amd","photoviewer/models/eventTypes","photoviewer/tracking","common/Radio","photoviewer/radioHelper","photoviewer/loader","utils/ajax","utils/safeCall"],function(e,o,n,i,t,r,a,d,s,c){"use strict";function f(e){n("#"+o.id).find(".photoviewerLoading").removeClass("hidden"),C.getRadio().trigger("re-initialize-ads"),r("responsive-photoviewer").off("contents-unchanged",v).on("contents-unchanged",v),d.load(n.extend({},o.params,e))}function p(e,i,t){var r=d.buildUrl(n.extend({},o.params,e));s(r,{success:function(e){var o=n(e).find('[data-updateComponent="'+i+'"]');C.getRadio().trigger(i,o.get(0),t)},error:function(){}})}function l(){_||(c.call("performance.mark","responsive-photo-viewer-first-load"),h(),_=!0),C.getRadio().off(m,f).on(m,f),C.getRadio().off(R,p).on(R,p),t.attachResizeTracker()}function v(){n("#"+o.id).find(".photoviewerLoading").addClass("hidden")}function u(){r("responsive-photoviewer").trigger("close")}function h(){w(),r("responsive-photoviewer").off("overlay-shown",w).on("overlay-shown",w),r("responsive-photoviewer").off("overlay-hide",g).on("overlay-hide",g)}function g(){n(document).off("keyup",E)}function w(){n(document).on("keyup",E)}function E(e){switch(e=e||window.event,e.keyCode){case 37:case 39:C.getRadio().emit(i.NAV_KEY_PRESSED,e)}}var m=[i.ALBUM_CHANGE,i.TYPE_CHANGE,i.CATEGORY_CHANGE,i.HERO_PHOTO_CHANGE,i.BACK_TO_GALLERY].join(" "),R=[i.GRID_SCROLLED,i.HERO_THUMBS_REQUESTED].join(" "),_=!1,C=a("#"+o.id,l);return{close:u}})});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"responsive_photoviewer_zepto","handlers",["handlers"]);o(["babel/babel-helpers","placement","lib/jquery-amd","photoviewer/models/eventTypes","photoviewer/tracking","common/Radio","photoviewer/radioHelper","photoviewer/loader","utils/ajax","utils/safeCall"],function(e,o,i,r,t,n,a,s,l,d){"use strict";function p(e){g.getRadio().trigger("re-initialize-ads"),s.load(i.extend({},o.params,e))}function c(e,r,t){l({url:s.buildUrl(i.extend({},o.params,e)),success:function(e){var o=i(e).find('[data-updateComponent="'+r+'"]');g.getRadio().trigger(r,o.get(0),t)},error:function(){}})}function u(){R||(d.call("performance.mark","responsive-photo-viewer-first-load"),R=!0),g.getRadio().off(v,p).on(v,p),g.getRadio().off(E,c).on(E,c),t.attachResizeTracker()}function f(){n("responsive-photoviewer").trigger("close")}var v=[r.ALBUM_CHANGE,r.TYPE_CHANGE,r.CATEGORY_CHANGE,r.HERO_PHOTO_CHANGE,r.BACK_TO_GALLERY].join(" "),E=[r.GRID_SCROLLED,r.HERO_THUMBS_REQUESTED].join(" "),R=!1,g=a("#"+o.id,u);return{close:f}})});
