(window.$WP=window.$WP||[]).push({id:"@ta/social.blocks",d:["vendor-react-libs","vendor-apollo-libs","vendor-babel","@ta/overlays.modal","@ta/social.login-gate","@ta/overlays.managers","ta-platform","@ta/common.text","@ta/overlays.toast","@ta/overlays.headers","ta-common"],e:["./packages/social/blocks/blocks.jsx"],x:{"./packages/social/blocks/blocks.jsx":["BlockProfile","UnblockProfile","BlockUserModal","OpenBlockUserModal","UnblockUserModal","OpenUnblockUserModal","NoPermissionToast","MemberInteractionProvider","MemberInteractionConsumer"]},m:{"./packages/social/blocks/blocks.jsx":function(e,n,t){"use strict";t.r(n);var i=t("react"),a=t("react-apollo"),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"BlockStatusQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"memberProfiles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userIds"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}]}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"userId"},name:{kind:"Name",value:"id"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"static"},arguments:[]}]},{kind:"Field",name:{kind:"Name",value:"followeeCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"followerCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isFollowing"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blockStatus"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isBlocking"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isBlockingYou"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:232}};o.loc.source={body:"88493c6ffd44"};var l=o,r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"BlockProfile"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userIdToBlock"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"blockSingleUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userIdToBlock"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:110}};r.loc.source={body:"9e5808225a5f"};var c=r,s=function e(n){var t=n.userIdToBlock,o=n.children;return i.createElement(a.Mutation,{mutation:c,refetchQueries:[{query:l,variables:{userId:t}}],awaitRefetchQueries:!0},function(e,n){return o(function(){return e({variables:{userIdToBlock:t}})},n)})},u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnblockProfile"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userIdToUnblock"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unblockUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userIds"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"userIdToUnblock"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:116}};u.loc.source={body:"b07a3f8c4198"};var m=u,d=function e(n){var t=n.userIdToUnblock,o=n.children;return i.createElement(a.Mutation,{mutation:m,refetchQueries:[{query:l,variables:{userId:t}}],awaitRefetchQueries:!0},function(e,n){return o(function(){return e({variables:{userIdToUnblock:t}})},n)})},b=t("@babel/runtime/helpers/esm/classCallCheck"),k=t.n(b),p=t("@babel/runtime/helpers/esm/createClass"),f=t.n(p),v=t("@babel/runtime/helpers/esm/possibleConstructorReturn"),_=t.n(v),h=t("@babel/runtime/helpers/esm/getPrototypeOf"),y=t.n(h),N=t("@babel/runtime/helpers/esm/inherits"),E=t.n(N),g=t("@babel/runtime/helpers/esm/assertThisInitialized"),C=t.n(g),S=t("@babel/runtime/helpers/esm/defineProperty"),U=t.n(S),I=t("@ta/overlays.modal"),O=t("@ta/social.login-gate"),B=t("@ta/overlays.managers"),w=t("@ta/common.i18n"),M=t("@ta/common.text"),T=t("@ta/overlays.toast"),P=t("@ta/overlays.headers"),j=t("react-redux"),D=t("@ta/common.classnames"),V=t.n(D),z=t("@ta/styleguide.loading"),R=t("@ta/styleguide.button"),x=t.n(R),F=function(e){function n(e){var t;return k()(this,n),t=_()(this,y()(n).call(this,e)),U()(C()(C()(t)),"onSubmit",function(){"function"==typeof t.props.onSubmit&&t.props.onSubmit()}),U()(C()(C()(t)),"onCancel",function(){"function"==typeof t.props.onCancel&&t.props.onCancel()}),U()(C()(C()(t)),"updateBtnRect",function(){var e=t.submitBtnRef.current,n=t.submitBtnRect.height;e&&(t.submitBtnRect={width:e.offsetWidth,height:n})}),U()(C()(C()(t)),"submitBtnRef",i.createRef()),U()(C()(C()(t)),"submitBtnRect",void 0),t.submitBtnRect=e.isMobile?{width:180,height:36}:{width:81,height:36},t}return E()(n,e),f()(n,[{key:"componentDidMount",value:function e(){this.updateBtnRect()}},{key:"componentDidUpdate",value:function e(n){n.isSubmitting&&!this.props.isSubmitting&&this.updateBtnRect()}},{key:"render",value:function e(){var n,t=this.props,a=t.isSubmitting,o=t.descriptionContent,l=t.submitContent,r=t.isMobile,c=t.isIE11,s=this.submitBtnRect,u=s.width,m=s.height;return i.createElement("div",{className:V()("social-blocks-ConfirmationView__container--1OqSN",(n={},U()(n,"social-blocks-ConfirmationView__submitting--lmVS7",a),U()(n,"social-blocks-ConfirmationView__IE11--2gaEe",c),n))},o,i.createElement("div",{className:"social-blocks-ConfirmationView__submit--kDmRH"},i.createElement("span",{className:V()("social-blocks-ConfirmationView__button_flex_wrap--3wCsr","social-blocks-ConfirmationView__button_right_gap--3ONmm")},i.createElement(x.a,{type:"secondary",size:r?"fullwidth":"default",onClick:this.onCancel},Object(w.localize)("social_block_modal_cancel"))),a?i.createElement("div",{style:{width:u,height:m},className:V()("social-blocks-ConfirmationView__loader--SzHUP","social-blocks-ConfirmationView__button_left_gap--3fNPX")},i.createElement(z.LoadingBubbles,{color:"dark"})):i.createElement("span",{className:V()("social-blocks-ConfirmationView__button_flex_wrap--3wCsr","social-blocks-ConfirmationView__button_left_gap--3fNPX")},i.createElement("span",{ref:this.submitBtnRef},i.createElement(x.a,{type:"primary",size:r?"fullwidth":"default",onClick:this.onSubmit},l)))))}}]),n}(i.Component);U()(F,"defaultProps",{submitContent:"Submit",onCancel:void 0,onSubmit:void 0,isSubmitting:!1,isError:!1});var A=Object(j.connect)(function(e){return{isMobile:"DESKTOP"!==e.meta.device.viewportCategory,isIE11:"IE"===e.meta.device.browser.family&&11===e.meta.device.browser.majorVersion}})(F),L=function e(){return"".concat(Object(w.localize)("mobile_help_center_url"),"/articles/200613547")},K=function e(){return i.createElement(i.Fragment,null,Object(w.localize)("social_block_modal_more_v2"),Object(w.unescaped)(Object(w.localize)("social_block_modal_more_hyperlink",{href:L(),className:"social-blocks-ImportantBlockUserInfo__privacy--1IWLH",target:"_blank"})))},H=function e(n){var t=n.children;return i.Children.map(t,function(e){return i.createElement("li",null,e)})},Q=function e(n){var t=n.displayName;return i.createElement(i.Fragment,null,i.createElement("div",{className:"social-blocks-BlockUserDescriptionContent__notice--23fco",key:"notice"},i.createElement("span",{className:"social-blocks-BlockUserDescriptionContent__notice_text--QXMl-"},Object(w.localize)("social_block_modal_notice",{displayName:t}))),i.createElement("div",{className:"social-blocks-BlockUserDescriptionContent__list--CHOTX",key:"list"},i.createElement(H,null,Object(w.localize)("social_block_modal_ex_follow_v2"),Object(w.localize)("social_block_modal_ex_dm"),Object(w.localize)("social_block_modal_ex_repost_v2"))),i.createElement("div",{className:"social-blocks-BlockUserDescriptionContent__additional--MenZ7",key:"additional_info"},i.createElement(K,null)))},W={toast:"social-blocks-BlockUserModal__toast--2EGdI"},q=function(e){function n(){var e,t;k()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=_()(this,(e=y()(n)).call.apply(e,[this].concat(a))),U()(C()(C()(t)),"onSubmit",function(){var e=t.props,n=e.blockProfile,i=e.closeModal,a=e.onSubmit,o=e.launchToast,l=e.displayName;return n().then(function(){i(),o({node:Object(w.unescaped)(Object(w.localize)("social_block_toast",{username:Object(M.EscapeHtml)(l),className:W.toast}))}),"function"==typeof a&&a()})}),t}return E()(n,e),f()(n,[{key:"render",value:function e(){var n=this.props,t=n.displayName,a=n.isSubmitting,o=n.closeModal;return i.createElement(A,{descriptionContent:i.createElement(Q,{displayName:t}),onSubmit:this.onSubmit,submitContent:Object(w.localize)("social_block_btn"),onCancel:o,isSubmitting:a})}}]),n}(i.Component),X=function e(n,t){return"".concat(n,":BLOCK_USER:").concat(t)},Z=function e(n){var t=n.userId,a=n.namespace,o=n.children;return i.createElement(O.SocialOpener,{name:X(a,t)},o)};Z.defaultProps={namespace:""};var $=function e(n){var t=n.userIdToBlock,a=n.displayName,o=n.namespace,l=n.onClose,r=n.onSubmit;return i.createElement(T.Toaster,null,function(e){return i.createElement(B.Closer,null,function(n){return i.createElement(I.Modal,{name:X(o,t),header:i.createElement(P.TitleBar,{displayType:"CENTERED_WHITE"},Object(w.localize)("social_block_modal_title",{displayName:a})),onClose:l},i.createElement(s,{userIdToBlock:t},function(t,o){var l=o.loading;return i.createElement(q,{blockProfile:t,isSubmitting:l,displayName:a,onSubmit:r,closeModal:n,launchToast:e})}))})})};$.defaultProps={namespace:""};var G=$,Y=function e(n){var t=n.displayName;return i.createElement(i.Fragment,null,i.createElement("div",{className:"social-blocks-UnblockUserDescriptionContent__notice--1IjZS",key:"notice"},i.createElement("span",{className:"social-blocks-UnblockUserDescriptionContent__notice_text--1imKp"},Object(w.localize)("social_unblock_modal_notice",{displayName:t}))),i.createElement("div",{className:"social-blocks-UnblockUserDescriptionContent__list--2hI5A",key:"list"},i.createElement(H,null,Object(w.localize)("social_block_modal_ex_follow_v2"),Object(w.localize)("social_block_modal_ex_dm"),Object(w.localize)("social_block_modal_ex_repost_v2"))))},J=function(e){function n(){var e,t;k()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=_()(this,(e=y()(n)).call.apply(e,[this].concat(a))),U()(C()(C()(t)),"onSubmit",function(){var e=t.props,n=e.unblockProfile,i=e.closeModal,a=e.onSubmit;n().then(function(){i(),"function"==typeof a&&a()})}),t}return E()(n,e),f()(n,[{key:"render",value:function e(){var n=this.props,t=n.displayName,a=n.isSubmitting,o=n.closeModal;return i.createElement(A,{descriptionContent:i.createElement(Y,{displayName:t}),onSubmit:this.onSubmit,onCancel:o,submitContent:Object(w.localize)("social_unblock_btn"),isSubmitting:a})}}]),n}(i.Component),ee=function e(n,t){return"".concat(n,":UNBLOCK_USER:").concat(t)},ne=function e(n){var t=n.userId,a=n.namespace,o=n.children;return i.createElement(O.SocialOpener,{name:ee(a,t)},o)};ne.defaultProps={namespace:""};var te=function e(n){var t=n.userIdToUnblock,a=n.displayName,o=n.namespace,l=n.onClose,r=n.onSubmit;return i.createElement(B.Closer,null,function(e){return i.createElement(I.Modal,{name:ee(o,t),header:i.createElement(P.TitleBar,{displayType:"CENTERED_WHITE"},Object(w.localize)("social_unblock_modal_title",{displayName:a})),onClose:l},i.createElement(d,{userIdToUnblock:t},function(n,t){var o=t.loading,l=t.data;return i.createElement(J,{unblockProfile:n,isSubmitting:o||l,displayName:a,closeModal:e,onSubmit:r})}))})};te.defaultProps={namespace:""};var ie=te,ae=function e(){return Object(w.localize)("social_no_permission")},oe=t("@babel/runtime/helpers/esm/extends"),le=t.n(oe),re=i.createContext(function(){throw new Error("Attempted to open a modal without an enclosing MemberInteractionProvider")}),ce=re.Provider,se=re.Consumer,ue=function(e){function n(){var e,t;k()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=_()(this,(e=y()(n)).call.apply(e,[this].concat(a))),U()(C()(C()(t)),"openModal",function(e){if("BLOCK"===e)t.props.openBlockUserModal();else{if("UNBLOCK"!==e)throw new Error("Attempted to open type ".concat(e," but it does not exist."));t.props.openUnblockUserModal()}}),t}return E()(n,e),f()(n,[{key:"render",value:function e(){var n=this.props,t=n.namespace,a=n.member,o=a.userId,l=a.displayName,r=n.onClose,c=n.onSubmit,s=n.children;return i.createElement(ce,{value:this.openModal},i.createElement(G,{userIdToBlock:o,displayName:l,namespace:t,onClose:r,onSubmit:c,key:"BLOCK_MODAL:".concat(o,":").concat(t)}),i.createElement(ie,{userIdToUnblock:o,displayName:l,namespace:t,onClose:r,onSubmit:c,key:"UNBLOCK_MODAL:".concat(o,":").concat(t)}),s)}}]),n}(i.Component),me=function(e){function n(){var e,t;k()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=_()(this,(e=y()(n)).call.apply(e,[this].concat(a))),U()(C()(C()(t)),"namespace","MEMBER_INTERACTION:".concat(Math.random())),t}return E()(n,e),f()(n,[{key:"render",value:function e(){var n=this,t=this.props.member.userId;return i.createElement(Z,{userId:t,namespace:this.namespace},function(e){return i.createElement(ne,{userId:t,namespace:n.namespace},function(t){return i.createElement(ue,le()({},n.props,{namespace:n.namespace,openUnblockUserModal:t,openBlockUserModal:e}))})})}}]),n}(i.Component);t.d(n,"BlockProfile",function(){return s}),t.d(n,"UnblockProfile",function(){return d}),t.d(n,"BlockUserModal",function(){return G}),t.d(n,"OpenBlockUserModal",function(){return Z}),t.d(n,"UnblockUserModal",function(){return ie}),t.d(n,"OpenUnblockUserModal",function(){return ne}),t.d(n,"NoPermissionToast",function(){return ae}),t.d(n,"MemberInteractionProvider",function(){return me}),t.d(n,"MemberInteractionConsumer",function(){return se})}}});
//# sourceMappingURL=social.blocks.158845fee8.js.map