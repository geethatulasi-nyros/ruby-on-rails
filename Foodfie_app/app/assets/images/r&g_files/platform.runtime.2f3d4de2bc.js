(window.$WP=window.$WP||[]).push({id:"@ta/platform.runtime",se:!0,d:["vendor-babel","vendor-react-libs","ta-platform"],e:["./packages/platform/runtime/runtime.jsx"],m:{"./packages/platform/runtime/runtime.jsx":function(e,t,n){"use strict";n.r(t);var r=n("@babel/runtime/helpers/esm/toConsumableArray"),a=n.n(r),o=n("react"),i=n.n(o),c=n("react-dom"),u=n("react-redux"),l=n("@ta/common.api"),s=n("@ta/common.error-handling"),m=n("@ta/common.features"),d=n("@ta/common.global"),f=n("@ta/common.i18n"),p=n("@ta/common.imports"),b=n("@ta/common.logging"),h=n.n(b),g=n("@ta/common.routing"),O=n("@ta/common.state"),j=n("@ta/common.tracking"),E=n.n(j),C=n("@ta/platform.import"),v=n.n(C);n("@babel/runtime/helpers/esm/classCallCheck"),n("@babel/runtime/helpers/esm/createClass"),n("@babel/runtime/helpers/esm/possibleConstructorReturn"),n("@babel/runtime/helpers/esm/getPrototypeOf"),n("@babel/runtime/helpers/esm/inherits"),n("@babel/runtime/helpers/esm/assertThisInitialized"),n("@babel/runtime/helpers/esm/defineProperty"),i.a.PureComponent,n.d(t,"importBundle",function(){return B}),n.d(t,"createRoot",function(){return $}),n.d(t,"destroyRoot",function(){return L}),n.d(t,"hydrateRoot",function(){return x}),n.d(t,"pageManifestComponents",function(){return N});var y=__WEB_CONTEXT__.pageManifest;Object(b.start)("Components Initialization"),Object(b.start)("Components Bundle Load");var P={};y.bundles.forEach(function(e){P[e]=$WP.getChunkPromise(e)}),Promise.all(Object.values(P)).then(function(){Object(b.end)("Components Bundle Load")});var w={};y.assets.forEach(function(e){w[e]=Promise.resolve(!0)}),Object(f.loadMessages)(y.messages),Object(m.loadFeatures)(y.features);var k=Object(O.initializeStore)(y.redux),_=k.getState().auth.csrfToken,A=new d.DummyCache;y.apolloCache&&A.restore(y.apolloCache);var I=Object(d.buildClient)(A,_);window.__APOLLO_CLIENT__=I;var B=function e(t){return t in P||(P[t]=fetch("/data/1.0/bundle?name=".concat(t),{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){return Object(f.loadMessages)(e.messages),Object(m.loadFeatures)(e.features),Promise.all([].concat(a()(e.css.map(function(e){return e in w||(w[e]=Object(p.importCss)(y.redux.meta.imageCdnUrl+e)),w[e]})),a()(e.js.map(function(e){return e in w||(w[e]=Object(p.importScript)(y.redux.meta.imageCdnUrl+e)),w[e]}))))}).then(function(){return $WP.getChunkPromise(t)})),P[t]},M=i.a.unstable_ConcurrentMode,R=function e(t){return Object(m.featureIsEnabled)("react_concurrent_mode")?i.a.createElement(M,null,i.a.createElement(v.a.Provider,{value:B},i.a.createElement(s.ErrorBoundary,{store:k},i.a.createElement(d.Root,{store:k,apolloClient:I},t)))):i.a.createElement(v.a.Provider,{value:B},i.a.createElement(s.ErrorBoundary,{store:k},i.a.createElement(d.Root,{store:k,apolloClient:I},t)))},W=i.a.createElement(v.a.Provider,{value:B},i.a.createElement(s.ErrorBoundary,{store:k},i.a.createElement(u.Provider,{store:k},i.a.createElement(g.Router,null,i.a.createElement(g.History,null))))),z="data-component-init";Object(b.start)("Loadables"),t.default=Promise.all(y.lazyLoadedModules.filter(function(e){return!!e}).map(function(e){return $WP.getChunkPromise(e)})).finally(function(){Object(b.end)("Loadables"),Object(b.start)("Hydration");var e=[];return y.hydrations.forEach(function(t){var n=document.getElementById(t.id);null===n||n.getAttribute(z)||(n.setAttribute(z,z),e.push(function(){return new Promise(function(e){$WP.getChunkPromise(t.package).then(function(r){var a="Hydrate ".concat(t.package," ").concat(t.id);Object(b.start)(a),new l.ApiMonitor(k,r.default,t.props).stage(t.props),Object(c.hydrate)(R(i.a.createElement(r.default,t.props)),n,function(){Object(b.end)(a),e()})})})}))}),Object(m.featureIsEnabled)("serialized_hydration_promises")?e.reduce(function(e,t){return e.finally(t)},Promise.resolve([])):Promise.all(e.map(function(e){return e()}))}).finally(function(){Object(b.end)("Hydration"),Object(O.storeResizeHandler)(),Object(b.start)("Render");var e=[];y.renders.forEach(function(t){var n=document.getElementById(t.id);null===n||n.getAttribute(z)||(n.setAttribute(z,z),e.push(new Promise(function(e){$WP.getChunkPromise(t.package).then(function(r){new l.ApiMonitor(k,r.default,t.props).reload();var a="Render ".concat(t.package," ").concat(t.id);Object(b.start)(a),Object(c.render)(R(i.a.createElement(r.default,t.props)),n,function(){Object(b.end)(a),e()})})})))});var t=document.body,n=document.createElement("div");n.id="historyApi",t&&(t.appendChild(n),Object(c.render)(W,n)),Promise.all(e).finally(function(){if(Object(b.end)("Render"),Object(b.end)("Components Initialization"),Object(m.featureIsEnabled)("prod_runtime_tracking")&&"undefined"!=typeof window&&window.performance&&window.performance.getEntriesByName){var e=window.performance.getEntriesByName("components-Components Initialization-end","mark");if(e&&e.length>0){var t=e[0].startTime;null!==t&&E()({module:"runtime",action:"initialization_complete",context:Number(t).toString()})}}}),requestIdleCallback(function(){return Object(d.replaceCache)(!0)}),requestIdleCallback(function(){return Object(b.defineSentry)(B)})});var $=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=document.getElementById(t);null!==a?a.getAttribute(z)||(a.setAttribute(z,z),$WP.getChunkPromise(n).then(function(e){new l.ApiMonitor(k,e.default,r).reload(),Object(c.render)(R(i.a.createElement(e.default,r)),a)})):h.a.error("Unable to find DOM element with id = ".concat(t))},L=function e(t){var n=document.getElementById(t);null!==n&&Object(c.unmountComponentAtNode)(n)},x=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=document.getElementById(t);null!==a?a.getAttribute(z)||(a.setAttribute(z,z),$WP.getChunkPromise(n).then(function(e){new l.ApiMonitor(k,e.default,r).stage(r),Object(c.hydrate)(R(i.a.createElement(e.default,r)),a)})):h.a.error("Unable to find DOM element with id = ".concat(t))},N=y.hydrations.concat(y.renders).reduce(function(e,t){return e[t.id]=t.props,e},{});define("@ta/platform.runtime",[],function(){return n("@ta/platform.runtime")})}}});
//# sourceMappingURL=platform.runtime.2f3d4de2bc.js.map