(window.$WP=window.$WP||[]).push({id:"@ta/public.maps",d:["@ta/maps.provider-names","vendor-babel","vendor-react-libs","ta-platform"],e:["./packages/public/maps/maps.jsx"],x:{"./node_modules/@babel/runtime/helpers/esm/get.js":["a"],"./packages/public/maps/maps.jsx":["MapProviderGoogle","MapProviderCitymaps","MapProviderBing","MapProviderAutonavi","LatLng","LatLngBounds","MapComponent","Util","CircleOverlay","MapInterface","MapContextProvider","MapContextConsumer","Marker","IconMarker","Popup","PolygonOverlay","MockMapInterface"]},m:{"./node_modules/@babel/runtime/helpers/esm/get.js":function(e,t,o){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function i(e,t,o){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,o,i){var a=function r(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}(t,o);if(a){var s=Object.getOwnPropertyDescriptor(a,o);return s.get?s.get.call(i):s.value}})(e,t,o||e)}o.d(t,"a",function(){return i})},"./packages/public/maps/maps.jsx":function(e,t,o){"use strict";o.r(t);var n,i=o("@ta/maps.provider-names"),a=o("@babel/runtime/helpers/esm/classCallCheck"),r=o.n(a),s=o("@babel/runtime/helpers/esm/createClass"),l=o.n(s),u=o("@babel/runtime/helpers/esm/defineProperty"),c=o.n(u),p=Math.PI/180,h=function(){function e(t,o){r()(this,e),c()(this,"lat",void 0),c()(this,"lng",void 0),this.lat=t,this.lng=o}return l()(e,[{key:"equals",value:function e(t){return this.lat===t.lat&&this.lng===t.lng}},{key:"distanceTo",value:function e(t){var o=this.lat*p,n=t.lat*p,i=Math.sin((t.lat-this.lat)*p/2),a=Math.sin((t.lng-this.lng)*p/2),r=i*i+Math.cos(o)*Math.cos(n)*a*a;return 2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))*6371e3}}]),e}(),v=function(){function e(t,o){var n=this;r()(this,e),c()(this,"southwest",void 0),c()(this,"northeast",void 0),c()(this,"containsPoint",function(e){return n.southwest.lat<=e.lat&&n.southwest.lng<=e.lng&&n.northeast.lat>=e.lat&&n.northeast.lng>=e.lng}),c()(this,"containsBounds",function(e){return n.southwest.lat<=e.southwest.lat&&n.southwest.lng<=e.southwest.lng&&n.northeast.lat>=e.northeast.lat&&n.northeast.lng>=e.northeast.lng}),c()(this,"intersectsBounds",function(e){return n.southwest.lat<=e.northeast.lat&&n.southwest.lng<=e.northeast.lng&&n.northeast.lat>=e.southwest.lat&&n.northeast.lng>=e.southwest.lng}),this.southwest=t,this.northeast=o}return l()(e,[{key:"widthInMeters",value:function e(){return this.northeast.distanceTo(new h(this.northeast.lat,this.southwest.lng))}},{key:"heightInMeters",value:function e(){return this.northeast.distanceTo(new h(this.southwest.lat,this.northeast.lng))}},{key:"getCenter",value:function e(){return new h((this.southwest.lat+this.northeast.lat)/2,(this.southwest.lng+this.northeast.lng)/2)}}],[{key:"fromArray",value:function t(o){if(0===o.length)throw new Error("Creating a LatLngBounds from 0 items. You probably don't want this.");for(var n=o[0].lat,i=o[0].lat,a=o[0].lng,r=o[0].lng,s=1;s<o.length;++s){var l=o[s];n=Math.min(l.lat,n),a=Math.min(l.lng,a),i=Math.max(l.lat,i),r=Math.max(l.lng,r)}return new e(new h(n,a),new h(i,r))}}]),e}(),d=o("@babel/runtime/helpers/esm/objectSpread"),m=o.n(d),f=o("@babel/runtime/helpers/esm/possibleConstructorReturn"),g=o.n(f),y=o("@babel/runtime/helpers/esm/getPrototypeOf"),k=o.n(y),C=o("@babel/runtime/helpers/esm/inherits"),M=o.n(C),O=o("@babel/runtime/helpers/esm/assertThisInitialized"),b=o.n(O),w=o("react"),L=o("@ta/events.window-scroll"),P=o.n(L),x=o("@ta/common.tracking"),E=o.n(x),S=w.createContext({map:null,mapProvider:""}),I=S.Provider,z=S.Consumer,Z=o("react-redux"),A=o("./node_modules/@babel/runtime/helpers/esm/get.js"),H=o("@ta/common.imports"),W=function e(t){if(!t)return null;var o=window;return o.ta||(o.ta={}),t.split(".").forEach(function(e){o[e]||(o[e]={}),o=o[e]}),o},B=function e(t,o,n){var i=W(o);return!!i&&(i[n]=t,!0)},T=function e(t,o){var n=W(t);return n?n[o]:null},D=function(){function e(t){r()(this,e),c()(this,"libraryConfig",{}),c()(this,"interfaceClass",void 0),this.libraryConfig={},this.interfaceClass=t}return l()(e,[{key:"loadLibrary",value:function e(t){return!!this.isLibraryLoaded()&&(t.call(null),!0)}},{key:"isLibraryLoaded",value:function e(){return!1}},{key:"getLibraryConfig",value:function e(){return this.libraryConfig}},{key:"getInterfaceClass",value:function e(){return this.interfaceClass}},{key:"configureLibrary",value:function e(t){Object.assign(this.libraryConfig,t)}}]),e}(),R=o("@ta/common.logging"),F=o.n(R),j=function(){function e(){r()(this,e),c()(this,"events",{})}return l()(e,[{key:"on",value:function e(t,o){return this.events[t]||(this.events[t]=[]),this.events[t].push({callback:o,single:!1}),this}},{key:"once",value:function e(t,o){return this.events[t]||(this.events[t]=[]),this.events[t].push({callback:o,single:!0}),this}},{key:"off",value:function e(t,o){return this.events[t]&&(this.events[t]=o?this.events[t].filter(function(e){return o&&e.callback!==o}):[]),this}},{key:"removeAllListeners",value:function e(t){var o=this;return t&&this.events[t]?this.events[t]=[]:t||Object.keys(this.events).forEach(function(e){o.events[e]=[]}),this}},{key:"emit",value:function e(t){for(var o=this,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return this.events[t]&&(this.events[t]=this.events[t].filter(function(e){if(e.callback)try{e.callback.apply(o,i)}catch(e){if("undefined"!=typeof console){var n="Error in event handler for ".concat(t);F.a.debug(n,e)}}return!e.single})),this}}]),e}(),_=function(){function e(t,o){r()(this,e),c()(this,"events",new j),c()(this,"padding",{left:32,right:32,top:32,bottom:32}),this.padding=Object.assign(this.padding,o.padding)}return l()(e,[{key:"unmount",value:function e(){}},{key:"on",value:function e(t,o){this.events.on(t,o)}},{key:"once",value:function e(t,o){this.events.once(t,o)}},{key:"off",value:function e(t,o){this.events.off(t,o)}},{key:"setCenter",value:function e(t,o,n){throw"Unimplemented"}},{key:"setZoom",value:function e(t,o){throw"Unimplemented"}},{key:"setBounds",value:function e(t,o,n){throw"Unimplemented"}},{key:"panIntoView",value:function e(t,o,n){return this.setCenter(t,void 0,n),!0}},{key:"getCenter",value:function e(){throw"Unimplemented"}},{key:"getZoom",value:function e(){throw"Unimplemented"}},{key:"getBounds",value:function e(){throw"Unimplemented"}},{key:"resize",value:function e(){throw"Unimplemented"}},{key:"createMarkerContainer",value:function e(t){throw"Unimplemented"}},{key:"removeMarkerContainer",value:function e(t){throw"Unimplemented"}},{key:"addCircleOverlay",value:function e(t){throw"Unimplemented"}},{key:"removeCircleOverlay",value:function e(t){throw"Unimplemented"}},{key:"addPolygonOverlay",value:function e(t){throw"Unimplemented"}},{key:"removePolygonOverlay",value:function e(t){throw"Unimplemented"}}]),e}(),U=function(){function e(t){r()(this,e),c()(this,"position",void 0),c()(this,"pinContainer",void 0),c()(this,"zIndexOffset",0),c()(this,"onMarkerReady",null),c()(this,"draggable",!1),c()(this,"onDrag",null),this.position=t.position,this.pinContainer=document.createElement("div"),this.pinContainer.style.position="absolute",this.pinContainer.style.width="0px",this.pinContainer.style.height="0px",this.pinContainer.style.cursor="pointer",t.draggable&&(this.draggable=t.draggable),this.onDrag=t.onDrag}return l()(e,[{key:"setPosition",value:function e(t){this.position=t}},{key:"getPosition",value:function e(){return this.position}},{key:"setDraggable",value:function e(t){this.draggable=t}},{key:"getDraggable",value:function e(){return this.draggable}},{key:"getContainer",value:function e(){return this.pinContainer.parentElement?this.pinContainer:null}},{key:"setMarkerReadyCallback",value:function e(t){this.onMarkerReady=t}},{key:"setDragCallback",value:function e(t){this.onDrag=t}},{key:"setZIndexOffset",value:function e(t){this.zIndexOffset=t}},{key:"showAnchor",value:function e(){this.pinContainer.style.width="4px",this.pinContainer.style.height="4px",this.pinContainer.style.background="#000"}}]),e}(),V=function(e){function t(e){var o;return r()(this,t),o=g()(this,k()(t).call(this,e)),c()(b()(b()(o)),"overlayView",void 0),c()(b()(b()(o)),"moveHandler",void 0),c()(b()(b()(o)),"touchHandler",void 0),c()(b()(b()(o)),"addDragHandlers",function(){google.maps.event.addDomListener(o.pinContainer,"mousedown",function(e){o.handleDragMarkerContainer(e)}),google.maps.event.addDomListener(o.pinContainer,"touchstart",function(e){o.handleDragMarkerContainer(e)}),google.maps.event.addDomListener(o.overlayView.map,"mouseleave",function(){google.maps.event.trigger(o.pinContainer,"mouseup")}),google.maps.event.addDomListener(o.overlayView.map,"touchcancel",function(){google.maps.event.trigger(o.pinContainer,"touchend")}),google.maps.event.addDomListener(o.pinContainer,"mouseup",o.stopDrag),google.maps.event.addDomListener(o.pinContainer,"touchend",o.stopDrag)}),c()(b()(b()(o)),"handleDragMarkerContainer",function(e){o.overlayView.map.set("draggable",!1);var t=e.clientX?e.clientX:e.touches[0].clientX,n=e.clientY?e.clientY:e.touches[0].clientY,i=function e(i){var a=o.overlayView.getProjection();if(a){var r=new google.maps.LatLng(o.position.lat,o.position.lng),s=a.fromLatLngToDivPixel(r),l=i.clientX?i.clientX:i.touches[0].clientX,u=i.clientY?i.clientY:i.touches[0].clientY,c=t-l,p=n-u,v=o.overlayView.getProjection().fromDivPixelToLatLng(new google.maps.Point(s.x-c,s.y-p)),d=new h(v.lat(),v.lng());d&&(o.position=d,o.draw()),t=l,n=u}};o.moveHandler=o.moveHandler?o.moveHandler:google.maps.event.addDomListener(o.overlayView.get("map").getDiv(),"mousemove",function(e){i(e)}),o.touchHandler=o.touchHandler?o.touchHandler:google.maps.event.addDomListener(o.overlayView.map.getDiv(),"touchmove",function(e){i(e)})}),c()(b()(b()(o)),"stopDrag",function(){o.bubbleUpDragPosition(),o.overlayView.map.set("draggable",!0),google.maps.event.removeListener(o.moveHandler),o.moveHandler=null,google.maps.event.removeListener(o.touchHandler),o.touchHandler=null}),c()(b()(b()(o)),"bubbleUpDragPosition",function(){o.onDrag&&o.onDrag(new h(o.position.lat,o.position.lng))}),o.overlayView=new google.maps.OverlayView,o.overlayView.onAdd=o.onAdd.bind(b()(b()(o))),o.overlayView.draw=o.draw.bind(b()(b()(o))),o.overlayView.onRemove=o.onRemove.bind(b()(b()(o))),o}return M()(t,e),l()(t,[{key:"onAdd",value:function e(){this.draggable&&this.addDragHandlers(),this.overlayView.getPanes().overlayMouseTarget.appendChild(this.pinContainer),google.maps.OverlayView.preventMapHitsFrom(this.pinContainer),this.onMarkerReady&&this.onMarkerReady()}},{key:"draw",value:function e(){var t=this.overlayView.getProjection();if(t){var o=t.fromLatLngToDivPixel(new google.maps.LatLng(this.position.lat,this.position.lng));this.pinContainer.style.left="".concat(o.x,"px"),this.pinContainer.style.top="".concat(o.y,"px");var n=this.zIndexOffset+Math.round(o.y);this.pinContainer.style.zIndex=n.toString()}}},{key:"onRemove",value:function e(){this.pinContainer&&this.pinContainer.parentNode&&(this.pinContainer.parentNode.removeChild(this.pinContainer),google.maps.event.trigger(this,"onremove"))}},{key:"setMap",value:function e(t){this.overlayView.setMap(t)}},{key:"setZIndexOffset",value:function e(o){Object(A.a)(k()(t.prototype),"setZIndexOffset",this).call(this,o),this.draw()}},{key:"setPosition",value:function e(t){this.position=t,this.draw()}},{key:"setDraggable",value:function e(t){this.draggable=t,this.draggable&&this.addDragHandlers()}}]),t}(U),G=function(){function e(t){r()(this,e),c()(this,"position",void 0),c()(this,"radius",void 0),c()(this,"opacity",void 0),c()(this,"fillColor",void 0),c()(this,"strokeColor",void 0),c()(this,"strokeWidth",void 0),this.position=t.position,this.radius=t.radius,this.opacity=t.opacity,this.fillColor=t.fillColor,this.strokeColor=t.strokeColor,this.strokeWidth=t.strokeWidth}return l()(e,[{key:"setPosition",value:function e(t){this.position=t}},{key:"setRadius",value:function e(t){this.radius=t}},{key:"setOpacity",value:function e(t){this.opacity=t}},{key:"setFillColor",value:function e(t){this.fillColor=t}},{key:"setStrokeColor",value:function e(t){this.strokeColor=t}},{key:"setStrokeWidth",value:function e(t){this.strokeWidth=t}}]),e}(),N=function(e){function t(e,o){var n;return r()(this,t),n=g()(this,k()(t).call(this,e)),c()(b()(b()(n)),"googleCircle",void 0),n.googleCircle=new google.maps.Circle({strokeColor:n.strokeColor,strokeWeight:n.strokeWidth,strokeOpacity:n.opacity,fillColor:n.fillColor,fillOpacity:n.opacity,radius:n.radius,map:o,center:{lat:n.position.lat,lng:n.position.lng}}),n}return M()(t,e),l()(t,[{key:"removeFromMap",value:function e(){this.googleCircle.setMap(null)}},{key:"setPosition",value:function e(t){this.position=t,this.googleCircle.setOptions({center:{lat:this.position.lat,lng:this.position.lng}})}},{key:"setRadius",value:function e(t){this.radius=t,this.googleCircle.setOptions({radius:this.radius})}},{key:"setOpacity",value:function e(t){this.opacity=t,this.googleCircle.setOptions({fillOpacity:this.opacity,strokeOpacity:this.opacity})}},{key:"setFillColor",value:function e(t){this.fillColor=t,this.googleCircle.setOptions({fillColor:this.fillColor})}},{key:"setStrokeColor",value:function e(t){this.strokeColor=t,this.googleCircle.setOptions({strokeColor:this.strokeColor})}},{key:"setStrokeWidth",value:function e(t){this.strokeWidth=t,this.googleCircle.setOptions({strokeWeight:this.strokeWidth})}}]),t}(G),X=function(){function e(t){r()(this,e),c()(this,"coords",void 0),c()(this,"opacity",void 0),c()(this,"fillColor",void 0),c()(this,"strokeColor",void 0),c()(this,"strokeWidth",void 0),c()(this,"strokeOpacity",void 0),c()(this,"onMouseOver",void 0),c()(this,"onMouseOut",void 0),c()(this,"onClick",void 0),this.coords=t.coords,this.opacity=t.opacity,this.fillColor=t.fillColor,this.strokeColor=t.strokeColor,this.strokeWidth=t.strokeWidth,this.strokeOpacity=t.strokeOpacity,this.onClick=t.onClick,this.onMouseOver=t.onMouseOver,this.onMouseOut=t.onMouseOut}return l()(e,[{key:"setPolygon",value:function e(t){this.coords=t}},{key:"setOpacity",value:function e(t){this.opacity=t}},{key:"setFillColor",value:function e(t){this.fillColor=t}},{key:"setStrokeColor",value:function e(t){this.strokeColor=t}},{key:"setStrokeOpacity",value:function e(t){this.strokeOpacity=t}},{key:"setStrokeWidth",value:function e(t){this.strokeWidth=t}},{key:"setOnClickInteraction",value:function e(t){this.onClick=t}},{key:"setOnMouseOverInteraction",value:function e(t){this.onMouseOver=t}},{key:"setOnMouseOutInteraction",value:function e(t){this.onMouseOut=t}}]),e}(),q=function(e){function t(e,o){var n;return r()(this,t),n=g()(this,k()(t).call(this,e)),c()(b()(b()(n)),"googlePolygon",void 0),c()(b()(b()(n)),"onClickListener",void 0),c()(b()(b()(n)),"onMouseOverListener",void 0),c()(b()(b()(n)),"onMouseOutListener",void 0),n.googlePolygon=new google.maps.Polygon({paths:n.coords,strokeColor:n.strokeColor,strokeWeight:n.strokeWidth,strokeOpacity:n.strokeOpacity,fillColor:n.fillColor,fillOpacity:n.opacity}),n.onClick&&(n.onClickListener=google.maps.event.addListener(n.googlePolygon,"click",n.onClick)),n.onMouseOver&&(n.onMouseOverListener=google.maps.event.addListener(n.googlePolygon,"mouseover",n.onMouseOver)),n.onMouseOut&&(n.onMouseOutListener=google.maps.event.addListener(n.googlePolygon,"mouseout",n.onMouseOut)),n.googlePolygon.setMap(o),n}return M()(t,e),l()(t,[{key:"removeFromMap",value:function e(){this.googlePolygon.setMap(null)}},{key:"setOnClickInteraction",value:function e(t){google.maps.event.removeListener(this.onClickListener),this.onClick=t,this.onClick&&(this.onClickListener=google.maps.event.addListener(this.googlePolygon,"click",this.onClick))}},{key:"setOnMouseOverInteraction",value:function e(t){google.maps.event.removeListener(this.onMouseOverListener),this.onMouseOver=t,this.onMouseOver&&(this.onMouseOverListener=google.maps.event.addListener(this.googlePolygon,"mouseover",this.onMouseOver))}},{key:"setOnMouseOutInteraction",value:function e(t){google.maps.event.removeListener(this.onMouseOutListener),this.onMouseOut=t,this.onMouseOut&&(this.onMouseOutListener=google.maps.event.addListener(this.googlePolygon,"mouseout",this.onMouseOut))}},{key:"setPolygon",value:function e(t){this.googlePolygon.setOptions({paths:t})}},{key:"setOpacity",value:function e(t){this.opacity=t,this.googlePolygon.setOptions({fillOpacity:this.opacity,strokeOpacity:this.opacity})}},{key:"setFillColor",value:function e(t){this.fillColor=t,this.googlePolygon.setOptions({fillColor:this.fillColor})}},{key:"setStrokeColor",value:function e(t){this.strokeColor=t,this.googlePolygon.setOptions({strokeColor:this.strokeColor})}},{key:"setStrokeWidth",value:function e(t){this.strokeWidth=t,this.googlePolygon.setOptions({strokeWeight:this.strokeWidth})}},{key:"setStrokeOpacity",value:function e(t){this.strokeOpacity=t,this.googlePolygon.setOptions({strokeOpacity:this.strokeOpacity})}}]),t}(X),Y=function(e){function t(e,o){var n;r()(this,t),n=g()(this,k()(t).call(this,e,o)),c()(b()(b()(n)),"map",void 0),c()(b()(b()(n)),"markerContainers",[]),c()(b()(b()(n)),"circleOverlays",[]),c()(b()(b()(n)),"polygonOverlays",[]),c()(b()(b()(n)),"oldZoom",0),c()(b()(b()(n)),"clickPosition",null),c()(b()(b()(n)),"developerBeganMovement",!1),c()(b()(b()(n)),"onIdle",function(){var e=!n.developerBeganMovement;n.developerBeganMovement=!1;var t=n.getZoom();t!==n.oldZoom&&(n.oldZoom=t,n.events.emit("zoomChange",{map:b()(b()(n)),position:n.getCenter(),zoom:n.getZoom(),userGesture:e})),n.events.emit("centerChange",{map:b()(b()(n)),position:n.getCenter(),zoom:n.getZoom(),userGesture:e})}),c()(b()(b()(n)),"onClick",function(e){n.clickPosition=new h(e.latLng.lat,e.latLng.lng)}),c()(b()(b()(n)),"onTilesLoaded",function(){n.events.emit("renderComplete",{map:b()(b()(n))}),google.maps.event.clearListeners(n.map,"tilesloaded")}),c()(b()(b()(n)),"onDragStart",function(){n.events.emit("panStart",{map:b()(b()(n)),position:n.getCenter(),zoom:n.getZoom()})});var i={backgroundColor:"transparent",zoom:o.zoom,minZoom:o.minZoom,maxZoom:o.maxZoom,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,center:o.center,gestureHandling:"greedy",clickableIcons:!1,scrollwheel:o.scrollWheelZoom};return n.oldZoom=o.zoom,n.map=new google.maps.Map(e,i),google.maps.event.addListener(n.map,"click",n.onClick),google.maps.event.addListener(n.map,"dragstart",n.onDragStart),google.maps.event.addListener(n.map,"tilesloaded",n.onTilesLoaded),google.maps.event.addListener(n.map,"idle",n.onIdle),n}return M()(t,e),l()(t,[{key:"unmount",value:function e(){google.maps.event.clearInstanceListeners(this.map)}},{key:"setCenter",value:function e(t,o,n){this.developerBeganMovement=!n,this.map.panTo(new google.maps.LatLng(t.lat,t.lng)),o&&this.setZoom(o)}},{key:"setZoom",value:function e(t,o){this.developerBeganMovement=!o,this.map.setZoom(Math.round(t))}},{key:"setBounds",value:function e(t,o,n){this.developerBeganMovement=!n;var i={north:t.northeast.lat,east:t.northeast.lng,south:t.southwest.lat,west:t.southwest.lng},a=o?{left:o.left,right:o.right,top:o.top,bottom:o.bottom}:null;this.map.fitBounds(i,a)}},{key:"panIntoView",value:function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{left:0,right:0,top:0,bottom:0},n=arguments.length>2?arguments[2]:void 0,i=this.map.getDiv().offsetWidth,a=this.map.getDiv().offsetHeight,r=function e(t,o){var n=o.getProjection().fromLatLngToPoint(o.getBounds().getNorthEast()),i=o.getProjection().fromLatLngToPoint(o.getBounds().getSouthWest()),a=Math.pow(2,o.getZoom()),r=o.getProjection().fromLatLngToPoint(t);return new google.maps.Point((r.x-i.x)*a,(r.y-n.y)*a)}(new google.maps.LatLng(t.lat,t.lng),this.map),s=0,l=0,u=o.left+this.padding.left,c=o.right+this.padding.right,p=o.top+this.padding.top,h=o.bottom+this.padding.bottom;r.x<u&&(s=r.x-u),r.x>i-c&&(s=r.x-(i-c)),r.y<p&&(l=r.y-p),r.y>a-h&&(l=r.y-(a-h));var v=0!==s||0!==l;return v&&(this.developerBeganMovement=!n,this.map.panBy(s,l)),v}},{key:"getCenter",value:function e(){var t=this.map.getCenter();return new h(t.lat(),t.lng())}},{key:"getZoom",value:function e(){return this.map.getZoom()}},{key:"getBounds",value:function e(){var t=this.map.getBounds(),o=t.getSouthWest(),n=t.getNorthEast();return new v(new h(o.lat(),o.lng()),new h(n.lat(),n.lng()))}},{key:"resize",value:function e(){google.maps.event.trigger(this.map,"resize")}},{key:"createMarkerContainer",value:function e(t){var o=new V(t);return o.setMap(this.map),this.markerContainers.push(o),o}},{key:"removeMarkerContainer",value:function e(t){var o=this.markerContainers.indexOf(t);o>-1&&(t.setMap(null),this.markerContainers.splice(o,1))}},{key:"addCircleOverlay",value:function e(t){var o=new N(t,this.map);return this.circleOverlays.push(o),o}},{key:"removeCircleOverlay",value:function e(t){var o=this.circleOverlays.indexOf(t);o>-1&&(t.removeFromMap(),this.circleOverlays.splice(o,1))}},{key:"addPolygonOverlay",value:function e(t){var o=new q(t,this.map);return this.polygonOverlays.push(o),o}},{key:"removePolygonOverlay",value:function e(t){var o=this.polygonOverlays.indexOf(t);o>-1&&(t.removeFromMap(),this.polygonOverlays.splice(o,1))}}]),t}(_),K={domain:"maps.google.com",version:"3.35",channel:"ta",lang:"",clientId:"gme-tripadvisorinc"},J="ta.maps.provider.google",Q=function e(){var t=T(J,"loadCallbackList");t&&t.forEach(function(e){e()}),B([],J,"loadCallbackList")},$=function(e){function t(){var e;return r()(this,t),(e=g()(this,k()(t).call(this,Y))).configureLibrary(K),e}return M()(t,e),l()(t,[{key:"isLibraryLoaded",value:function e(){return window.google&&window.google.maps}},{key:"loadLibrary",value:function e(o){if(Object(A.a)(k()(t.prototype),"loadLibrary",this).call(this,o))return!0;if(T(J,"loadCallback")){var n=T(J,"loadCallbackList");return n&&n.push(o),!1}B(Q,J,"loadCallback"),B([o],J,"loadCallbackList");var i=this.getLibraryConfig(),a={v:i.version,client:i.clientId,channel:i.channel,language:i.lang,c:"true",async:"2",callback:"".concat(J,".").concat("loadCallback")},r=new URLSearchParams(a),s="//".concat(i.domain,"/maps/api/js?").concat(r.toString());return Object(H.importScript)(s),!1}}]),t}(D),ee=function(e){function t(e,o){var n;return r()(this,t),n=g()(this,k()(t).call(this,e)),c()(b()(b()(n)),"leafletLayerGroup",void 0),c()(b()(b()(n)),"leafletIcon",void 0),c()(b()(b()(n)),"leafletMarker",void 0),c()(b()(b()(n)),"bubbleUpDragPosition",function(){var e=n.leafletMarker.getLatLng();n.onDrag&&n.onDrag(new h(e.lat,e.lng))}),n.leafletLayerGroup=o,Leaflet.TAIcon||(Leaflet.TAIcon=Leaflet.Icon.extend({options:{markerContainer:null},createIcon:function e(){return this.options.markerContainer.pinContainer}})),n.leafletIcon=new Leaflet.TAIcon({markerContainer:b()(b()(n))}),n.leafletMarker=Leaflet.marker([n.position.lat,n.position.lng],{icon:n.leafletIcon,bubblingMouseEvents:!1,draggable:n.draggable,autoPan:n.draggable}),n.leafletLayerGroup.addLayer(n.leafletMarker),n.leafletMarker.getElement().style.outline="none",n.leafletMarker.on("click dblclick mousedown mousemove mouseup",function(){}),n.leafletMarker.on("dragend",n.bubbleUpDragPosition),n}return M()(t,e),l()(t,[{key:"setZIndexOffset",value:function e(o){this.zIndexOffset!==o&&(Object(A.a)(k()(t.prototype),"setZIndexOffset",this).call(this,o),this.leafletMarker.setZIndexOffset(o))}},{key:"remove",value:function e(){this.leafletLayerGroup.removeLayer(this.leafletMarker)}},{key:"setDraggable",value:function e(t){this.draggable=t,this.leafletMarker.setOptions({icon:this.leafletIcon,bubblingMouseEvents:!1,draggable:this.draggable,autoPan:this.draggable})}},{key:"setPosition",value:function e(t){this.position=t,this.leafletMarker.setLatLng([this.position.lat,this.position.lng])}}]),t}(U),te=function(e){function t(e,o){var n;return r()(this,t),n=g()(this,k()(t).call(this,e)),c()(b()(b()(n)),"leafletCircle",void 0),n.leafletCircle=Leaflet.circle([n.position.lat,n.position.lng],{color:n.strokeColor,fillColor:n.fillColor,radius:n.radius,weight:n.radius,opacity:n.opacity,fillOpacity:n.opacity}),o.addLayer(n.leafletCircle),n}return M()(t,e),l()(t,[{key:"removeFromMap",value:function e(){this.leafletCircle.remove()}},{key:"setPosition",value:function e(t){this.leafletCircle.setLatLng([this.position.lat,this.position.lng]),this.position=t}},{key:"setRadius",value:function e(t){this.leafletCircle.setRadius(t),this.radius=t}},{key:"setOpacity",value:function e(t){this.opacity=t,this.updateCircleStyle()}},{key:"setFillColor",value:function e(t){this.fillColor=t,this.updateCircleStyle()}},{key:"setStrokeColor",value:function e(t){this.strokeColor=t,this.updateCircleStyle()}},{key:"setStrokeWidth",value:function e(t){this.strokeWidth=t,this.updateCircleStyle()}},{key:"updateCircleStyle",value:function e(){this.leafletCircle.setStyle({fillColor:this.fillColor,color:this.strokeColor,weight:this.strokeWidth,opacity:this.opacity,fillOpacity:this.opacity})}}]),t}(G),oe=function(e){function t(e,o){var n;return r()(this,t),n=g()(this,k()(t).call(this,e)),c()(b()(b()(n)),"leafletPolygon",void 0),n.leafletPolygon=Leaflet.polygon(n.coords,{color:n.strokeColor,fillColor:n.fillColor,opacity:n.strokeOpacity,fillOpacity:n.opacity}),n.onClick&&n.leafletPolygon.on("click",n.onClick),n.onMouseOver&&n.leafletPolygon.on("mouseover",n.onMouseOver),n.onMouseOut&&n.leafletPolygon.on("mouseout",n.onMouseOut),o.addLayer(n.leafletPolygon),n}return M()(t,e),l()(t,[{key:"removeFromMap",value:function e(){this.leafletPolygon.remove()}},{key:"setOnClickInteraction",value:function e(t){this.leafletPolygon.off("click",this.onClick),this.onClick=t,this.onClick&&this.leafletPolygon.on("click",this.onClick)}},{key:"setOnMouseOverInteraction",value:function e(t){this.leafletPolygon.off("mouseover",this.onMouseOver),this.onMouseOver=t,this.onClick&&this.leafletPolygon.on("mouseover",this.onMouseOver)}},{key:"setOnMouseOutInteraction",value:function e(t){this.leafletPolygon.off("mouseout",this.onMouseOut),this.onMouseOut=t,this.onMouseOut&&this.leafletPolygon.on("mouseout",this.onMouseOut)}},{key:"setOpacity",value:function e(t){this.opacity=t,this.updatePolygonStyle()}},{key:"setFillColor",value:function e(t){this.fillColor=t,this.updatePolygonStyle()}},{key:"setStrokeColor",value:function e(t){this.strokeColor=t,this.updatePolygonStyle()}},{key:"setStrokeWidth",value:function e(t){this.strokeWidth=t,this.updatePolygonStyle()}},{key:"setStrokeOpacity",value:function e(t){this.strokeOpacity=t,this.updatePolygonStyle()}},{key:"updatePolygonStyle",value:function e(){this.leafletPolygon.setStyle({fillColor:this.fillColor,color:this.strokeColor,weight:this.strokeWidth,opacity:this.strokeOpacity,fillOpacity:this.opacity})}}]),t}(X),ne=function e(t){return t?t.substr(0,2):null},ie=function(e){function t(e,o){var n;r()(this,t),n=g()(this,k()(t).call(this,e,o)),c()(b()(b()(n)),"map",void 0),c()(b()(b()(n)),"markerGroup",void 0),c()(b()(b()(n)),"markerContainers",[]),c()(b()(b()(n)),"circleOverlays",[]),c()(b()(b()(n)),"polygonOverlays",[]),c()(b()(b()(n)),"zoomDidChange",!1),c()(b()(b()(n)),"developerBeganMovement",!1);var i=o.center||new h(0,0);return n.map=Leaflet.citymaps.map(e,null,{center:[i.lat,i.lng],zoom:o.zoom,minZoom:o.minZoom,maxZoom:o.maxZoom,language:ne(o.locale),scrollWheelZoom:o.scrollWheelZoom,keepBuffer:"TABLET"===o.userAgentCategory?0:2,loadingGrid:"TABLET"!==o.userAgentCategory,scaleControl:"MOBILE"!==o.userAgentCategory,citymapsTileLayerHost:"true"===o.config.citymapsDevTiles?"dev":void 0,scalePosition:o.isRtl?"bottomleft":"bottomright"}),n.markerGroup=Leaflet.featureGroup([]).addTo(n.map),n.map.getBaseLayer().once("load",function(){n.events.emit("renderComplete",{map:b()(b()(n))})}),n.map.on("click",function(e){n.events.emit("click",{map:b()(b()(n)),position:new h(e.latlng.lat,e.latlng.lng)})}),n.map.on("dragstart",function(){n.events.emit("panStart",{map:b()(b()(n)),position:n.getCenter(),zoom:n.getZoom()})}),n.map.on("moveend",function(){var e=!n.developerBeganMovement;n.developerBeganMovement=!1,n.zoomDidChange&&(n.zoomDidChange=!1,n.events.emit("zoomChange",{map:b()(b()(n)),position:n.getCenter(),zoom:n.getZoom(),userGesture:e})),n.events.emit("centerChange",{map:b()(b()(n)),position:n.getCenter(),zoom:n.getZoom(),userGesture:e})}),n.map.on("zoomend",function(){n.zoomDidChange=!0,n.map.getZoom()>=n.map.getMaxZoom()?n.map.doubleClickZoom.disable():n.map.doubleClickZoom.enable()}),n}return M()(t,e),l()(t,[{key:"unmount",value:function e(){this.map.off(),this.map.remove()}},{key:"setCenter",value:function e(t,o,n){this.developerBeganMovement=!n,o?this.map.setView(Leaflet.latLng(t.lat,t.lng),o):this.map.panTo(Leaflet.latLng(t.lat,t.lng),{animate:!0})}},{key:"setZoom",value:function e(t,o){this.developerBeganMovement=!o,this.map.setZoom(t)}},{key:"setBounds",value:function e(t,o,n){this.developerBeganMovement=!n;var i=Leaflet.latLngBounds(Leaflet.latLng(t.southwest.lat,t.southwest.lng),Leaflet.latLng(t.northeast.lat,t.northeast.lng)),a=o?{paddingTopLeft:Leaflet.point(o.top,o.left),paddingBottomRight:Leaflet.point(o.bottom,o.right)}:null;this.map.fitBounds(i,a)}},{key:"panIntoView",value:function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{left:0,right:0,top:0,bottom:0},n=arguments.length>2?arguments[2]:void 0,i=this.map.latLngToContainerPoint(t),a=this.map.getSize(),r=0,s=0,l=o.left+this.padding.left,u=o.right+this.padding.right,c=o.top+this.padding.top,p=o.bottom+this.padding.bottom;i.x<l&&(r=i.x-l),i.x>a.x-u&&(r=i.x-(a.x-u)),i.y<c&&(s=i.y-c),i.y>a.y-p&&(s=i.y-(a.y-p));var h=0!==r||0!==s;return h&&(this.developerBeganMovement=!n,this.map.panBy([r,s])),h}},{key:"getCenter",value:function e(){var t=this.map.getCenter();return new h(t.lat,t.lng)}},{key:"getZoom",value:function e(){return this.map.getZoom()}},{key:"getBounds",value:function e(){var t=this.map.getBounds();return new v(new h(t.getSouth(),t.getWest()),new h(t.getNorth(),t.getEast()))}},{key:"resize",value:function e(){this.map.invalidateSize({pan:!1})}},{key:"createMarkerContainer",value:function e(t){var o=new ee(t,this.markerGroup);return this.markerContainers.push(o),o}},{key:"removeMarkerContainer",value:function e(t){var o=this.markerContainers.indexOf(t);o>-1&&(t.remove(),this.markerContainers.splice(o,1))}},{key:"addCircleOverlay",value:function e(t){var o=new te(t,this.map);return this.circleOverlays.push(o),o}},{key:"removeCircleOverlay",value:function e(t){var o=this.circleOverlays.indexOf(t);o>-1&&(t.removeFromMap(),this.circleOverlays.splice(o,1))}},{key:"addPolygonOverlay",value:function e(t){var o=new oe(t,this.map);return this.polygonOverlays.push(o),o}},{key:"removePolygonOverlay",value:function e(t){var o=this.polygonOverlays.indexOf(t);o>-1&&(t.removeFromMap(),this.polygonOverlays.splice(o,1))}}]),t}(_),ae=function(e){function t(){return r()(this,t),g()(this,k()(t).call(this,ie))}return M()(t,e),l()(t,[{key:"isLibraryLoaded",value:function e(){return window.Leaflet&&window.Leaflet.citymaps}},{key:"loadLibrary",value:function e(o){if(Object(A.a)(k()(t.prototype),"loadLibrary",this).call(this,o))return!0;for(var n="https://ta-media.citymaps.io/lib/v1.1.18/citymaps.min.js",i=document.getElementsByTagName("script"),a=0;a<i.length;++a){var r=i[a];if(r.getAttribute("src")===n)return r.addEventListener("load",function(){o()}),!1}return Object(H.importScript)(n).then(o),!1}}]),t}(D),re=function(e){function t(){var e,o;r()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o=g()(this,(e=k()(t)).call.apply(e,[this].concat(i))),c()(b()(b()(o)),"map",void 0),c()(b()(b()(o)),"viewChangeEventHandler",void 0),c()(b()(b()(o)),"viewChangedEventHandler",void 0),c()(b()(b()(o)),"mapResizeEventHandler",void 0),o}return M()(t,e),l()(t,[{key:"setPosition",value:function e(t){this.position=t,this.positionContainer()}},{key:"setMap",value:function e(t,o){var n=this;this.map=t,t?(o.appendChild(this.pinContainer),this.positionContainer(),this.viewChangeEventHandler=Microsoft.Maps.Events.addHandler(t,"viewchange",function(){n.positionContainer()}),this.viewChangedEventHandler=Microsoft.Maps.Events.addHandler(t,"viewchangeend",function(){n.positionContainer()}),this.mapResizeEventHandler=Microsoft.Maps.Events.addHandler(t,"mapresize",function(){n.positionContainer()}),this.onMarkerReady&&this.onMarkerReady()):(o.removeChild(this.pinContainer),Microsoft.Maps.Events.removeHandler(this.viewChangeEventHandler),Microsoft.Maps.Events.removeHandler(this.viewChangedEventHandler),Microsoft.Maps.Events.removeHandler(this.mapResizeEventHandler))}},{key:"positionContainer",value:function e(){if(this.map){var t=this.map.tryLocationToPixel(new Microsoft.Maps.Location(this.position.lat,this.position.lng),Microsoft.Maps.PixelReference.control);this.pinContainer.style.left="".concat(t.x,"px"),this.pinContainer.style.top="".concat(t.y,"px");var o=this.zIndexOffset+Math.round(t.y);this.pinContainer.style.zIndex=o.toString()}}},{key:"setZIndexOffset",value:function e(o){Object(A.a)(k()(t.prototype),"setZIndexOffset",this).call(this,o),this.positionContainer()}}]),t}(U),se=function e(t,o,n,i,a){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(2*t,'" height="').concat(2*t,'">\n    <circle cx="').concat(t,'" cy="').concat(t,'" r="').concat(t-i,'" stroke="').concat(n,'" \n      stroke-width="').concat(i,'" fill="').concat(o,'" fill-opacity="').concat(a,'" stroke-opacity="').concat(a,'"\n    /></svg>'),anchor:new Microsoft.Maps.Point(t,t)}},le=function e(t,o,n){return n/function e(t,o){return 156543.04*Math.abs(Math.cos(t))/Math.pow(2,o)}(t,o)},ue=function(e){function t(e,o){var n;r()(this,t),n=g()(this,k()(t).call(this,e)),c()(b()(b()(n)),"map",void 0),c()(b()(b()(n)),"pushPin",void 0),c()(b()(b()(n)),"viewChangeHandler",void 0),n.map=o;var i=new Microsoft.Maps.Location(n.position.lat,n.position.lng);return n.pushPin=new Microsoft.Maps.Pushpin(i,se(le(n.position.lat,o.getZoom(),n.radius),n.fillColor,n.strokeColor,n.strokeWidth,n.opacity)),n.map.entities.push(n.pushPin),n.viewChangeHandler=Microsoft.Maps.Events.addHandler(n.map,"viewchangeend",function(){n.updateCircleStyle()}),n}return M()(t,e),l()(t,[{key:"removeFromMap",value:function e(){this.map.entities.remove(this.pushPin),Microsoft.Maps.Events.removeHandler(this.viewChangeHandler)}},{key:"setPosition",value:function e(t){this.position=t;var o=new Microsoft.Maps.Location(this.position.lat,this.position.lng);this.pushPin.setLocation(o)}},{key:"setRadius",value:function e(t){this.radius=t,this.updateCircleStyle()}},{key:"setOpacity",value:function e(t){this.opacity=t,this.updateCircleStyle()}},{key:"setFillColor",value:function e(t){this.fillColor=t,this.updateCircleStyle()}},{key:"setStrokeColor",value:function e(t){this.strokeColor=t,this.updateCircleStyle()}},{key:"setStrokeWidth",value:function e(t){this.strokeWidth=t,this.updateCircleStyle()}},{key:"updateCircleStyle",value:function e(){var t=le(this.position.lat,this.map.getZoom(),this.radius),o=se(t,this.fillColor,this.strokeColor,this.strokeWidth,this.opacity);this.pushPin.setOptions(o)}}]),t}(G),ce=function(e){function t(e,o){var n;r()(this,t),n=g()(this,k()(t).call(this,e)),c()(b()(b()(n)),"map",void 0),c()(b()(b()(n)),"polygon",void 0),c()(b()(b()(n)),"viewChangeHandler",void 0),c()(b()(b()(n)),"onClickHandler",void 0),c()(b()(b()(n)),"onMouseoverHandler",void 0),c()(b()(b()(n)),"onMouseOutHandler",void 0),c()(b()(b()(n)),"rgbaStrokeColor",void 0),c()(b()(b()(n)),"rgbaFillColor",void 0),n.map=o;var i=n.coords.map(function(e){return new Microsoft.Maps.Location(e.lat,e.lng)});return n.updateFillColor(),n.updateStrokeColor(),n.polygon=new Microsoft.Maps.Polygon(i,{fillColor:n.rgbaFillColor,strokeColor:n.rgbaStrokeColor,strokeThickness:n.strokeWidth}),n.onClick&&(n.onClickHandler=Microsoft.Maps.Events.addHandler(n.polygon,"click",n.onClick)),n.onMouseOver&&(n.onMouseoverHandler=Microsoft.Maps.Events.addHandler(n.polygon,"mouseover",n.onMouseOver)),n.onMouseOut&&(n.onMouseOutHandler=Microsoft.Maps.Events.addHandler(n.polygon,"mouseout",n.onMouseOut)),o.entities.push(n.polygon),n.viewChangeHandler=Microsoft.Maps.Events.addHandler(n.map,"viewchangeend",function(){n.updatePolygonStyle()}),n}return M()(t,e),l()(t,[{key:"removeFromMap",value:function e(){this.map.entities.remove(this.polygon),Microsoft.Maps.Events.removeHandler(this.viewChangeHandler),this.onClickHandler&&Microsoft.Maps.Events.removeHandler(this.onClickHandler),this.onMouseoverHandler&&Microsoft.Maps.Events.removeHandler(this.onMouseoverHandler),this.onMouseOutHandler&&Microsoft.Maps.Events.removeHandler(this.onMouseOutHandler)}},{key:"setOnClickInteraction",value:function e(t){Microsoft.Maps.Events.removeHandler(this.onClickHandler),this.onClick=t,this.onClick&&(this.onClickHandler=Microsoft.Maps.Events.addHandler(this.polygon,"click",this.onClick))}},{key:"setOnMouseOverInteraction",value:function e(t){Microsoft.Maps.Events.removeHandler(this.onMouseoverHandler),this.onMouseOver=t,this.onMouseOver&&(this.onMouseoverHandler=Microsoft.Maps.Events.addHandler(this.polygon,"mouseover",this.onMouseOver))}},{key:"setOnMouseOutInteraction",value:function e(t){Microsoft.Maps.Events.removeHandler(this.onMouseOutHandler),this.onMouseOut=t,this.onMouseOut&&(this.onMouseOutHandler=Microsoft.Maps.Events.addHandler(this.polygon,"mouseout",this.onMouseOut))}},{key:"setPolygon",value:function e(t){this.coords=t;var o=this.coords.map(function(e){return new Microsoft.Maps.Location(e.lat,e.lng)});this.polygon.setLocations(o)}},{key:"setOpacity",value:function e(t){this.opacity=t,this.updateFillColor(),this.updatePolygonStyle()}},{key:"setStrokeOpacity",value:function e(t){this.strokeOpacity=t,this.updateStrokeColor(),this.updatePolygonStyle()}},{key:"setFillColor",value:function e(t){this.fillColor=t,this.updateFillColor(),this.updatePolygonStyle()}},{key:"setStrokeColor",value:function e(t){this.strokeColor=t,this.updateStrokeColor(),this.updatePolygonStyle()}},{key:"setStrokeWidth",value:function e(t){this.strokeWidth=t,this.updatePolygonStyle()}},{key:"updateFillColor",value:function e(){this.rgbaFillColor=Microsoft.Maps.Color.fromHex(this.fillColor),this.rgbaFillColor.a=this.opacity}},{key:"updateStrokeColor",value:function e(){this.rgbaStrokeColor=Microsoft.Maps.Color.fromHex(this.strokeColor),this.rgbaStrokeColor.a=this.strokeOpacity}},{key:"updatePolygonStyle",value:function e(){var t={fillColor:this.rgbaFillColor,strokeColor:this.rgbaStrokeColor,strokeWidth:this.strokeWidth};this.polygon.setOptions(t)}}]),t}(X),pe={key:"AtNq3Ps1jJbLXvagAsAA2Xp3qUpfXLyZbJxgwDWM3kjrQoZKnOWwULXDn9howX8s"},he=function(e){function t(e,o){var n;r()(this,t),n=g()(this,k()(t).call(this,e,o)),c()(b()(b()(n)),"map",void 0),c()(b()(b()(n)),"oldZoom",void 0),c()(b()(b()(n)),"oldCenter",void 0),c()(b()(b()(n)),"hasPanEventAttached",!1),c()(b()(b()(n)),"markerContainers",[]),c()(b()(b()(n)),"circleOverlays",[]),c()(b()(b()(n)),"polygonOverlays",[]),c()(b()(b()(n)),"markerLayer",void 0),c()(b()(b()(n)),"developerBeganMovement",!1);var i={credentials:pe.key,center:new Microsoft.Maps.Location(o.center.lat,o.center.lng),mapTypeId:Microsoft.Maps.MapTypeId.road,zoom:o.zoom,minZoom:o.minZoom,maxZoom:o.maxZoom,showMapTypeSelector:!1,showDashboard:!1,showScalebar:!1,disableScrollWheelZoom:!o.scrollWheelZoom,disableKeyboardInput:!0,enableClickableLogo:!1,enableSearchLogo:!1,useInertia:!1};return n.map=new Microsoft.Maps.Map(e,i),n.markerLayer=document.createElement("div"),n.markerLayer.style.zIndex="1",n.markerLayer.style.position="absolute",e.appendChild(n.markerLayer),n.oldZoom=n.getZoom(),n.oldCenter=n.getCenter(),n.bindMapEvents(),n}return M()(t,e),l()(t,[{key:"setCenter",value:function e(t,o,n){this.developerBeganMovement=!n;var i=new Microsoft.Maps.Location(t.lat,t.lng);o?this.map.setView({center:i,animate:!0,zoom:o}):this.map.setView({center:i,animate:!0})}},{key:"setZoom",value:function e(t,o){this.developerBeganMovement=!o,this.map.setView({zoom:t,animate:!0})}},{key:"setBounds",value:function e(t,o,n){this.developerBeganMovement=!n;var i=0;o&&(i=Math.max(i,o.top),i=Math.max(i,o.bottom),i=Math.max(i,o.left),i=Math.max(i,o.right));var a=Microsoft.Maps.LocationRect.fromEdges(t.northeast.lat,t.southwest.lng,t.southwest.lat,t.northeast.lng);this.map.setView({bounds:a,padding:i})}},{key:"getCenter",value:function e(){var t=this.map.getCenter();return new h(t.latitude,t.longitude)}},{key:"getZoom",value:function e(){return this.map.getZoom()}},{key:"getBounds",value:function e(){var t=this.map.getBounds();return new v(new h(t.getSouth(),t.getWest()),new h(t.getNorth(),t.getEast()))}},{key:"resize",value:function e(){Microsoft.Maps.Events.invoke(this.map,"viewchangeend")}},{key:"createMarkerContainer",value:function e(t){var o=new re(t);return this.markerContainers.push(o),o.setMap(this.map,this.markerLayer),o}},{key:"removeMarkerContainer",value:function e(t){var o=this.markerContainers.indexOf(t);o>-1&&(t.setMap(null,this.markerLayer),this.markerContainers.splice(o,1))}},{key:"addCircleOverlay",value:function e(t){var o=new ue(t,this.map);return this.circleOverlays.push(o),o}},{key:"removeCircleOverlay",value:function e(t){var o=this.circleOverlays.indexOf(t);o>-1&&(t.removeFromMap(),this.circleOverlays.splice(o,1))}},{key:"addPolygonOverlay",value:function e(t){var o=new ce(t,this.map);return this.polygonOverlays.push(o),o}},{key:"removePolygonOverlay",value:function e(t){var o=this.polygonOverlays.indexOf(t);o>-1&&(t.removeFromMap(),this.polygonOverlays.splice(o,1))}},{key:"bindMapEvents",value:function e(){var t=this;Microsoft.Maps.Events.addHandler(this.map,"click",function(e){t.events.emit("click",{map:t,position:new h(e.location.latitude,e.location.longitude)})}),Microsoft.Maps.Events.addOne(this.map,"viewchangestart",function(){t.events.emit("renderComplete",{map:t})}),Microsoft.Maps.Events.addHandler(this.map,"viewchangeend",function(){var e=!t.developerBeganMovement;t.developerBeganMovement=!1,t.isZoomTheSameAfterEvent()||t.events.emit("zoomChange",{map:t,position:t.getCenter(),zoom:t.getZoom(),userGesture:e}),t.events.emit("centerChange",{map:t,position:t.getCenter(),zoom:t.getZoom(),userGesture:e})}),Microsoft.Maps.Events.addHandler(this.map,"viewchangestart",function(){t.oldZoom=t.getZoom(),t.oldCenter=t.getCenter(),t.hasPanEventAttached||(t.hasPanEventAttached=!0,Microsoft.Maps.Events.addOne(t.map,"viewchange",function(){t.developerBeganMovement||t.isCenterTheSameAfterEvent()||!t.isZoomTheSameAfterEvent()||t.events.emit("panStart",{map:t,position:t.getCenter(),zoom:t.getZoom()}),t.hasPanEventAttached=!1}))})}},{key:"isZoomTheSameAfterEvent",value:function e(){return this.oldZoom===this.getZoom()}},{key:"isCenterTheSameAfterEvent",value:function e(){if(!this.oldCenter)return!1;var t=this.getCenter(),o=this.oldCenter.lat===t.lng,n=this.oldCenter.lat===t.lng;return o&&n}}]),t}(_),ve={domain:"www.bing.com"},de=function e(){var t=T("ta.maps.provider.bing","loadCallbackList");t&&t.forEach(function(e){e()}),B([],"ta.maps.provider.bing","loadCallbackList")},me=function(e){function t(){var e;return r()(this,t),(e=g()(this,k()(t).call(this,he))).configureLibrary(ve),e}return M()(t,e),l()(t,[{key:"isLibraryLoaded",value:function e(){return window.Microsoft&&window.Microsoft.Maps}},{key:"loadLibrary",value:function e(o){if(Object(A.a)(k()(t.prototype),"loadLibrary",this).call(this,o))return!0;if(T("ta.maps.provider.bing","bingMapLibraryLoadedCallback")){var n=T("ta.maps.provider.bing","loadCallbackList");return n&&n.push(o),!1}B([o],"ta.maps.provider.bing","loadCallbackList"),window.bingMapLibraryLoadedCallback=de;var i="//".concat(this.getLibraryConfig().domain,"/api/maps/mapcontrol?setMkt=zh-CN&callback=").concat("bingMapLibraryLoadedCallback");return Object(H.importScript)(i),!1}}]),t}(D),fe=function(e){function t(e,o){var n;r()(this,t),n=g()(this,k()(t).call(this,e)),c()(b()(b()(n)),"map",void 0),c()(b()(b()(n)),"autonaviMarker",void 0),c()(b()(b()(n)),"checkForParent",function(){n.pinContainer.parentElement?n.onMarkerReady&&n.onMarkerReady():n.map&&setTimeout(n.checkForParent,1)}),c()(b()(b()(n)),"positionMarker",function(){if(n.map){var e=n.map.lngLatToContainer(new AMap.LngLat(n.position.lng,n.position.lat)),t=n.zIndexOffset+Math.round(e.y);n.autonaviMarker.setzIndex(t)}}),n.map=o;var i={map:n.map,position:new AMap.LngLat(e.position.lng,e.position.lat),content:n.pinContainer,offset:new AMap.Pixel(0,0),clickable:!0};return n.map.on("mapmove",n.positionMarker),n.autonaviMarker=new AMap.Marker(i),n.pinContainer.addEventListener("click",function(e){e.isMarkerClick=!0}),n.map.add(n.autonaviMarker),n.pinContainer.parentElement||setTimeout(n.checkForParent,1),n}return M()(t,e),l()(t,[{key:"setPosition",value:function e(t){this.position=t,this.autonaviMarker.setPosition(new AMap.LngLat(t.lng,t.lat))}},{key:"setMap",value:function e(t){this.map&&!t&&this.map.off("mapmove",this.positionMarker),this.map=t,this.autonaviMarker.setMap(t)}},{key:"setZIndexOffset",value:function e(o){Object(A.a)(k()(t.prototype),"setZIndexOffset",this).call(this,o),this.positionMarker()}}]),t}(U),ge=function(e){function t(e,o){var n;r()(this,t),n=g()(this,k()(t).call(this,e)),c()(b()(b()(n)),"map",void 0),c()(b()(b()(n)),"circle",void 0),n.map=o;var i=new AMap.LngLat(n.position.lng,n.position.lat);return n.circle=new AMap.Circle({center:i,radius:e.radius,fillColor:e.fillColor,fillOpacity:e.opacity,strokeColor:e.strokeColor,strokeWeight:e.strokeWidth,strokeOpacity:e.opacity}),n.map.add(n.circle),n}return M()(t,e),l()(t,[{key:"removeFromMap",value:function e(){this.map.remove(this.circle)}},{key:"setPosition",value:function e(t){this.position=t;var o=new AMap.LngLat(this.position.lng,this.position.lat);this.circle.setCenter(o)}},{key:"setRadius",value:function e(t){this.radius=t,this.circle.setRadius(t)}},{key:"setOpacity",value:function e(t){this.opacity=t,this.updateCircleStyle()}},{key:"setFillColor",value:function e(t){this.fillColor=t,this.updateCircleStyle()}},{key:"setStrokeColor",value:function e(t){this.strokeColor=t,this.updateCircleStyle()}},{key:"setStrokeWidth",value:function e(t){this.strokeWidth=t,this.updateCircleStyle()}},{key:"updateCircleStyle",value:function e(){var t=new AMap.LngLat(this.position.lng,this.position.lat);this.circle.setOptions({center:t,radius:this.radius,fillColor:this.fillColor,fillOpacity:this.opacity,strokeColor:this.strokeColor,strokeWeight:this.strokeWidth,strokeOpacity:this.opacity})}}]),t}(G),ye=function(e){function t(e,o){var n;r()(this,t),n=g()(this,k()(t).call(this,e)),c()(b()(b()(n)),"map",void 0),c()(b()(b()(n)),"polygon",void 0),n.map=o;var i=n.coords.map(function(e){return new AMap.LngLat(e.lng,e.lat)});return n.polygon=new AMap.Polygon({path:i,fillColor:e.fillColor,fillOpacity:e.opacity,strokeColor:e.strokeColor,strokeWeight:e.strokeWidth,strokeOpacity:e.strokeOpacity}),n.onClick&&AMap.event.addListener(n.polygon,"click",n.onClick),n.onMouseOver&&AMap.event.addListener(n.polygon,"mouseover",n.onMouseOver),n.onMouseOut&&AMap.event.addListener(n.polygon,"mouseout",n.onMouseOut),n.map.add(n.polygon),n}return M()(t,e),l()(t,[{key:"removeFromMap",value:function e(){this.map.remove(this.polygon)}},{key:"setOnClickInteraction",value:function e(t){AMap.event.removeListener(this.polygon,"click",this.onClick),this.onClick=t,this.onClick&&AMap.event.addListener(this.polygon,"click",this.onClick)}},{key:"setOnMouseOverInteraction",value:function e(t){AMap.event.removeListener(this.polygon,"mouseover",this.onMouseOver),this.onMouseOver=t,this.onMouseOver&&AMap.event.addListener(this.polygon,"mouseover",this.onMouseOver)}},{key:"setOnMouseOutInteraction",value:function e(t){AMap.event.removeListener(this.polygon,"mouseout",this.onMouseOut),this.onMouseOut=t,this.onMouseOut&&AMap.event.addListener(this.polygon,"mouseout",this.onMouseOut)}},{key:"setPolygon",value:function e(t){this.coords=t;var o=this.coords.map(function(e){return new AMap.LngLat(e.lng,e.lat)});this.polygon.setPath(o)}},{key:"setOpacity",value:function e(t){this.opacity=t,this.updatePolygonStyle()}},{key:"setFillColor",value:function e(t){this.fillColor=t,this.updatePolygonStyle()}},{key:"setStrokeColor",value:function e(t){this.strokeColor=t,this.updatePolygonStyle()}},{key:"setStrokeWidth",value:function e(t){this.strokeWidth=t,this.updatePolygonStyle()}},{key:"setStrokeOpacity",value:function e(t){this.strokeOpacity=t,this.updatePolygonStyle()}},{key:"updatePolygonStyle",value:function e(){var t=this.coords.map(function(e){return new AMap.LngLat(e.lng,e.lat)});this.polygon.setOptions({path:t,fillColor:this.fillColor,fillOpacity:this.opacity,strokeColor:this.strokeColor,strokeWeight:this.strokeWidth,strokeOpacity:this.strokeOpacity})}}]),t}(X),ke=function(e){function t(e,o){var n;r()(this,t),n=g()(this,k()(t).call(this,e,o)),c()(b()(b()(n)),"map",void 0),c()(b()(b()(n)),"markerContainers",[]),c()(b()(b()(n)),"circleOverlays",[]),c()(b()(b()(n)),"polygonOverlays",[]),c()(b()(b()(n)),"clickPosition",null),c()(b()(b()(n)),"touchEvents",!1),c()(b()(b()(n)),"developerBeganMovement",!1),c()(b()(b()(n)),"moveEndWillFire",!1),c()(b()(b()(n)),"zoomChanged",!1),c()(b()(b()(n)),"moveEndTimeout",null),c()(b()(b()(n)),"handleMoveEnd",function(){var e=!n.developerBeganMovement;n.developerBeganMovement=!1,n.zoomChanged&&(n.zoomChanged=!1,n.events.emit("zoomChange",{map:b()(b()(n)),position:n.getCenter(),zoom:n.getZoom(),userGesture:e})),n.events.emit("centerChange",{map:b()(b()(n)),position:n.getCenter(),zoom:n.getZoom(),userGesture:e})});var i={scrollWheel:o.scrollWheelZoom,resizeEnable:!0,zoom:o.zoom,zooms:[o.minZoom,o.maxZoom],center:new AMap.LngLat(o.center.lng,o.center.lat)};n.map=new AMap.Map(e,i),n.map.on("complete",function(){n.events.emit("renderComplete",{map:b()(b()(n))})}),e.addEventListener("touchstart",function(){n.touchEvents=!0});var a=function e(t){n.clickPosition&&!t.isMarkerClick&&n.events.emit("click",{map:b()(b()(n)),position:n.clickPosition}),n.clickPosition=null,n.touchEvents=!1};return e.addEventListener("click",function(e){n.touchEvents||a(e)}),e.addEventListener("touchend",a),n.map.on("click",function(e){n.clickPosition=new h(e.lnglat.lat,e.lnglat.lng)}),n.map.on("zoomchange",function(){n.zoomChanged=!0,n.scheduleMoveEnd()}),n.map.on("dragstart",function(){n.developerBeganMovement||n.events.emit("panStart",{map:b()(b()(n)),position:n.getCenter(),zoom:n.getZoom()})}),n.map.on("movestart",function(){n.moveEndWillFire=!0}),n.map.on("moveend",function(){n.moveEndWillFire=!1,n.scheduleMoveEnd()}),n}return M()(t,e),l()(t,[{key:"scheduleMoveEnd",value:function e(){this.moveEndTimeout&&clearTimeout(this.moveEndTimeout),this.moveEndTimeout=setTimeout(this.handleMoveEnd,0)}},{key:"setCenter",value:function e(t,o,n){this.developerBeganMovement=!n,o?this.map.setZoomAndCenter(o,new AMap.LngLat(t.lng,t.lat)):this.map.setCenter(new AMap.LngLat(t.lng,t.lat))}},{key:"setZoom",value:function e(t,o){this.developerBeganMovement=!o,this.map.setZoom(t)}},{key:"setBounds",value:function e(t,o,n){this.developerBeganMovement=!n;var i=new AMap.Bounds(new AMap.LngLat(t.southwest.lng,t.southwest.lat),new AMap.LngLat(t.northeast.lng,t.northeast.lat));this.map.setBounds(i)}},{key:"getCenter",value:function e(){var t=this.map.getCenter();return new h(t.lat,t.lng)}},{key:"getZoom",value:function e(){return this.map.getZoom()}},{key:"getBounds",value:function e(){var t=this.map.getBounds(),o=t.getSouthWest(),n=t.getNorthEast();return new v(new h(o.getLat(),o.getLng()),new h(n.getLat(),n.getLng()))}},{key:"resize",value:function e(){AMap.event.trigger(this.map,"complete")}},{key:"createMarkerContainer",value:function e(t){var o=new fe(t,this.map);return this.markerContainers.push(o),o.setMap(this.map),o}},{key:"removeMarkerContainer",value:function e(t){var o=this.markerContainers.indexOf(t);o>-1&&(t.setMap(null),this.markerContainers.splice(o,1))}},{key:"addCircleOverlay",value:function e(t){var o=new ge(t,this.map);return this.circleOverlays.push(o),o}},{key:"removeCircleOverlay",value:function e(t){var o=this.circleOverlays.indexOf(t);o>-1&&(t.removeFromMap(),this.circleOverlays.splice(o,1))}},{key:"addPolygonOverlay",value:function e(t){var o=new ye(t,this.map);return this.polygonOverlays.push(o),o}},{key:"removePolygonOverlay",value:function e(t){var o=this.polygonOverlays.indexOf(t);o>-1&&(t.removeFromMap(),this.polygonOverlays.splice(o,1))}}]),t}(_),Ce={domain:"webapi.amap.com",version:"1.4.10",key:"47e0349a41e8b5f3870f9aae11275ef8"},Me=function e(){var t=T("ta.maps.provider.autonavi","loadCallbackList");t&&t.forEach(function(e){e()}),B([],"ta.maps.provider.autonavi","loadCallbackList")},Oe=function(e){function t(){var e;return r()(this,t),(e=g()(this,k()(t).call(this,ke))).configureLibrary(Ce),e}return M()(t,e),l()(t,[{key:"isLibraryLoaded",value:function e(){return!!window.AMap}},{key:"loadLibrary",value:function e(o){if(Object(A.a)(k()(t.prototype),"loadLibrary",this).call(this,o))return!0;if(T("ta.maps.provider.autonavi","autonaviMapLibraryLoadedCallback")){var n=T("ta.maps.provider.autonavi","loadCallbackList");return n&&n.push(o),!1}B([o],"ta.maps.provider.autonavi","loadCallbackList"),window.autonaviMapLibraryLoadedCallback=Me;var i=this.getLibraryConfig(),a="https://".concat(i.domain,"/maps?v=").concat(i.version,"&key=").concat(i.key,"&callback=").concat("autonaviMapLibraryLoadedCallback");return Object(H.importScript)(a),!1}}]),t}(D),be=function(e){function t(e,o){var n;return r()(this,t),n=g()(this,k()(t).call(this,e)),c()(b()(b()(n)),"addedToMap",void 0),o.appendChild(n.pinContainer),n.addedToMap=!0,n}return M()(t,e),l()(t,[{key:"remove",value:function e(){this.addedToMap=!1}}]),t}(U),we=function(e){function t(e){var o;return r()(this,t),o=g()(this,k()(t).call(this,e)),c()(b()(b()(o)),"addedToMap",!1),o.addedToMap=!0,o}return M()(t,e),l()(t,[{key:"removeFromMap",value:function e(){this.addedToMap=!1}}]),t}(G),Le=function(e){function t(e){var o;return r()(this,t),o=g()(this,k()(t).call(this,e)),c()(b()(b()(o)),"addedToMap",!1),o.addedToMap=!0,o}return M()(t,e),l()(t,[{key:"removeFromMap",value:function e(){this.addedToMap=!1}}]),t}(X),Pe=function(e){function t(e){var o;return r()(this,t),o=g()(this,k()(t).call(this,null,e)),c()(b()(b()(o)),"markerContainers",[]),c()(b()(b()(o)),"circleOverlays",[]),c()(b()(b()(o)),"polygonOverlays",[]),c()(b()(b()(o)),"mockMapContainer",void 0),c()(b()(b()(o)),"center",void 0),c()(b()(b()(o)),"zoom",void 0),c()(b()(b()(o)),"resizeCalled",!1),o.center=e.center||new h(0,0),o.zoom=e.zoom,o.mockMapContainer=document.createElement("div"),o}return M()(t,e),l()(t,[{key:"once",value:function e(o,n){Object(A.a)(k()(t.prototype),"once",this).call(this,o,n),"renderComplete"===o&&this.simulateRenderComplete()}},{key:"simulateRenderComplete",value:function e(){this.events.emit("renderComplete",{map:this})}},{key:"simulateClick",value:function e(t){this.events.emit("click",{map:this,position:t})}},{key:"simulateUserPan",value:function e(){this.events.emit("panStart",{map:this,position:this.getCenter(),zoom:this.getZoom()}),this.center=new h(this.center.lat+Math.random()-.5,this.center.lng+Math.random()-.5),this.events.emit("centerChange",{map:this,position:this.center,zoom:this.zoom,userGesture:!0})}},{key:"simulateUserZoom",value:function e(){this.zoom=this.zoom+Math.random()<.5?1:-1,this.events.emit("zoomChange",{map:this,position:this.center,zoom:this.zoom,userGesture:!0}),this.events.emit("centerChange",{map:this,position:this.center,zoom:this.zoom,userGesture:!0})}},{key:"setCenter",value:function e(t,o,n){this.center=t,this.events.emit("centerChange",{map:this,position:this.center,zoom:this.zoom,userGesture:n||!1}),o&&this.setZoom(o)}},{key:"setZoom",value:function e(t,o){this.zoom=t,this.events.emit("zoomChange",{map:this,position:this.center,zoom:this.zoom,userGesture:o||!1}),this.events.emit("centerChange",{map:this,position:this.center,zoom:this.zoom,userGesture:o||!1})}},{key:"setBounds",value:function e(t,o,n){this.center=t.getCenter(),this.zoom=15,this.events.emit("zoomChange",{map:this,position:this.center,zoom:this.zoom,userGesture:n||!1}),this.events.emit("centerChange",{map:this,position:this.center,zoom:this.zoom,userGesture:n||!1})}},{key:"panIntoView",value:function e(t,o,n){var i=!t.equals(this.center);return i&&this.setCenter(t,void 0,n),i}},{key:"getCenter",value:function e(){return this.center}},{key:"getZoom",value:function e(){return this.zoom}},{key:"getBounds",value:function e(){return new v(new h(this.center.lat-.1,this.center.lng-.1),new h(this.center.lat+.1,this.center.lng+.1))}},{key:"resize",value:function e(){this.resizeCalled=!0}},{key:"createMarkerContainer",value:function e(t){var o=new be(t,this.mockMapContainer);return this.markerContainers.push(o),o}},{key:"removeMarkerContainer",value:function e(t){var o=this.markerContainers.indexOf(t);o>-1&&(t.remove(),this.markerContainers.splice(o,1))}},{key:"addCircleOverlay",value:function e(t){var o=new we(t);return this.circleOverlays.push(o),o}},{key:"removeCircleOverlay",value:function e(t){var o=this.circleOverlays.indexOf(t);o>-1&&(t.removeFromMap(),this.circleOverlays.splice(o,1))}},{key:"addPolygonOverlay",value:function e(t){var o=new Le(t);return this.polygonOverlays.push(o),o}},{key:"removePolygonOverlay",value:function e(t){var o=this.polygonOverlays.indexOf(t);o>-1&&(t.removeFromMap(),this.polygonOverlays.splice(o,1))}}]),t}(_),xe=function(e){function t(){return r()(this,t),g()(this,k()(t).call(this,Pe))}return M()(t,e),l()(t,[{key:"isLibraryLoaded",value:function e(){return!0}}]),t}(D),Ee=(n={},c()(n,i.MapProviderGoogle,$),c()(n,i.MapProviderCitymaps,ae),c()(n,i.MapProviderBing,me),c()(n,i.MapProviderAutonavi,Oe),c()(n,"mock",xe),n),Se=function(e){function t(){var e,o;r()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o=g()(this,(e=k()(t)).call.apply(e,[this].concat(i))),c()(b()(b()(o)),"state",{loadedMapProvider:void 0,loadedMapFactory:void 0,mapInterface:void 0}),c()(b()(b()(o)),"componentMounted",!1),c()(b()(b()(o)),"createMapInterface",function(e){var t=o.state,n=t.loadedMapFactory,i=t.loadedMapProvider;if(!o.state.mapInterface&&i&&n&&e){var a=new(n.getInterfaceClass())(e,Object.assign({},o.props.interfaceProps,{config:n.getLibraryConfig(),locale:o.props.locale,isRtl:o.props.isRtl,userAgentCategory:o.props.userAgentCategory}));o.setState({mapInterface:a}),o.props.onInterfaceLoaded(a,i)}}),o}return M()(t,e),l()(t,[{key:"componentDidMount",value:function e(){this.componentMounted=!0,this.loadMap()}},{key:"componentDidUpdate",value:function e(){this.createMapInterface(this.props.containerNode)}},{key:"componentWillUnmount",value:function e(){this.componentMounted=!1}},{key:"loadMap",value:function e(){var t=this;(function e(t){if("mock"===t.forceMapProvider){var o={mapProvider:"mock",mapConfig:{}};return new Promise(function(e){return e({json:function e(){return new Promise(function(e){return e(o)})}})})}return fetch("/data/1.0/maps/provider?".concat(function e(t){var o={};return Object.keys(t).forEach(function(e){null!==t[e]&&void 0!==t[e]&&(o[e]=t[e])}),new URLSearchParams(o)}({servletName:t.servlet,locale:t.locale,geoId:t.geoId,forceMapProvider:t.forceMapProvider}).toString()),{credentials:"same-origin"})})(this.props).then(function(e){return e.json()}).then(function(e){if(t.componentMounted){var o=function e(t){var o=t?Ee[t]:null;if(!o)throw new Error("Unsupported map provider: ".concat(t||"null"));return new o}(e.mapProvider);o.configureLibrary(m()({lang:t.props.locale},e.mapConfig));var n=o.isLibraryLoaded();o.loadLibrary(function(){n||E()({module:"map_view",action:"load",context:e.mapProvider||""}),t.componentMounted&&t.setState({loadedMapFactory:o,loadedMapProvider:e.mapProvider})})}})}},{key:"render",value:function e(){return null}}]),t}(w.PureComponent),Ie=Object(Z.connect)(function(e,t){return m()({isRtl:e.i18n.isRtl,userAgentCategory:e.meta.device.userAgentCategory,locale:e.i18n.locale,servlet:e.meta.initialServletName,geoId:e.page.geoId},t)})(Se),ze=function(e){function t(){var e,o;r()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o=g()(this,(e=k()(t)).call.apply(e,[this].concat(i))),c()(b()(b()(o)),"state",{mapInterface:null,mapProvider:null}),c()(b()(b()(o)),"onMapInterfaceLoaded",function(e,t){e.once("renderComplete",function(){o.props.onLoad&&o.componentMounted&&e&&o.props.onLoad({map:e})}),e.on("click",function(e){o.props.onClick&&o.props.onClick(e)}),e.on("centerChange",function(e){o.props.onCenterChange&&o.componentMounted&&o.props.onCenterChange(e)}),e.on("panStart",function(e){E()({module:"map_move",action:"pan",context:e.zoom.toString(10)}),o.props.onPanStart&&o.props.onPanStart(e)}),e.on("renderComplete",function(e){o.props.onRenderComplete&&o.props.onRenderComplete(e)});var n=o.props.initialZoom;e.on("zoomChange",function(e){E()({module:"map_move",action:e.zoom>n?"zoom_in":"zoom_out",context:e.zoom.toString(10)}),n=e.zoom,o.props.onZoomChange&&o.props.onZoomChange(e)}),o.props.initialBounds&&e.setBounds(o.props.initialBounds),o.setState({mapInterface:e,mapProvider:t})}),c()(b()(b()(o)),"setContainerRef",function(e){o.containerRef||(o.containerRef=e,o.forceUpdate())}),c()(b()(b()(o)),"handleResize",function(){o.state.mapInterface&&o.state.mapInterface.resize()}),c()(b()(b()(o)),"componentMounted",!1),c()(b()(b()(o)),"containerRef",null),o}return M()(t,e),l()(t,[{key:"componentDidMount",value:function e(){this.componentMounted=!0,E()({module:"map_view",action:"open",context:this.containerRef?"".concat(this.containerRef.offsetWidth):"0"})}},{key:"componentWillUnmount",value:function e(){this.componentMounted=!1;var t=this.state.mapInterface;t&&t.unmount(),E()({module:"map_view",action:"close"})}},{key:"render",value:function e(){var t=this.state,o=t.mapInterface,n=t.mapProvider,i=this.props,a=i.children,r=i.style,s=i.className;return w.createElement("div",{className:s,style:m()({position:"relative"},r,{touchAction:"none"})},w.createElement(P.a,{callback:this.handleResize}),w.createElement(Ie,{interfaceProps:{zoom:this.props.initialZoom,center:this.props.initialCenter,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,onLoad:this.props.onLoad,scrollWheelZoom:this.props.scrollWheelZoom},containerNode:this.containerRef,onInterfaceLoaded:this.onMapInterfaceLoaded,forceMapProvider:this.props.forceMapProvider}),w.createElement("div",{className:"map_container",style:{width:"100%",height:"100%",position:"absolute",zIndex:0,overflow:"hidden"},ref:this.setContainerRef}),w.createElement(I,{value:{map:o,mapProvider:n||""}},a))}}]),t}(w.PureComponent);c()(ze,"defaultProps",{className:"",initialCenter:new h(0,0),initialZoom:13,initialBounds:null,minZoom:2,maxZoom:19,scrollWheelZoom:!0,children:[],style:{},onLoad:null,onClick:null,onPanStart:null,onCenterChange:null,onZoomChange:null,onRenderComplete:null});var Ze=ze,Ae=function e(t){var o=20037508.34*t.lng/180,n=Math.log(Math.tan((90+t.lat)*Math.PI/360))/(Math.PI/180);return[o,n=20037508.34*n/180]},He=function e(t){var o=180*t[0]/20037508.34,n=180*t[1]/20037508.34;return n=Math.atan(Math.exp(n*(Math.PI/180)))/(Math.PI/360)-90,new h(n,o)},We={getBoundsZoom:function e(t,o,n){var i=Ae(t.southwest),a=Ae(t.northeast),r=a[0]-i[0],s=a[1]-i[1],l=Math.max(r/o,s/n),u=Math.floor(function e(t){return Math.log2(156543.03390625/t)}(l));return isFinite(u)?u:void 0},getPaddedBounds:function e(t,o,n){var i=Ae(t),a=function e(t){return 156543.03390625/Math.pow(2,t)}(o),r=a*n.left,s=a*n.right,l=a*n.top,u=a*n.bottom,c=[i[0]-r,i[1]-u],p=[i[0]+s,i[1]+l];return new v(He(c),He(p))}},Be=o("@babel/runtime/helpers/esm/extends"),Te=o.n(Be),De=function(e){function t(){var e,o;r()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o=g()(this,(e=k()(t)).call.apply(e,[this].concat(i))),c()(b()(b()(o)),"state",{circleOverlay:null}),o}return M()(t,e),l()(t,[{key:"componentDidMount",value:function e(){this.handleProps(this.props)}},{key:"componentDidUpdate",value:function e(){this.handleProps(this.props)}},{key:"componentWillUnmount",value:function e(){var t=this.props.map,o=this.state.circleOverlay;t&&o&&(t.removeCircleOverlay(o),this.setState({circleOverlay:null}))}},{key:"handleProps",value:function e(t){var o=this.state.circleOverlay,n=t.map;n&&(o||(o=n.addCircleOverlay(this.props),this.setState({circleOverlay:o})),o.setPosition(t.position),o.setRadius(t.radius),o.setFillColor(t.fillColor),o.setStrokeColor(t.strokeColor),o.setStrokeWidth(t.strokeWidth),o.setOpacity(t.opacity))}},{key:"render",value:function e(){return null}}]),t}(w.PureComponent),Re=function e(t){return w.createElement(z,null,function(e){var o=e.map;return w.createElement(De,Te()({},t,{map:o}))})},Fe=o("react-dom"),je=o.n(Fe),_e=o("@ta/common.classnames"),Ue=o.n(_e),Ve=w.createContext({position:null}),Ge=Ve.Provider,Ne=Ve.Consumer,Xe=function(e){function t(){var e,o;r()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o=g()(this,(e=k()(t)).call.apply(e,[this].concat(i))),c()(b()(b()(o)),"state",{markerContainer:null}),c()(b()(b()(o)),"onMouseEnter",function(){o.hoverTimeout=setTimeout(o.handleMouseEnter,300)}),c()(b()(b()(o)),"onMouseLeave",function(){o.clearHoverTimeout(),o.props.onMouseLeave&&o.props.onMouseLeave()}),c()(b()(b()(o)),"handleMouseEnter",function(){o.props.disableTracking||E()({module:"pin",action:"pin_hover",context:o.props.trackingContext||""}),o.props.onMouseEnter&&o.props.onMouseEnter()}),c()(b()(b()(o)),"handleClick",function(e){e.stopPropagation(),o.props.disableTracking||E()({module:"pin",action:"pin_click",context:o.props.trackingContext||""}),o.props.onClick&&o.props.onClick()}),c()(b()(b()(o)),"hovered",!1),c()(b()(b()(o)),"hoverTimeout",null),o}return M()(t,e),l()(t,[{key:"componentDidMount",value:function e(){this.handleProps(this.props)}},{key:"componentWillReceiveProps",value:function e(t){this.handleProps(t)}},{key:"componentWillUnmount",value:function e(){var t=this.props.map,o=this.state.markerContainer;this.clearHoverTimeout(),t&&o&&(t.removeMarkerContainer(o),this.setState({markerContainer:null}))}},{key:"clearHoverTimeout",value:function e(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null)}},{key:"handleProps",value:function e(t){var o=this,n=t.position,i=t.map,a=t.showAnchor,r=t.zIndexOffset,s=t.draggable,l=t.onDrag,u=this.state.markerContainer;if(i){if(!u){var c=s?{position:n,draggable:s,onDrag:l}:{position:n};u=i.createMarkerContainer(c),this.setState({markerContainer:u}),u.getContainer()||u.setMarkerReadyCallback(function(){return o.forceUpdate()})}a&&u.showAnchor(),u.setZIndexOffset(r),n.equals(u.getPosition())||u.setPosition(n)}}},{key:"render",value:function e(){var t=this.state.markerContainer,o=this.props,n=o.children,i=o.position,a=o.className,r=o.onClick,s=t?t.getContainer():null;if(n&&s){var l=w.createElement("div",{className:Ue()(a,c()({},"public-maps-Marker__clickable--1Fb3H",!!r)),onClick:this.handleClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},n);return w.createElement(Ge,{value:{position:i}},je.a.createPortal(l,s))}return null}}]),t}(w.PureComponent);c()(Xe,"defaultProps",{showAnchor:!1,containerClass:null,map:null,zIndexOffset:0,draggable:!1});var qe=function e(t){return w.createElement(z,null,function(e){var o=e.map;return w.createElement(Xe,Te()({},t,{map:o}))})};qe.defaultProps={children:[],showAnchor:!1,zIndexOffset:0,onMouseEnter:null,onMouseLeave:null,onClick:null,trackingContext:null,className:null,disableTracking:!1,draggable:!1};var Ye=qe,Ke=o("@ta/common.cdn"),Je=function(e){function t(){return r()(this,t),g()(this,k()(t).apply(this,arguments))}return M()(t,e),l()(t,[{key:"render",value:function e(){var t=this.props;return w.createElement(Ye,{position:t.position,zIndexOffset:t.zIndexOffset,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onClick:t.onClick,trackingContext:t.trackingContext,draggable:t.draggable,onDrag:t.onDrag},w.createElement(Ke.CdnImage,{style:{cursor:"pointer",width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),position:"absolute",left:"-".concat(t.anchor.x,"px"),top:"-".concat(t.anchor.y,"px"),opacity:t.alpha,transition:t.animated?"width 0.3s, height 0.3s, left 0.3s, top 0.3s":null},src:t.src}),t.children)}}]),t}(w.PureComponent);c()(Je,"defaultProps",{zIndexOffset:0,draggable:!1,animated:!1,children:null,onMouseEnter:null,onMouseLeave:null,onClick:null,alpha:1,trackingContext:null});var Qe=Je,$e={markerCalloutContainer:"public-maps-Popup__markerCalloutContainer--eBKSQ",noInteraction:"public-maps-Popup__noInteraction--KvVa3",topleft:"public-maps-Popup__topleft--3fho-",top:"public-maps-Popup__top--dMfPD",topright:"public-maps-Popup__topright--1ghIa",left:"public-maps-Popup__left--m2jAl",right:"public-maps-Popup__right--1Z8ju",bottomleft:"public-maps-Popup__bottomleft--ktwul",bottom:"public-maps-Popup__bottom--1Vhwv",bottomright:"public-maps-Popup__bottomright--38M_r"},et=function e(){},tt=function e(t,o,n){var i={left:o/2,right:o/2,top:n/2,bottom:n/2};return t.includes("left")&&(i.left=o,i.right=0),t.includes("right")&&(i.left=0,i.right=o),t.includes("top")&&(i.top=n,i.bottom=0),t.includes("bottom")&&(i.top=0,i.bottom=n),i},ot=function(e){function t(){var e,o;r()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o=g()(this,(e=k()(t)).call.apply(e,[this].concat(i))),c()(b()(b()(o)),"hasAutoPanned",!1),c()(b()(b()(o)),"checkAutoPan",function(e){if(e&&o.props.autoPan&&!o.hasAutoPanned){o.hasAutoPanned=!0;var t=e.offsetWidth,n=e.offsetHeight;o.props.map.panIntoView(o.props.position,tt(o.props.direction,t,n))}}),o}return M()(t,e),l()(t,[{key:"render",value:function e(){var t=this.props,o=t.direction,n=t.position,i=t.zIndexOffset,a=t.offset,r=t.children,s=t.disableInteraction,l=$e[o];return w.createElement(Ye,{position:n,zIndexOffset:i,disableTracking:!0},w.createElement("div",{ref:this.checkAutoPan,className:"".concat($e.markerCalloutContainer," ").concat(s?$e.noInteraction:""," ").concat(l),style:{marginTop:a.y,marginLeft:a.x},onClick:et,onMouseEnter:et,onMouseLeave:et},r))}}]),t}(w.PureComponent),nt=function e(t){if(!t.visible)return null;var o=function e(o){return w.createElement(z,null,function(e){var n=e.map;return n&&w.createElement(ot,{direction:t.direction,offset:t.offset,position:o,autoPan:t.autoPan,map:n,zIndexOffset:t.zIndexOffset,disableInteraction:t.disableInteraction},t.children)})};return t.position?o(t.position):w.createElement(Ne,null,function(e){return o(e.position)})};nt.defaultProps={position:null,autoPan:!0,visible:!0,zIndexOffset:99999999,disableInteraction:!1};var it=nt,at=function(e){function t(){var e,o;r()(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o=g()(this,(e=k()(t)).call.apply(e,[this].concat(i))),c()(b()(b()(o)),"state",{polygonOverlay:null}),o}return M()(t,e),l()(t,[{key:"componentDidMount",value:function e(){this.handleProps(this.props)}},{key:"componentDidUpdate",value:function e(){this.handleProps(this.props)}},{key:"componentWillUnmount",value:function e(){var t=this.props.map,o=this.state.polygonOverlay;t&&o&&(t.removePolygonOverlay(o),this.setState({polygonOverlay:null}))}},{key:"handleProps",value:function e(t){var o=this.state.polygonOverlay,n=t.map;n&&(o||(o=n.addPolygonOverlay(this.props),this.setState({polygonOverlay:o})),o.setPolygon(t.coords),o.setFillColor(t.fillColor),o.setStrokeColor(t.strokeColor),o.setStrokeWidth(t.strokeWidth),o.setOpacity(t.opacity),o.setStrokeOpacity(t.strokeOpacity),o.setOnMouseOverInteraction(t.onMouseOver),o.setOnMouseOutInteraction(t.onMouseOut),o.setOnClickInteraction(t.onClick))}},{key:"render",value:function e(){return null}}]),t}(w.PureComponent),rt=function e(t){return w.createElement(z,null,function(e){var o=e.map;return w.createElement(at,Te()({},t,{map:o}))})};o.d(t,"MapProviderGoogle",function(){return i.MapProviderGoogle}),o.d(t,"MapProviderCitymaps",function(){return i.MapProviderCitymaps}),o.d(t,"MapProviderBing",function(){return i.MapProviderBing}),o.d(t,"MapProviderAutonavi",function(){return i.MapProviderAutonavi}),o.d(t,"LatLng",function(){return h}),o.d(t,"LatLngBounds",function(){return v}),o.d(t,"MapComponent",function(){return Ze}),o.d(t,"Util",function(){return We}),o.d(t,"CircleOverlay",function(){return Re}),o.d(t,"MapInterface",function(){return _}),o.d(t,"MapContextProvider",function(){return I}),o.d(t,"MapContextConsumer",function(){return z}),o.d(t,"Marker",function(){return Ye}),o.d(t,"IconMarker",function(){return Qe}),o.d(t,"Popup",function(){return it}),o.d(t,"PolygonOverlay",function(){return rt}),o.d(t,"MockMapInterface",function(){return Pe})}}});
//# sourceMappingURL=public.maps.94af431d60.js.map